(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();var mp={exports:{}},ou={};var AT;function Tw(){if(AT)return ou;AT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:c,ref:o!==void 0?o:null,props:u}}return ou.Fragment=t,ou.jsx=e,ou.jsxs=e,ou}var CT;function Sw(){return CT||(CT=1,mp.exports=Tw()),mp.exports}var at=Sw(),pp={exports:{}},lu={},_p={exports:{}},gp={};var bT;function Aw(){return bT||(bT=1,(function(i){function t(H,it){var dt=H.length;H.push(it);t:for(;0<dt;){var kt=dt-1>>>1,jt=H[kt];if(0<o(jt,it))H[kt]=it,H[dt]=jt,dt=kt;else break t}}function e(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var it=H[0],dt=H.pop();if(dt!==it){H[0]=dt;t:for(var kt=0,jt=H.length,M=jt>>>1;kt<M;){var Y=2*(kt+1)-1,tt=H[Y],ot=Y+1,pt=H[ot];if(0>o(tt,dt))ot<jt&&0>o(pt,tt)?(H[kt]=pt,H[ot]=dt,kt=ot):(H[kt]=tt,H[Y]=dt,kt=Y);else if(ot<jt&&0>o(pt,dt))H[kt]=pt,H[ot]=dt,kt=ot;else break t}}return it}function o(H,it){var dt=H.sortIndex-it.sortIndex;return dt!==0?dt:H.id-it.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();i.unstable_now=function(){return c.now()-m}}var p=[],_=[],E=1,T=null,S=3,V=!1,F=!1,W=!1,J=!1,ht=typeof setTimeout=="function"?setTimeout:null,Et=typeof clearTimeout=="function"?clearTimeout:null,gt=typeof setImmediate<"u"?setImmediate:null;function Qt(H){for(var it=e(_);it!==null;){if(it.callback===null)r(_);else if(it.startTime<=H)r(_),it.sortIndex=it.expirationTime,t(p,it);else break;it=e(_)}}function le(H){if(W=!1,Qt(H),!F)if(e(p)!==null)F=!0,Nt||(Nt=!0,k());else{var it=e(_);it!==null&&me(le,it.startTime-H)}}var Nt=!1,N=-1,b=5,I=-1;function x(){return J?!0:!(i.unstable_now()-I<b)}function D(){if(J=!1,Nt){var H=i.unstable_now();I=H;var it=!0;try{t:{F=!1,W&&(W=!1,Et(N),N=-1),V=!0;var dt=S;try{e:{for(Qt(H),T=e(p);T!==null&&!(T.expirationTime>H&&x());){var kt=T.callback;if(typeof kt=="function"){T.callback=null,S=T.priorityLevel;var jt=kt(T.expirationTime<=H);if(H=i.unstable_now(),typeof jt=="function"){T.callback=jt,Qt(H),it=!0;break e}T===e(p)&&r(p),Qt(H)}else r(p);T=e(p)}if(T!==null)it=!0;else{var M=e(_);M!==null&&me(le,M.startTime-H),it=!1}}break t}finally{T=null,S=dt,V=!1}it=void 0}}finally{it?k():Nt=!1}}}var k;if(typeof gt=="function")k=function(){gt(D)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,de=w.port2;w.port1.onmessage=D,k=function(){de.postMessage(null)}}else k=function(){ht(D,0)};function me(H,it){N=ht(function(){H(i.unstable_now())},it)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(H){switch(S){case 1:case 2:case 3:var it=3;break;default:it=S}var dt=S;S=it;try{return H()}finally{S=dt}},i.unstable_requestPaint=function(){J=!0},i.unstable_runWithPriority=function(H,it){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var dt=S;S=H;try{return it()}finally{S=dt}},i.unstable_scheduleCallback=function(H,it,dt){var kt=i.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?kt+dt:kt):dt=kt,H){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=dt+jt,H={id:E++,callback:it,priorityLevel:H,startTime:dt,expirationTime:jt,sortIndex:-1},dt>kt?(H.sortIndex=dt,t(_,H),e(p)===null&&H===e(_)&&(W?(Et(N),N=-1):W=!0,me(le,dt-kt))):(H.sortIndex=jt,t(p,H),F||V||(F=!0,Nt||(Nt=!0,k()))),H},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(H){var it=S;return function(){var dt=S;S=it;try{return H.apply(this,arguments)}finally{S=dt}}}})(gp)),gp}var wT;function Cw(){return wT||(wT=1,_p.exports=Aw()),_p.exports}var yp={exports:{}},Ct={};var RT;function bw(){if(RT)return Ct;RT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function V(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,J={};function ht(M,Y,tt){this.props=M,this.context=Y,this.refs=J,this.updater=tt||F}ht.prototype.isReactComponent={},ht.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},ht.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Et(){}Et.prototype=ht.prototype;function gt(M,Y,tt){this.props=M,this.context=Y,this.refs=J,this.updater=tt||F}var Qt=gt.prototype=new Et;Qt.constructor=gt,W(Qt,ht.prototype),Qt.isPureReactComponent=!0;var le=Array.isArray;function Nt(){}var N={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function I(M,Y,tt){var ot=tt.ref;return{$$typeof:i,type:M,key:Y,ref:ot!==void 0?ot:null,props:tt}}function x(M,Y){return I(M.type,Y,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function k(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(tt){return Y[tt]})}var w=/\/+/g;function de(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):Y.toString(36)}function me(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Nt,Nt):(M.status="pending",M.then(function(Y){M.status==="pending"&&(M.status="fulfilled",M.value=Y)},function(Y){M.status==="pending"&&(M.status="rejected",M.reason=Y)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function H(M,Y,tt,ot,pt){var rt=typeof M;(rt==="undefined"||rt==="boolean")&&(M=null);var Vt=!1;if(M===null)Vt=!0;else switch(rt){case"bigint":case"string":case"number":Vt=!0;break;case"object":switch(M.$$typeof){case i:case t:Vt=!0;break;case E:return Vt=M._init,H(Vt(M._payload),Y,tt,ot,pt)}}if(Vt)return pt=pt(M),Vt=ot===""?"."+de(M,0):ot,le(pt)?(tt="",Vt!=null&&(tt=Vt.replace(w,"$&/")+"/"),H(pt,Y,tt,"",function(ns){return ns})):pt!=null&&(D(pt)&&(pt=x(pt,tt+(pt.key==null||M&&M.key===pt.key?"":(""+pt.key).replace(w,"$&/")+"/")+Vt)),Y.push(pt)),1;Vt=0;var we=ot===""?".":ot+":";if(le(M))for(var ue=0;ue<M.length;ue++)ot=M[ue],rt=we+de(ot,ue),Vt+=H(ot,Y,tt,rt,pt);else if(ue=V(M),typeof ue=="function")for(M=ue.call(M),ue=0;!(ot=M.next()).done;)ot=ot.value,rt=we+de(ot,ue++),Vt+=H(ot,Y,tt,rt,pt);else if(rt==="object"){if(typeof M.then=="function")return H(me(M),Y,tt,ot,pt);throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Vt}function it(M,Y,tt){if(M==null)return M;var ot=[],pt=0;return H(M,ot,"","",function(rt){return Y.call(tt,rt,pt++)}),ot}function dt(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(tt){(M._status===0||M._status===-1)&&(M._status=1,M._result=tt)},function(tt){(M._status===0||M._status===-1)&&(M._status=2,M._result=tt)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var kt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},jt={map:it,forEach:function(M,Y,tt){it(M,function(){Y.apply(this,arguments)},tt)},count:function(M){var Y=0;return it(M,function(){Y++}),Y},toArray:function(M){return it(M,function(Y){return Y})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ct.Activity=T,Ct.Children=jt,Ct.Component=ht,Ct.Fragment=e,Ct.Profiler=o,Ct.PureComponent=gt,Ct.StrictMode=r,Ct.Suspense=p,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Ct.cache=function(M){return function(){return M.apply(null,arguments)}},Ct.cacheSignal=function(){return null},Ct.cloneElement=function(M,Y,tt){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ot=W({},M.props),pt=M.key;if(Y!=null)for(rt in Y.key!==void 0&&(pt=""+Y.key),Y)!b.call(Y,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&Y.ref===void 0||(ot[rt]=Y[rt]);var rt=arguments.length-2;if(rt===1)ot.children=tt;else if(1<rt){for(var Vt=Array(rt),we=0;we<rt;we++)Vt[we]=arguments[we+2];ot.children=Vt}return I(M.type,pt,ot)},Ct.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Ct.createElement=function(M,Y,tt){var ot,pt={},rt=null;if(Y!=null)for(ot in Y.key!==void 0&&(rt=""+Y.key),Y)b.call(Y,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(pt[ot]=Y[ot]);var Vt=arguments.length-2;if(Vt===1)pt.children=tt;else if(1<Vt){for(var we=Array(Vt),ue=0;ue<Vt;ue++)we[ue]=arguments[ue+2];pt.children=we}if(M&&M.defaultProps)for(ot in Vt=M.defaultProps,Vt)pt[ot]===void 0&&(pt[ot]=Vt[ot]);return I(M,rt,pt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(M){return{$$typeof:m,render:M}},Ct.isValidElement=D,Ct.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:dt}},Ct.memo=function(M,Y){return{$$typeof:_,type:M,compare:Y===void 0?null:Y}},Ct.startTransition=function(M){var Y=N.T,tt={};N.T=tt;try{var ot=M(),pt=N.S;pt!==null&&pt(tt,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(Nt,kt)}catch(rt){kt(rt)}finally{Y!==null&&tt.types!==null&&(Y.types=tt.types),N.T=Y}},Ct.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ct.use=function(M){return N.H.use(M)},Ct.useActionState=function(M,Y,tt){return N.H.useActionState(M,Y,tt)},Ct.useCallback=function(M,Y){return N.H.useCallback(M,Y)},Ct.useContext=function(M){return N.H.useContext(M)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(M,Y){return N.H.useDeferredValue(M,Y)},Ct.useEffect=function(M,Y){return N.H.useEffect(M,Y)},Ct.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Ct.useId=function(){return N.H.useId()},Ct.useImperativeHandle=function(M,Y,tt){return N.H.useImperativeHandle(M,Y,tt)},Ct.useInsertionEffect=function(M,Y){return N.H.useInsertionEffect(M,Y)},Ct.useLayoutEffect=function(M,Y){return N.H.useLayoutEffect(M,Y)},Ct.useMemo=function(M,Y){return N.H.useMemo(M,Y)},Ct.useOptimistic=function(M,Y){return N.H.useOptimistic(M,Y)},Ct.useReducer=function(M,Y,tt){return N.H.useReducer(M,Y,tt)},Ct.useRef=function(M){return N.H.useRef(M)},Ct.useState=function(M){return N.H.useState(M)},Ct.useSyncExternalStore=function(M,Y,tt){return N.H.useSyncExternalStore(M,Y,tt)},Ct.useTransition=function(){return N.H.useTransition()},Ct.version="19.2.0",Ct}var IT;function N_(){return IT||(IT=1,yp.exports=bw()),yp.exports}var vp={exports:{}},_n={};var NT;function ww(){if(NT)return _n;NT=1;var i=N_();function t(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,_,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:_,implementation:E}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(p,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(p,_,null,E)},_n.flushSync=function(p){var _=c.T,E=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=_,r.p=E,r.d.f()}},_n.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(p,_))},_n.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},_n.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var E=_.as,T=m(E,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,V=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?r.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:V}):E==="script"&&r.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:V,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},_n.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);r.d.M(p,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(p)},_n.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,T=m(E,_.crossOrigin);r.d.L(p,E,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},_n.preloadModule=function(p,_){if(typeof p=="string")if(_){var E=m(_.as,_.crossOrigin);r.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(p)},_n.requestFormReset=function(p){r.d.r(p)},_n.unstable_batchedUpdates=function(p,_){return p(_)},_n.useFormState=function(p,_,E){return c.H.useFormState(p,_,E)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var DT;function Rw(){if(DT)return vp.exports;DT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),vp.exports=ww(),vp.exports}var OT;function Iw(){if(OT)return lu;OT=1;var i=Cw(),t=N_(),e=Rw();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(u(n)!==n)throw Error(r(188))}function _(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),n;if(d===l)return p(f),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var y=!1,A=f.child;A;){if(A===a){y=!0,a=f,l=d;break}if(A===l){y=!0,l=f,a=d;break}A=A.sibling}if(!y){for(A=d.child;A;){if(A===a){y=!0,a=d,l=f;break}if(A===l){y=!0,l=d,a=f;break}A=A.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function E(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=E(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ht=Symbol.for("react.profiler"),Et=Symbol.for("react.consumer"),gt=Symbol.for("react.context"),Qt=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),Nt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var w=Symbol.for("react.client.reference");function de(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===w?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case W:return"Fragment";case ht:return"Profiler";case J:return"StrictMode";case le:return"Suspense";case Nt:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case F:return"Portal";case gt:return n.displayName||"Context";case Et:return(n._context.displayName||"Context")+".Consumer";case Qt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return s=n.displayName||null,s!==null?s:de(n.type)||"Memo";case b:s=n._payload,n=n._init;try{return de(n(s))}catch{}}return null}var me=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},kt=[],jt=-1;function M(n){return{current:n}}function Y(n){0>jt||(n.current=kt[jt],kt[jt]=null,jt--)}function tt(n,s){jt++,kt[jt]=n.current,n.current=s}var ot=M(null),pt=M(null),rt=M(null),Vt=M(null);function we(n,s){switch(tt(rt,s),tt(pt,n),tt(ot,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?QE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=QE(s),n=YE(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(ot),tt(ot,n)}function ue(){Y(ot),Y(pt),Y(rt)}function ns(n){n.memoizedState!==null&&tt(Vt,n);var s=ot.current,a=YE(s,n.type);s!==a&&(tt(pt,n),tt(ot,a))}function Yn(n){pt.current===n&&(Y(ot),Y(pt)),Vt.current===n&&(Y(Vt),iu._currentValue=dt)}var Vs,xs;function Kn(n){if(Vs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Vs=s&&s[1]||"",xs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vs+n+xs}var Pr=!1;function is(n,s){if(!n||Pr)return"";Pr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(j){var B=j}Reflect.construct(n,[],X)}else{try{X.call()}catch(j){B=j}n.call(X.prototype)}}else{try{throw Error()}catch(j){B=j}(X=n())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(j){if(j&&B&&typeof j.stack=="string")return[j.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],A=d[1];if(y&&A){var R=y.split(`
`),z=A.split(`
`);for(f=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(l===R.length||f===z.length)for(l=R.length-1,f=z.length-1;1<=l&&0<=f&&R[l]!==z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(R[l]!==z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||R[l]!==z[f]){var G=`
`+R[l].replace(" at new "," at ");return n.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",n.displayName)),G}while(1<=l&&0<=f);break}}}finally{Pr=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Kn(a):""}function Ur(n,s){switch(n.tag){case 26:case 27:case 5:return Kn(n.type);case 16:return Kn("Lazy");case 13:return n.child!==s&&s!==null?Kn("Suspense Fallback"):Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 15:return is(n.type,!1);case 11:return is(n.type.render,!1);case 1:return is(n.type,!0);case 31:return Kn("Activity");default:return""}}function Ls(n){try{var s="",a=null;do s+=Ur(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var $=Object.prototype.hasOwnProperty,ft=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,xe=i.unstable_shouldYield,Se=i.unstable_requestPaint,ce=i.unstable_now,ui=i.unstable_getCurrentPriorityLevel,ks=i.unstable_ImmediatePriority,ol=i.unstable_UserBlockingPriority,Ps=i.unstable_NormalPriority,gd=i.unstable_LowPriority,yc=i.unstable_IdlePriority,vc=i.log,Ec=i.unstable_setDisableYieldValue,ci=null,on=null;function Xn(n){if(typeof vc=="function"&&Ec(n),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(ci,n)}catch{}}var Re=Math.clz32?Math.clz32:Sc,Tc=Math.log,ka=Math.LN2;function Sc(n){return n>>>=0,n===0?32:31-(Tc(n)/ka|0)|0}var Ri=256,zr=262144,Le=4194304;function Ii(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ni(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,y=n.pingedLanes;n=n.warmLanes;var A=l&134217727;return A!==0?(l=A&~d,l!==0?f=Ii(l):(y&=A,y!==0?f=Ii(y):a||(a=A&~n,a!==0&&(f=Ii(a))))):(A=l&~d,A!==0?f=Ii(A):y!==0?f=Ii(y):a||(a=l&~n,a!==0&&(f=Ii(a)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:f}function hi(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function yd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ac(){var n=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),n}function Di(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Br(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function vd(n,s,a,l,f,d){var y=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,R=n.expirationTimes,z=n.hiddenUpdates;for(a=y&~a;0<a;){var G=31-Re(a),X=1<<G;A[G]=0,R[G]=-1;var B=z[G];if(B!==null)for(z[G]=null,G=0;G<B.length;G++){var j=B[G];j!==null&&(j.lane&=-536870913)}a&=~X}l!==0&&qr(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(y&~s))}function qr(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-Re(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function ll(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-Re(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function ul(n,s){var a=s&-s;return a=(a&42)!==0?1:Fr(a),(a&(n.suspendedLanes|s))!==0?0:a}function Fr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ss(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Cc(){var n=it.p;return n!==0?n:(n=window.event,n===void 0?32:_T(n.type))}function fi(n,s){var a=it.p;try{return it.p=n,s()}finally{it.p=a}}var di=Math.random().toString(36).slice(2),ke="__reactFiber$"+di,Ze="__reactProps$"+di,Oi="__reactContainer$"+di,Pa="__reactEvents$"+di,Ed="__reactListeners$"+di,bc="__reactHandles$"+di,wc="__reactResources$"+di,Mi="__reactMarker$"+di;function Ua(n){delete n[ke],delete n[Ze],delete n[Pa],delete n[Ed],delete n[bc]}function Vi(n){var s=n[ke];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Oi]||a[ke]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=tT(n);n!==null;){if(a=n[ke])return a;n=tT(n)}return s}n=a,a=n.parentNode}return null}function Wn(n){if(n=n[ke]||n[Oi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ln(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function xi(n){var s=n[wc];return s||(s=n[wc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pe(n){n[Mi]=!0}var cl=new Set,hl={};function Li(n,s){ki(n,s),ki(n+"Capture",s)}function ki(n,s){for(hl[n]=s,n=0;n<s.length;n++)cl.add(s[n])}var fl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dl={},ml={};function Rc(n){return $.call(ml,n)?!0:$.call(dl,n)?!1:fl.test(n)?ml[n]=!0:(dl[n]=!0,!1)}function za(n,s,a){if(Rc(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function kn(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Ue(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function Je(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Us(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function pl(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function $t(n){if(!n._valueTracker){var s=Us(n)?"checked":"value";n._valueTracker=pl(n,s,""+n[s])}}function jr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=Us(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Pi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Hr=/[\n"\\]/g;function An(n){return n.replace(Hr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ba(n,s,a,l,f,d,y,A){n.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?n.type=y:n.removeAttribute("type"),s!=null?y==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Je(s)):n.value!==""+Je(s)&&(n.value=""+Je(s)):y!=="submit"&&y!=="reset"||n.removeAttribute("value"),s!=null?_l(n,y,Je(s)):a!=null?_l(n,y,Je(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Je(A):n.removeAttribute("name")}function Ic(n,s,a,l,f,d,y,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){$t(n);return}a=a!=null?""+Je(a):"",s=s!=null?""+Je(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=A?n.checked:!!l,n.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.name=y),$t(n)}function _l(n,s,a){s==="number"&&Pi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function zs(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Je(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Nc(n,s,a){if(s!=null&&(s=""+Je(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+Je(a):""}function Bs(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(me(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Je(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),$t(n)}function Cn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Dc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||Dc.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function yl(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&gl(n,f,l)}else for(var d in s)s.hasOwnProperty(d)&&gl(n,d,s[d])}function qa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(n){return qs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function mi(){}var vl=null;function Zn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Fs=null,Ui=null;function Gr(n){var s=Wn(n);if(s&&(n=s.stateNode)){var a=n[Ze]||null;t:switch(n=s.stateNode,s.type){case"input":if(Ba(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+An(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[Ze]||null;if(!f)throw Error(r(90));Ba(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&jr(l)}break t;case"textarea":Nc(n,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&zs(n,!!a.multiple,s,!1)}}}var ja=!1;function js(n,s,a){if(ja)return n(s,a);ja=!0;try{var l=n(s);return l}finally{if(ja=!1,(Fs!==null||Ui!==null)&&(Ch(),Fs&&(s=Fs,n=Ui,Ui=Fs=null,Gr(s),n)))for(s=0;s<n.length;s++)Gr(n[s])}}function pi(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Ze]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qr=!1;if(Jn)try{var ie={};Object.defineProperty(ie,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",ie,ie),window.removeEventListener("test",ie,ie)}catch{Qr=!1}var zi=null,El=null,Yr=null;function Tl(){if(Yr)return Yr;var n,s=El,a=s.length,l,f="value"in zi?zi.value:zi.textContent,d=f.length;for(n=0;n<a&&s[n]===f[n];n++);var y=a-n;for(l=1;l<=y&&s[a-l]===f[d-l];l++);return Yr=f.slice(n,1<l?1-l:void 0)}function Kr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function rs(){return!0}function _i(){return!1}function ln(n){function s(a,l,f,d,y){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?rs:_i,this.isPropagationStopped=_i,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),s}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=ln(as),Hs=T({},as,{view:0,detail:0}),Sl=ln(Hs),Gs,Ha,qi,Ga=T({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qi&&(qi&&n.type==="mousemove"?(Gs=n.screenX-qi.screenX,Ha=n.screenY-qi.screenY):Ha=Gs=0,qi=n),Gs)},movementY:function(n){return"movementY"in n?n.movementY:Ha}}),Al=ln(Ga),Xr=T({},Ga,{dataTransfer:0}),Mc=ln(Xr),Vc=T({},Hs,{relatedTarget:0}),Wr=ln(Vc),Cl=T({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),xc=ln(Cl),Qa=T({},as,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Lc=ln(Qa),kc=T({},as,{data:0}),Fi=ln(kc),Pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bc(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=zc[n])?!!s[n]:!1}function Qs(){return Bc}var En=T({},Hs,{key:function(n){if(n.key){var s=Pc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Kr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Uc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(n){return n.type==="keypress"?Kr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Kr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qc=ln(En),Fc=T({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),os=ln(Fc),h=T({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),g=ln(h),v=T({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=ln(v),P=T({},Ga,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),q=ln(P),nt=T({},as,{newState:0,oldState:0}),bt=ln(nt),Ie=[9,13,27,32],Wt=Jn&&"CompositionEvent"in window,ve=null;Jn&&"documentMode"in document&&(ve=document.documentMode);var $n=Jn&&"TextEvent"in window&&!ve,ji=Jn&&(!Wt||ve&&8<ve&&11>=ve),gi=" ",yi=!1;function Zr(n,s){switch(n){case"keyup":return Ie.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ya(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ka=!1;function GC(n,s){switch(n){case"compositionend":return Ya(s);case"keypress":return s.which!==32?null:(yi=!0,gi);case"textInput":return n=s.data,n===gi&&yi?null:n;default:return null}}function QC(n,s){if(Ka)return n==="compositionend"||!Wt&&Zr(n,s)?(n=Tl(),Yr=El=zi=null,Ka=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ji&&s.locale!=="ko"?null:s.data;default:return null}}var YC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iy(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!YC[n.type]:s==="textarea"}function sy(n,s,a,l){Fs?Ui?Ui.push(l):Ui=[l]:Fs=l,s=Oh(s,"onChange"),0<s.length&&(a=new Bi("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var bl=null,wl=null;function KC(n){BE(n,0)}function jc(n){var s=Ln(n);if(jr(s))return n}function ry(n,s){if(n==="change")return s}var ay=!1;if(Jn){var Td;if(Jn){var Sd="oninput"in document;if(!Sd){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Sd=typeof oy.oninput=="function"}Td=Sd}else Td=!1;ay=Td&&(!document.documentMode||9<document.documentMode)}function ly(){bl&&(bl.detachEvent("onpropertychange",uy),wl=bl=null)}function uy(n){if(n.propertyName==="value"&&jc(wl)){var s=[];sy(s,wl,n,Zn(n)),js(KC,s)}}function XC(n,s,a){n==="focusin"?(ly(),bl=s,wl=a,bl.attachEvent("onpropertychange",uy)):n==="focusout"&&ly()}function WC(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jc(wl)}function ZC(n,s){if(n==="click")return jc(s)}function JC(n,s){if(n==="input"||n==="change")return jc(s)}function $C(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Pn=typeof Object.is=="function"?Object.is:$C;function Rl(n,s){if(Pn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!$.call(s,f)||!Pn(n[f],s[f]))return!1}return!0}function cy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function hy(n,s){var a=cy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=cy(a)}}function fy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?fy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function dy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Pi(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Pi(n.document)}return s}function Ad(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var tb=Jn&&"documentMode"in document&&11>=document.documentMode,Xa=null,Cd=null,Il=null,bd=!1;function my(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bd||Xa==null||Xa!==Pi(l)||(l=Xa,"selectionStart"in l&&Ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Il&&Rl(Il,l)||(Il=l,l=Oh(Cd,"onSelect"),0<l.length&&(s=new Bi("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=Xa)))}function Jr(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Wa={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},wd={},py={};Jn&&(py=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function $r(n){if(wd[n])return wd[n];if(!Wa[n])return n;var s=Wa[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in py)return wd[n]=s[a];return n}var _y=$r("animationend"),gy=$r("animationiteration"),yy=$r("animationstart"),eb=$r("transitionrun"),nb=$r("transitionstart"),ib=$r("transitioncancel"),vy=$r("transitionend"),Ey=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function vi(n,s){Ey.set(n,s),Li(s,[n])}var Hc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ti=[],Za=0,Id=0;function Gc(){for(var n=Za,s=Id=Za=0;s<n;){var a=ti[s];ti[s++]=null;var l=ti[s];ti[s++]=null;var f=ti[s];ti[s++]=null;var d=ti[s];if(ti[s++]=null,l!==null&&f!==null){var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}d!==0&&Ty(a,f,d)}}function Qc(n,s,a,l){ti[Za++]=n,ti[Za++]=s,ti[Za++]=a,ti[Za++]=l,Id|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Nd(n,s,a,l){return Qc(n,s,a,l),Yc(n)}function ta(n,s){return Qc(n,null,null,s),Yc(n)}function Ty(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&s!==null&&(f=31-Re(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),d):null}function Yc(n){if(50<Wl)throw Wl=0,Um=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ja={};function sb(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(n,s,a,l){return new sb(n,s,a,l)}function Dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ls(n,s){var a=n.alternate;return a===null?(a=Un(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Sy(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Kc(n,s,a,l,f,d){var y=0;if(l=n,typeof n=="function")Dd(n)&&(y=1);else if(typeof n=="string")y=uw(n,a,ot.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case I:return n=Un(31,a,s,f),n.elementType=I,n.lanes=d,n;case W:return ea(a.children,f,d,s);case J:y=8,f|=24;break;case ht:return n=Un(12,a,s,f|2),n.elementType=ht,n.lanes=d,n;case le:return n=Un(13,a,s,f),n.elementType=le,n.lanes=d,n;case Nt:return n=Un(19,a,s,f),n.elementType=Nt,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gt:y=10;break t;case Et:y=9;break t;case Qt:y=11;break t;case N:y=14;break t;case b:y=16,l=null;break t}y=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=Un(y,a,s,f),s.elementType=n,s.type=l,s.lanes=d,s}function ea(n,s,a,l){return n=Un(7,n,l,s),n.lanes=a,n}function Od(n,s,a){return n=Un(6,n,null,s),n.lanes=a,n}function Ay(n){var s=Un(18,null,null,0);return s.stateNode=n,s}function Md(n,s,a){return s=Un(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Cy=new WeakMap;function ei(n,s){if(typeof n=="object"&&n!==null){var a=Cy.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Ls(s)},Cy.set(n,s),s)}return{value:n,source:s,stack:Ls(s)}}var $a=[],to=0,Xc=null,Nl=0,ni=[],ii=0,Ys=null,Hi=1,Gi="";function us(n,s){$a[to++]=Nl,$a[to++]=Xc,Xc=n,Nl=s}function by(n,s,a){ni[ii++]=Hi,ni[ii++]=Gi,ni[ii++]=Ys,Ys=n;var l=Hi;n=Gi;var f=32-Re(l)-1;l&=~(1<<f),a+=1;var d=32-Re(s)+f;if(30<d){var y=f-f%5;d=(l&(1<<y)-1).toString(32),l>>=y,f-=y,Hi=1<<32-Re(s)+f|a<<f|l,Gi=d+n}else Hi=1<<d|a<<f|l,Gi=n}function Vd(n){n.return!==null&&(us(n,1),by(n,1,0))}function xd(n){for(;n===Xc;)Xc=$a[--to],$a[to]=null,Nl=$a[--to],$a[to]=null;for(;n===Ys;)Ys=ni[--ii],ni[ii]=null,Gi=ni[--ii],ni[ii]=null,Hi=ni[--ii],ni[ii]=null}function wy(n,s){ni[ii++]=Hi,ni[ii++]=Gi,ni[ii++]=Ys,Hi=s.id,Gi=s.overflow,Ys=n}var un=null,pe=null,qt=!1,Ks=null,si=!1,Ld=Error(r(519));function Xs(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(ei(s,n)),Ld}function Ry(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[ke]=n,s[Ze]=l,a){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(a=0;a<Jl.length;a++)Lt(Jl[a],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),Ic(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),Bs(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||HE(s.textContent,a)?(l.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),l.onScroll!=null&&Lt("scroll",s),l.onScrollEnd!=null&&Lt("scrollend",s),l.onClick!=null&&(s.onclick=mi),s=!0):s=!1,s||Xs(n,!0)}function Iy(n){for(un=n.return;un;)switch(un.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:un=un.return}}function eo(n){if(n!==un)return!1;if(!qt)return Iy(n),qt=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||$m(n.type,n.memoizedProps)),a=!a),a&&pe&&Xs(n),Iy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));pe=$E(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));pe=$E(n)}else s===27?(s=pe,ur(n.type)?(n=sp,sp=null,pe=n):pe=s):pe=un?ai(n.stateNode.nextSibling):null;return!0}function na(){pe=un=null,qt=!1}function kd(){var n=Ks;return n!==null&&(In===null?In=n:In.push.apply(In,n),Ks=null),n}function Dl(n){Ks===null?Ks=[n]:Ks.push(n)}var Pd=M(null),ia=null,cs=null;function Ws(n,s,a){tt(Pd,s._currentValue),s._currentValue=a}function hs(n){n._currentValue=Pd.current,Y(Pd)}function Ud(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function zd(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;t:for(;d!==null;){var A=d;d=f;for(var R=0;R<s.length;R++)if(A.context===s[R]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),Ud(d.return,a,n),l||(y=null);break t}d=A.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),Ud(y,a,n),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===n){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function no(n,s,a,l){n=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var A=f.type;Pn(f.pendingProps.value,y.value)||(n!==null?n.push(A):n=[A])}}else if(f===Vt.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(iu):n=[iu])}f=f.return}n!==null&&zd(s,n,a,l),s.flags|=262144}function Wc(n){for(n=n.firstContext;n!==null;){if(!Pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function sa(n){ia=n,cs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function cn(n){return Ny(ia,n)}function Zc(n,s){return ia===null&&sa(n),Ny(n,s)}function Ny(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},cs===null){if(n===null)throw Error(r(308));cs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else cs=cs.next=s;return a}var rb=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},ab=i.unstable_scheduleCallback,ob=i.unstable_NormalPriority,ze={$$typeof:gt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new rb,data:new Map,refCount:0}}function Ol(n){n.refCount--,n.refCount===0&&ab(ob,function(){n.controller.abort()})}var Ml=null,qd=0,io=0,so=null;function lb(n,s){if(Ml===null){var a=Ml=[];qd=0,io=Hm(),so={status:"pending",value:void 0,then:function(l){a.push(l)}}}return qd++,s.then(Dy,Dy),s}function Dy(){if(--qd===0&&Ml!==null){so!==null&&(so.status="fulfilled");var n=Ml;Ml=null,io=0,so=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function ub(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Oy=H.S;H.S=function(n,s){mE=ce(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&lb(n,s),Oy!==null&&Oy(n,s)};var ra=M(null);function Fd(){var n=ra.current;return n!==null?n:he.pooledCache}function Jc(n,s){s===null?tt(ra,ra.current):tt(ra,s.pool)}function My(){var n=Fd();return n===null?null:{parent:ze._currentValue,pool:n}}var ro=Error(r(460)),jd=Error(r(474)),$c=Error(r(542)),th={then:function(){}};function Vy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function xy(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(mi,mi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ky(n),n;default:if(typeof s.status=="string")s.then(mi,mi);else{if(n=he,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ky(n),n}throw oa=s,ro}}function aa(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oa=a,ro):a}}var oa=null;function Ly(){if(oa===null)throw Error(r(459));var n=oa;return oa=null,n}function ky(n){if(n===ro||n===$c)throw Error(r(483))}var ao=null,Vl=0;function eh(n){var s=Vl;return Vl+=1,ao===null&&(ao=[]),xy(ao,n,s)}function xl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function nh(n,s){throw s.$$typeof===S?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Py(n){function s(L,O){if(n){var U=L.deletions;U===null?(L.deletions=[O],L.flags|=16):U.push(O)}}function a(L,O){if(!n)return null;for(;O!==null;)s(L,O),O=O.sibling;return null}function l(L){for(var O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function f(L,O){return L=ls(L,O),L.index=0,L.sibling=null,L}function d(L,O,U){return L.index=U,n?(U=L.alternate,U!==null?(U=U.index,U<O?(L.flags|=67108866,O):U):(L.flags|=67108866,O)):(L.flags|=1048576,O)}function y(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,O,U,K){return O===null||O.tag!==6?(O=Od(U,L.mode,K),O.return=L,O):(O=f(O,U),O.return=L,O)}function R(L,O,U,K){var _t=U.type;return _t===W?G(L,O,U.props.children,K,U.key):O!==null&&(O.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===b&&aa(_t)===O.type)?(O=f(O,U.props),xl(O,U),O.return=L,O):(O=Kc(U.type,U.key,U.props,null,L.mode,K),xl(O,U),O.return=L,O)}function z(L,O,U,K){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Md(U,L.mode,K),O.return=L,O):(O=f(O,U.children||[]),O.return=L,O)}function G(L,O,U,K,_t){return O===null||O.tag!==7?(O=ea(U,L.mode,K,_t),O.return=L,O):(O=f(O,U),O.return=L,O)}function X(L,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Od(""+O,L.mode,U),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case V:return U=Kc(O.type,O.key,O.props,null,L.mode,U),xl(U,O),U.return=L,U;case F:return O=Md(O,L.mode,U),O.return=L,O;case b:return O=aa(O),X(L,O,U)}if(me(O)||k(O))return O=ea(O,L.mode,U,null),O.return=L,O;if(typeof O.then=="function")return X(L,eh(O),U);if(O.$$typeof===gt)return X(L,Zc(L,O),U);nh(L,O)}return null}function B(L,O,U,K){var _t=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return _t!==null?null:A(L,O,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case V:return U.key===_t?R(L,O,U,K):null;case F:return U.key===_t?z(L,O,U,K):null;case b:return U=aa(U),B(L,O,U,K)}if(me(U)||k(U))return _t!==null?null:G(L,O,U,K,null);if(typeof U.then=="function")return B(L,O,eh(U),K);if(U.$$typeof===gt)return B(L,O,Zc(L,U),K);nh(L,U)}return null}function j(L,O,U,K,_t){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return L=L.get(U)||null,A(O,L,""+K,_t);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case V:return L=L.get(K.key===null?U:K.key)||null,R(O,L,K,_t);case F:return L=L.get(K.key===null?U:K.key)||null,z(O,L,K,_t);case b:return K=aa(K),j(L,O,U,K,_t)}if(me(K)||k(K))return L=L.get(U)||null,G(O,L,K,_t,null);if(typeof K.then=="function")return j(L,O,U,eh(K),_t);if(K.$$typeof===gt)return j(L,O,U,Zc(O,K),_t);nh(O,K)}return null}function ut(L,O,U,K){for(var _t=null,Kt=null,ct=O,Rt=O=0,Ut=null;ct!==null&&Rt<U.length;Rt++){ct.index>Rt?(Ut=ct,ct=null):Ut=ct.sibling;var Xt=B(L,ct,U[Rt],K);if(Xt===null){ct===null&&(ct=Ut);break}n&&ct&&Xt.alternate===null&&s(L,ct),O=d(Xt,O,Rt),Kt===null?_t=Xt:Kt.sibling=Xt,Kt=Xt,ct=Ut}if(Rt===U.length)return a(L,ct),qt&&us(L,Rt),_t;if(ct===null){for(;Rt<U.length;Rt++)ct=X(L,U[Rt],K),ct!==null&&(O=d(ct,O,Rt),Kt===null?_t=ct:Kt.sibling=ct,Kt=ct);return qt&&us(L,Rt),_t}for(ct=l(ct);Rt<U.length;Rt++)Ut=j(ct,L,Rt,U[Rt],K),Ut!==null&&(n&&Ut.alternate!==null&&ct.delete(Ut.key===null?Rt:Ut.key),O=d(Ut,O,Rt),Kt===null?_t=Ut:Kt.sibling=Ut,Kt=Ut);return n&&ct.forEach(function(mr){return s(L,mr)}),qt&&us(L,Rt),_t}function vt(L,O,U,K){if(U==null)throw Error(r(151));for(var _t=null,Kt=null,ct=O,Rt=O=0,Ut=null,Xt=U.next();ct!==null&&!Xt.done;Rt++,Xt=U.next()){ct.index>Rt?(Ut=ct,ct=null):Ut=ct.sibling;var mr=B(L,ct,Xt.value,K);if(mr===null){ct===null&&(ct=Ut);break}n&&ct&&mr.alternate===null&&s(L,ct),O=d(mr,O,Rt),Kt===null?_t=mr:Kt.sibling=mr,Kt=mr,ct=Ut}if(Xt.done)return a(L,ct),qt&&us(L,Rt),_t;if(ct===null){for(;!Xt.done;Rt++,Xt=U.next())Xt=X(L,Xt.value,K),Xt!==null&&(O=d(Xt,O,Rt),Kt===null?_t=Xt:Kt.sibling=Xt,Kt=Xt);return qt&&us(L,Rt),_t}for(ct=l(ct);!Xt.done;Rt++,Xt=U.next())Xt=j(ct,L,Rt,Xt.value,K),Xt!==null&&(n&&Xt.alternate!==null&&ct.delete(Xt.key===null?Rt:Xt.key),O=d(Xt,O,Rt),Kt===null?_t=Xt:Kt.sibling=Xt,Kt=Xt);return n&&ct.forEach(function(Ew){return s(L,Ew)}),qt&&us(L,Rt),_t}function ae(L,O,U,K){if(typeof U=="object"&&U!==null&&U.type===W&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case V:t:{for(var _t=U.key;O!==null;){if(O.key===_t){if(_t=U.type,_t===W){if(O.tag===7){a(L,O.sibling),K=f(O,U.props.children),K.return=L,L=K;break t}}else if(O.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===b&&aa(_t)===O.type){a(L,O.sibling),K=f(O,U.props),xl(K,U),K.return=L,L=K;break t}a(L,O);break}else s(L,O);O=O.sibling}U.type===W?(K=ea(U.props.children,L.mode,K,U.key),K.return=L,L=K):(K=Kc(U.type,U.key,U.props,null,L.mode,K),xl(K,U),K.return=L,L=K)}return y(L);case F:t:{for(_t=U.key;O!==null;){if(O.key===_t)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(L,O.sibling),K=f(O,U.children||[]),K.return=L,L=K;break t}else{a(L,O);break}else s(L,O);O=O.sibling}K=Md(U,L.mode,K),K.return=L,L=K}return y(L);case b:return U=aa(U),ae(L,O,U,K)}if(me(U))return ut(L,O,U,K);if(k(U)){if(_t=k(U),typeof _t!="function")throw Error(r(150));return U=_t.call(U),vt(L,O,U,K)}if(typeof U.then=="function")return ae(L,O,eh(U),K);if(U.$$typeof===gt)return ae(L,O,Zc(L,U),K);nh(L,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(L,O.sibling),K=f(O,U),K.return=L,L=K):(a(L,O),K=Od(U,L.mode,K),K.return=L,L=K),y(L)):a(L,O)}return function(L,O,U,K){try{Vl=0;var _t=ae(L,O,U,K);return ao=null,_t}catch(ct){if(ct===ro||ct===$c)throw ct;var Kt=Un(29,ct,null,L.mode);return Kt.lanes=K,Kt.return=L,Kt}finally{}}}var la=Py(!0),Uy=Py(!1),Zs=!1;function Hd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Js(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $s(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Zt&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Yc(n),Ty(n,null,a),s}return Qc(n,l,s,a),Yc(n)}function Ll(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,ll(n,a)}}function Qd(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?f=d=s:d=d.next=s}else f=d=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Yd=!1;function kl(){if(Yd){var n=so;if(n!==null)throw n}}function Pl(n,s,a,l){Yd=!1;var f=n.updateQueue;Zs=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var R=A,z=R.next;R.next=null,y===null?d=z:y.next=z,y=R;var G=n.alternate;G!==null&&(G=G.updateQueue,A=G.lastBaseUpdate,A!==y&&(A===null?G.firstBaseUpdate=z:A.next=z,G.lastBaseUpdate=R))}if(d!==null){var X=f.baseState;y=0,G=z=R=null,A=d;do{var B=A.lane&-536870913,j=B!==A.lane;if(j?(Pt&B)===B:(l&B)===B){B!==0&&B===io&&(Yd=!0),G!==null&&(G=G.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var ut=n,vt=A;B=s;var ae=a;switch(vt.tag){case 1:if(ut=vt.payload,typeof ut=="function"){X=ut.call(ae,X,B);break t}X=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=vt.payload,B=typeof ut=="function"?ut.call(ae,X,B):ut,B==null)break t;X=T({},X,B);break t;case 2:Zs=!0}}B=A.callback,B!==null&&(n.flags|=64,j&&(n.flags|=8192),j=f.callbacks,j===null?f.callbacks=[B]:j.push(B))}else j={lane:B,tag:A.tag,payload:A.payload,callback:A.callback,next:null},G===null?(z=G=j,R=X):G=G.next=j,y|=B;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;j=A,A=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);G===null&&(R=X),f.baseState=R,f.firstBaseUpdate=z,f.lastBaseUpdate=G,d===null&&(f.shared.lanes=0),sr|=y,n.lanes=y,n.memoizedState=X}}function zy(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function By(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)zy(a[n],s)}var oo=M(null),ih=M(0);function qy(n,s){n=Es,tt(ih,n),tt(oo,s),Es=n|s.baseLanes}function Kd(){tt(ih,Es),tt(oo,oo.current)}function Xd(){Es=ih.current,Y(oo),Y(ih)}var zn=M(null),ri=null;function tr(n){var s=n.alternate;tt(Ne,Ne.current&1),tt(zn,n),ri===null&&(s===null||oo.current!==null||s.memoizedState!==null)&&(ri=n)}function Wd(n){tt(Ne,Ne.current),tt(zn,n),ri===null&&(ri=n)}function Fy(n){n.tag===22?(tt(Ne,Ne.current),tt(zn,n),ri===null&&(ri=n)):er()}function er(){tt(Ne,Ne.current),tt(zn,zn.current)}function Bn(n){Y(zn),ri===n&&(ri=null),Y(Ne)}var Ne=M(0);function sh(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||np(a)||ip(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fs=0,wt=null,se=null,Be=null,rh=!1,lo=!1,ua=!1,ah=0,Ul=0,uo=null,cb=0;function Ae(){throw Error(r(321))}function Zd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Pn(n[a],s[a]))return!1;return!0}function Jd(n,s,a,l,f,d){return fs=d,wt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=n===null||n.memoizedState===null?bv:dm,ua=!1,d=a(l,f),ua=!1,lo&&(d=Hy(s,a,l,f)),jy(n),d}function jy(n){H.H=ql;var s=se!==null&&se.next!==null;if(fs=0,Be=se=wt=null,rh=!1,Ul=0,uo=null,s)throw Error(r(300));n===null||qe||(n=n.dependencies,n!==null&&Wc(n)&&(qe=!0))}function Hy(n,s,a,l){wt=n;var f=0;do{if(lo&&(uo=null),Ul=0,lo=!1,25<=f)throw Error(r(301));if(f+=1,Be=se=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=wv,d=s(a,l)}while(lo);return d}function hb(){var n=H.H,s=n.useState()[0];return s=typeof s.then=="function"?zl(s):s,n=n.useState()[0],(se!==null?se.memoizedState:null)!==n&&(wt.flags|=1024),s}function $d(){var n=ah!==0;return ah=0,n}function tm(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function em(n){if(rh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}rh=!1}fs=0,Be=se=wt=null,lo=!1,Ul=ah=0,uo=null}function Tn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?wt.memoizedState=Be=n:Be=Be.next=n,Be}function De(){if(se===null){var n=wt.alternate;n=n!==null?n.memoizedState:null}else n=se.next;var s=Be===null?wt.memoizedState:Be.next;if(s!==null)Be=s,se=n;else{if(n===null)throw wt.alternate===null?Error(r(467)):Error(r(310));se=n,n={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Be===null?wt.memoizedState=Be=n:Be=Be.next=n}return Be}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(n){var s=Ul;return Ul+=1,uo===null&&(uo=[]),n=xy(uo,n,s),s=wt,(Be===null?s.memoizedState:Be.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?bv:dm),n}function lh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return zl(n);if(n.$$typeof===gt)return cn(n)}throw Error(r(438,String(n)))}function nm(n){var s=null,a=wt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=wt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=oh(),wt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=x;return s.index++,a}function ds(n,s){return typeof s=="function"?s(n):s}function uh(n){var s=De();return im(s,se,n)}function im(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}s.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{s=f.next;var A=y=null,R=null,z=s,G=!1;do{var X=z.lane&-536870913;if(X!==z.lane?(Pt&X)===X:(fs&X)===X){var B=z.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),X===io&&(G=!0);else if((fs&B)===B){z=z.next,B===io&&(G=!0);continue}else X={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(A=R=X,y=d):R=R.next=X,wt.lanes|=B,sr|=B;X=z.action,ua&&a(d,X),d=z.hasEagerState?z.eagerState:a(d,X)}else B={lane:X,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(A=R=B,y=d):R=R.next=B,wt.lanes|=X,sr|=X;z=z.next}while(z!==null&&z!==s);if(R===null?y=d:R.next=A,!Pn(d,n.memoizedState)&&(qe=!0,G&&(a=so,a!==null)))throw a;n.memoizedState=d,n.baseState=y,n.baseQueue=R,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function sm(n){var s=De(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=s.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do d=n(d,y.action),y=y.next;while(y!==f);Pn(d,s.memoizedState)||(qe=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function Gy(n,s,a){var l=wt,f=De(),d=qt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var y=!Pn((se||f).memoizedState,a);if(y&&(f.memoizedState=a,qe=!0),f=f.queue,om(Ky.bind(null,l,f,n),[n]),f.getSnapshot!==s||y||Be!==null&&Be.memoizedState.tag&1){if(l.flags|=2048,co(9,{destroy:void 0},Yy.bind(null,l,f,a,s),null),he===null)throw Error(r(349));d||(fs&127)!==0||Qy(l,s,a)}return a}function Qy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=wt.updateQueue,s===null?(s=oh(),wt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Yy(n,s,a,l){s.value=a,s.getSnapshot=l,Xy(s)&&Wy(n)}function Ky(n,s,a){return a(function(){Xy(s)&&Wy(n)})}function Xy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Pn(n,a)}catch{return!0}}function Wy(n){var s=ta(n,2);s!==null&&Nn(s,n,2)}function rm(n){var s=Tn();if(typeof n=="function"){var a=n;if(n=a(),ua){Xn(!0);try{a()}finally{Xn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:n},s}function Zy(n,s,a,l){return n.baseState=a,im(n,se,typeof l=="function"?l:ds)}function fb(n,s,a,l,f){if(fh(n))throw Error(r(485));if(n=s.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,Jy(s,d)):(d.next=a.next,s.pending=a.next=d)}}function Jy(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var d=H.T,y={};H.T=y;try{var A=a(f,l),R=H.S;R!==null&&R(y,A),$y(n,s,A)}catch(z){am(n,s,z)}finally{d!==null&&y.types!==null&&(d.types=y.types),H.T=d}}else try{d=a(f,l),$y(n,s,d)}catch(z){am(n,s,z)}}function $y(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){tv(n,s,l)},function(l){return am(n,s,l)}):tv(n,s,a)}function tv(n,s,a){s.status="fulfilled",s.value=a,ev(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,Jy(n,a)))}function am(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,ev(s),s=s.next;while(s!==l)}n.action=null}function ev(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function nv(n,s){return s}function iv(n,s){if(qt){var a=he.formState;if(a!==null){t:{var l=wt;if(qt){if(pe){e:{for(var f=pe,d=si;f.nodeType!==8;){if(!d){f=null;break e}if(f=ai(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){pe=ai(f.nextSibling),l=f.data==="F!";break t}}Xs(l)}l=!1}l&&(s=a[0])}}return a=Tn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nv,lastRenderedState:s},a.queue=l,a=Sv.bind(null,wt,l),l.dispatch=a,l=rm(!1),d=fm.bind(null,wt,!1,l.queue),l=Tn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=fb.bind(null,wt,f,d,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function sv(n){var s=De();return rv(s,se,n)}function rv(n,s,a){if(s=im(n,s,nv)[0],n=uh(ds)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=zl(s)}catch(y){throw y===ro?$c:y}else l=s;s=De();var f=s.queue,d=f.dispatch;return a!==s.memoizedState&&(wt.flags|=2048,co(9,{destroy:void 0},db.bind(null,f,a),null)),[l,d,n]}function db(n,s){n.action=s}function av(n){var s=De(),a=se;if(a!==null)return rv(s,a,n);De(),s=s.memoizedState,a=De();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function co(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=wt.updateQueue,s===null&&(s=oh(),wt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function ov(){return De().memoizedState}function ch(n,s,a,l){var f=Tn();wt.flags|=n,f.memoizedState=co(1|s,{destroy:void 0},a,l===void 0?null:l)}function hh(n,s,a,l){var f=De();l=l===void 0?null:l;var d=f.memoizedState.inst;se!==null&&l!==null&&Zd(l,se.memoizedState.deps)?f.memoizedState=co(s,d,a,l):(wt.flags|=n,f.memoizedState=co(1|s,d,a,l))}function lv(n,s){ch(8390656,8,n,s)}function om(n,s){hh(2048,8,n,s)}function mb(n){wt.flags|=4;var s=wt.updateQueue;if(s===null)s=oh(),wt.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function uv(n){var s=De().memoizedState;return mb({ref:s,nextImpl:n}),function(){if((Zt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function cv(n,s){return hh(4,2,n,s)}function hv(n,s){return hh(4,4,n,s)}function fv(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function dv(n,s,a){a=a!=null?a.concat([n]):null,hh(4,4,fv.bind(null,s,n),a)}function lm(){}function mv(n,s){var a=De();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Zd(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function pv(n,s){var a=De();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Zd(s,l[1]))return l[0];if(l=n(),ua){Xn(!0);try{n()}finally{Xn(!1)}}return a.memoizedState=[l,s],l}function um(n,s,a){return a===void 0||(fs&1073741824)!==0&&(Pt&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=_E(),wt.lanes|=n,sr|=n,a)}function _v(n,s,a,l){return Pn(a,s)?a:oo.current!==null?(n=um(n,a,l),Pn(n,s)||(qe=!0),n):(fs&42)===0||(fs&1073741824)!==0&&(Pt&261930)===0?(qe=!0,n.memoizedState=a):(n=_E(),wt.lanes|=n,sr|=n,s)}function gv(n,s,a,l,f){var d=it.p;it.p=d!==0&&8>d?d:8;var y=H.T,A={};H.T=A,fm(n,!1,s,a);try{var R=f(),z=H.S;if(z!==null&&z(A,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var G=ub(R,l);Bl(n,s,G,jn(n))}else Bl(n,s,l,jn(n))}catch(X){Bl(n,s,{then:function(){},status:"rejected",reason:X},jn())}finally{it.p=d,y!==null&&A.types!==null&&(y.types=A.types),H.T=y}}function pb(){}function cm(n,s,a,l){if(n.tag!==5)throw Error(r(476));var f=yv(n).queue;gv(n,f,s,dt,a===null?pb:function(){return vv(n),a(l)})}function yv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:dt},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function vv(n){var s=yv(n);s.next===null&&(s=n.alternate.memoizedState),Bl(n,s.next.queue,{},jn())}function hm(){return cn(iu)}function Ev(){return De().memoizedState}function Tv(){return De().memoizedState}function _b(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=jn();n=Js(a);var l=$s(s,n,a);l!==null&&(Nn(l,s,a),Ll(l,s,a)),s={cache:Bd()},n.payload=s;return}s=s.return}}function gb(n,s,a){var l=jn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fh(n)?Av(s,a):(a=Nd(n,s,a,l),a!==null&&(Nn(a,n,l),Cv(a,s,l)))}function Sv(n,s,a){var l=jn();Bl(n,s,a,l)}function Bl(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fh(n))Av(s,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var y=s.lastRenderedState,A=d(y,a);if(f.hasEagerState=!0,f.eagerState=A,Pn(A,y))return Qc(n,s,f,0),he===null&&Gc(),!1}catch{}finally{}if(a=Nd(n,s,f,l),a!==null)return Nn(a,n,l),Cv(a,s,l),!0}return!1}function fm(n,s,a,l){if(l={lane:2,revertLane:Hm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fh(n)){if(s)throw Error(r(479))}else s=Nd(n,a,l,2),s!==null&&Nn(s,n,2)}function fh(n){var s=n.alternate;return n===wt||s!==null&&s===wt}function Av(n,s){lo=rh=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Cv(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,ll(n,a)}}var ql={readContext:cn,use:lh,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useLayoutEffect:Ae,useInsertionEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useSyncExternalStore:Ae,useId:Ae,useHostTransitionStatus:Ae,useFormState:Ae,useActionState:Ae,useOptimistic:Ae,useMemoCache:Ae,useCacheRefresh:Ae};ql.useEffectEvent=Ae;var bv={readContext:cn,use:lh,useCallback:function(n,s){return Tn().memoizedState=[n,s===void 0?null:s],n},useContext:cn,useEffect:lv,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,ch(4194308,4,fv.bind(null,s,n),a)},useLayoutEffect:function(n,s){return ch(4194308,4,n,s)},useInsertionEffect:function(n,s){ch(4,2,n,s)},useMemo:function(n,s){var a=Tn();s=s===void 0?null:s;var l=n();if(ua){Xn(!0);try{n()}finally{Xn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Tn();if(a!==void 0){var f=a(s);if(ua){Xn(!0);try{a(s)}finally{Xn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=gb.bind(null,wt,n),[l.memoizedState,n]},useRef:function(n){var s=Tn();return n={current:n},s.memoizedState=n},useState:function(n){n=rm(n);var s=n.queue,a=Sv.bind(null,wt,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:lm,useDeferredValue:function(n,s){var a=Tn();return um(a,n,s)},useTransition:function(){var n=rm(!1);return n=gv.bind(null,wt,n.queue,!0,!1),Tn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=wt,f=Tn();if(qt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),he===null)throw Error(r(349));(Pt&127)!==0||Qy(l,s,a)}f.memoizedState=a;var d={value:a,getSnapshot:s};return f.queue=d,lv(Ky.bind(null,l,d,n),[n]),l.flags|=2048,co(9,{destroy:void 0},Yy.bind(null,l,d,a,s),null),a},useId:function(){var n=Tn(),s=he.identifierPrefix;if(qt){var a=Gi,l=Hi;a=(l&~(1<<32-Re(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=ah++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=cb++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:hm,useFormState:iv,useActionState:iv,useOptimistic:function(n){var s=Tn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=fm.bind(null,wt,!0,a),a.dispatch=s,[n,s]},useMemoCache:nm,useCacheRefresh:function(){return Tn().memoizedState=_b.bind(null,wt)},useEffectEvent:function(n){var s=Tn(),a={impl:n};return s.memoizedState=a,function(){if((Zt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},dm={readContext:cn,use:lh,useCallback:mv,useContext:cn,useEffect:om,useImperativeHandle:dv,useInsertionEffect:cv,useLayoutEffect:hv,useMemo:pv,useReducer:uh,useRef:ov,useState:function(){return uh(ds)},useDebugValue:lm,useDeferredValue:function(n,s){var a=De();return _v(a,se.memoizedState,n,s)},useTransition:function(){var n=uh(ds)[0],s=De().memoizedState;return[typeof n=="boolean"?n:zl(n),s]},useSyncExternalStore:Gy,useId:Ev,useHostTransitionStatus:hm,useFormState:sv,useActionState:sv,useOptimistic:function(n,s){var a=De();return Zy(a,se,n,s)},useMemoCache:nm,useCacheRefresh:Tv};dm.useEffectEvent=uv;var wv={readContext:cn,use:lh,useCallback:mv,useContext:cn,useEffect:om,useImperativeHandle:dv,useInsertionEffect:cv,useLayoutEffect:hv,useMemo:pv,useReducer:sm,useRef:ov,useState:function(){return sm(ds)},useDebugValue:lm,useDeferredValue:function(n,s){var a=De();return se===null?um(a,n,s):_v(a,se.memoizedState,n,s)},useTransition:function(){var n=sm(ds)[0],s=De().memoizedState;return[typeof n=="boolean"?n:zl(n),s]},useSyncExternalStore:Gy,useId:Ev,useHostTransitionStatus:hm,useFormState:av,useActionState:av,useOptimistic:function(n,s){var a=De();return se!==null?Zy(a,se,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:nm,useCacheRefresh:Tv};wv.useEffectEvent=uv;function mm(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:T({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var pm={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=jn(),f=Js(l);f.payload=s,a!=null&&(f.callback=a),s=$s(n,f,l),s!==null&&(Nn(s,n,l),Ll(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=jn(),f=Js(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=$s(n,f,l),s!==null&&(Nn(s,n,l),Ll(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=jn(),l=Js(a);l.tag=2,s!=null&&(l.callback=s),s=$s(n,l,a),s!==null&&(Nn(s,n,a),Ll(s,n,a))}};function Rv(n,s,a,l,f,d,y){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,y):s.prototype&&s.prototype.isPureReactComponent?!Rl(a,l)||!Rl(f,d):!0}function Iv(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&pm.enqueueReplaceState(s,s.state,null)}function ca(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Nv(n){Hc(n)}function Dv(n){console.error(n)}function Ov(n){Hc(n)}function dh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Mv(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function _m(n,s,a){return a=Js(a),a.tag=3,a.payload={element:null},a.callback=function(){dh(n,s)},a}function Vv(n){return n=Js(n),n.tag=3,n}function xv(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Mv(s,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(n.callback=function(){Mv(s,a,l),typeof f!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function yb(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&no(s,a,f,!0),a=zn.current,a!==null){switch(a.tag){case 31:case 13:return ri===null?bh():a.alternate===null&&Ce===0&&(Ce=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===th?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),qm(n,l,f)),!1;case 22:return a.flags|=65536,l===th?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),qm(n,l,f)),!1}throw Error(r(435,a.tag))}return qm(n,l,f),bh(),!1}if(qt)return s=zn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Ld&&(n=Error(r(422),{cause:l}),Dl(ei(n,a)))):(l!==Ld&&(s=Error(r(423),{cause:l}),Dl(ei(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=ei(l,a),f=_m(n.stateNode,l,f),Qd(n,f),Ce!==4&&(Ce=2)),!1;var d=Error(r(520),{cause:l});if(d=ei(d,a),Xl===null?Xl=[d]:Xl.push(d),Ce!==4&&(Ce=2),s===null)return!0;l=ei(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=_m(a.stateNode,l,n),Qd(a,n),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(rr===null||!rr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Vv(f),xv(f,n,a,l),Qd(a,f),!1}a=a.return}while(a!==null);return!1}var gm=Error(r(461)),qe=!1;function hn(n,s,a,l){s.child=n===null?Uy(s,null,a,l):la(s,n.child,a,l)}function Lv(n,s,a,l,f){a=a.render;var d=s.ref;if("ref"in l){var y={};for(var A in l)A!=="ref"&&(y[A]=l[A])}else y=l;return sa(s),l=Jd(n,s,a,y,d,f),A=$d(),n!==null&&!qe?(tm(n,s,f),ms(n,s,f)):(qt&&A&&Vd(s),s.flags|=1,hn(n,s,l,f),s.child)}function kv(n,s,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Dd(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Pv(n,s,d,l,f)):(n=Kc(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!bm(n,f)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:Rl,a(y,l)&&n.ref===s.ref)return ms(n,s,f)}return s.flags|=1,n=ls(d,l),n.ref=s.ref,n.return=s,s.child=n}function Pv(n,s,a,l,f){if(n!==null){var d=n.memoizedProps;if(Rl(d,l)&&n.ref===s.ref)if(qe=!1,s.pendingProps=l=d,bm(n,f))(n.flags&131072)!==0&&(qe=!0);else return s.lanes=n.lanes,ms(n,s,f)}return ym(n,s,a,l,f)}function Uv(n,s,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,s.child=null;return zv(n,s,d,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Jc(s,d!==null?d.cachePool:null),d!==null?qy(s,d):Kd(),Fy(s);else return l=s.lanes=536870912,zv(n,s,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Jc(s,d.cachePool),qy(s,d),er(),s.memoizedState=null):(n!==null&&Jc(s,null),Kd(),er());return hn(n,s,f,a),s.child}function Fl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function zv(n,s,a,l,f){var d=Fd();return d=d===null?null:{parent:ze._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},n!==null&&Jc(s,null),Kd(),Fy(s),n!==null&&no(n,s,l,!0),s.childLanes=f,null}function mh(n,s){return s=_h({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Bv(n,s,a){return la(s,n.child,null,a),n=mh(s,s.pendingProps),n.flags|=2,Bn(s),s.memoizedState=null,n}function vb(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(qt){if(l.mode==="hidden")return n=mh(s,l),s.lanes=536870912,Fl(null,n);if(Wd(s),(n=pe)?(n=JE(n,si),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ys!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=Ay(n),a.return=s,s.child=a,un=s,pe=null)):n=null,n===null)throw Xs(s);return s.lanes=536870912,null}return mh(s,l)}var d=n.memoizedState;if(d!==null){var y=d.dehydrated;if(Wd(s),f)if(s.flags&256)s.flags&=-257,s=Bv(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(qe||no(n,s,a,!1),f=(a&n.childLanes)!==0,qe||f){if(l=he,l!==null&&(y=ul(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,ta(n,y),Nn(l,n,y),gm;bh(),s=Bv(n,s,a)}else n=d.treeContext,pe=ai(y.nextSibling),un=s,qt=!0,Ks=null,si=!1,n!==null&&wy(s,n),s=mh(s,l),s.flags|=4096;return s}return n=ls(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ph(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function ym(n,s,a,l,f){return sa(s),a=Jd(n,s,a,l,void 0,f),l=$d(),n!==null&&!qe?(tm(n,s,f),ms(n,s,f)):(qt&&l&&Vd(s),s.flags|=1,hn(n,s,a,f),s.child)}function qv(n,s,a,l,f,d){return sa(s),s.updateQueue=null,a=Hy(s,l,a,f),jy(n),l=$d(),n!==null&&!qe?(tm(n,s,d),ms(n,s,d)):(qt&&l&&Vd(s),s.flags|=1,hn(n,s,a,d),s.child)}function Fv(n,s,a,l,f){if(sa(s),s.stateNode===null){var d=Ja,y=a.contextType;typeof y=="object"&&y!==null&&(d=cn(y)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=pm,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Hd(s),y=a.contextType,d.context=typeof y=="object"&&y!==null?cn(y):Ja,d.state=s.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(mm(s,a,y,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&pm.enqueueReplaceState(d,d.state,null),Pl(s,l,d,f),kl(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){d=s.stateNode;var A=s.memoizedProps,R=ca(a,A);d.props=R;var z=d.context,G=a.contextType;y=Ja,typeof G=="object"&&G!==null&&(y=cn(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||z!==y)&&Iv(s,d,l,y),Zs=!1;var B=s.memoizedState;d.state=B,Pl(s,l,d,f),kl(),z=s.memoizedState,A||B!==z||Zs?(typeof X=="function"&&(mm(s,a,X,l),z=s.memoizedState),(R=Zs||Rv(s,a,R,l,B,z,y))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=z),d.props=l,d.state=z,d.context=y,l=R):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Gd(n,s),y=s.memoizedProps,G=ca(a,y),d.props=G,X=s.pendingProps,B=d.context,z=a.contextType,R=Ja,typeof z=="object"&&z!==null&&(R=cn(z)),A=a.getDerivedStateFromProps,(z=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==X||B!==R)&&Iv(s,d,l,R),Zs=!1,B=s.memoizedState,d.state=B,Pl(s,l,d,f),kl();var j=s.memoizedState;y!==X||B!==j||Zs||n!==null&&n.dependencies!==null&&Wc(n.dependencies)?(typeof A=="function"&&(mm(s,a,A,l),j=s.memoizedState),(G=Zs||Rv(s,a,G,l,B,j,R)||n!==null&&n.dependencies!==null&&Wc(n.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,j,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,j,R)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===n.memoizedProps&&B===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&B===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=j),d.props=l,d.state=j,d.context=R,l=G):(typeof d.componentDidUpdate!="function"||y===n.memoizedProps&&B===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&B===n.memoizedState||(s.flags|=1024),l=!1)}return d=l,ph(n,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&l?(s.child=la(s,n.child,null,f),s.child=la(s,null,a,f)):hn(n,s,a,f),s.memoizedState=d.state,n=s.child):n=ms(n,s,f),n}function jv(n,s,a,l){return na(),s.flags|=256,hn(n,s,a,l),s.child}var vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Em(n){return{baseLanes:n,cachePool:My()}}function Tm(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Fn),n}function Hv(n,s,a){var l=s.pendingProps,f=!1,d=(s.flags&128)!==0,y;if((y=d)||(y=n!==null&&n.memoizedState===null?!1:(Ne.current&2)!==0),y&&(f=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,n===null){if(qt){if(f?tr(s):er(),(n=pe)?(n=JE(n,si),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ys!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=Ay(n),a.return=s,s.child=a,un=s,pe=null)):n=null,n===null)throw Xs(s);return ip(n)?s.lanes=32:s.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(er(),f=s.mode,A=_h({mode:"hidden",children:A},f),l=ea(l,f,a,null),A.return=s,l.return=s,A.sibling=l,s.child=A,l=s.child,l.memoizedState=Em(a),l.childLanes=Tm(n,y,a),s.memoizedState=vm,Fl(null,l)):(tr(s),Sm(s,A))}var R=n.memoizedState;if(R!==null&&(A=R.dehydrated,A!==null)){if(d)s.flags&256?(tr(s),s.flags&=-257,s=Am(n,s,a)):s.memoizedState!==null?(er(),s.child=n.child,s.flags|=128,s=null):(er(),A=l.fallback,f=s.mode,l=_h({mode:"visible",children:l.children},f),A=ea(A,f,a,null),A.flags|=2,l.return=s,A.return=s,l.sibling=A,s.child=l,la(s,n.child,null,a),l=s.child,l.memoizedState=Em(a),l.childLanes=Tm(n,y,a),s.memoizedState=vm,s=Fl(null,l));else if(tr(s),ip(A)){if(y=A.nextSibling&&A.nextSibling.dataset,y)var z=y.dgst;y=z,l=Error(r(419)),l.stack="",l.digest=y,Dl({value:l,source:null,stack:null}),s=Am(n,s,a)}else if(qe||no(n,s,a,!1),y=(a&n.childLanes)!==0,qe||y){if(y=he,y!==null&&(l=ul(y,a),l!==0&&l!==R.retryLane))throw R.retryLane=l,ta(n,l),Nn(y,n,l),gm;np(A)||bh(),s=Am(n,s,a)}else np(A)?(s.flags|=192,s.child=n.child,s=null):(n=R.treeContext,pe=ai(A.nextSibling),un=s,qt=!0,Ks=null,si=!1,n!==null&&wy(s,n),s=Sm(s,l.children),s.flags|=4096);return s}return f?(er(),A=l.fallback,f=s.mode,R=n.child,z=R.sibling,l=ls(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,z!==null?A=ls(z,A):(A=ea(A,f,a,null),A.flags|=2),A.return=s,l.return=s,l.sibling=A,s.child=l,Fl(null,l),l=s.child,A=n.child.memoizedState,A===null?A=Em(a):(f=A.cachePool,f!==null?(R=ze._currentValue,f=f.parent!==R?{parent:R,pool:R}:f):f=My(),A={baseLanes:A.baseLanes|a,cachePool:f}),l.memoizedState=A,l.childLanes=Tm(n,y,a),s.memoizedState=vm,Fl(n.child,l)):(tr(s),a=n.child,n=a.sibling,a=ls(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(y=s.deletions,y===null?(s.deletions=[n],s.flags|=16):y.push(n)),s.child=a,s.memoizedState=null,a)}function Sm(n,s){return s=_h({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function _h(n,s){return n=Un(22,n,null,s),n.lanes=0,n}function Am(n,s,a){return la(s,n.child,null,a),n=Sm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Gv(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Ud(n.return,s,a)}function Cm(n,s,a,l,f,d){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=f,y.treeForkCount=d)}function Qv(n,s,a){var l=s.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var y=Ne.current,A=(y&2)!==0;if(A?(y=y&1|2,s.flags|=128):y&=1,tt(Ne,y),hn(n,s,l,a),l=qt?Nl:0,!A&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gv(n,a,s);else if(n.tag===19)Gv(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&sh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Cm(s,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&sh(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Cm(s,!0,a,null,d,l);break;case"together":Cm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function ms(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),sr|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(no(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=ls(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ls(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function bm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Wc(n)))}function Eb(n,s,a){switch(s.tag){case 3:we(s,s.stateNode.containerInfo),Ws(s,ze,n.memoizedState.cache),na();break;case 27:case 5:ns(s);break;case 4:we(s,s.stateNode.containerInfo);break;case 10:Ws(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Wd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(tr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Hv(n,s,a):(tr(s),n=ms(n,s,a),n!==null?n.sibling:null);tr(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(no(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return Qv(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(Ne,Ne.current),l)break;return null;case 22:return s.lanes=0,Uv(n,s,a,s.pendingProps);case 24:Ws(s,ze,n.memoizedState.cache)}return ms(n,s,a)}function Yv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)qe=!0;else{if(!bm(n,a)&&(s.flags&128)===0)return qe=!1,Eb(n,s,a);qe=(n.flags&131072)!==0}else qe=!1,qt&&(s.flags&1048576)!==0&&by(s,Nl,s.index);switch(s.lanes=0,s.tag){case 16:t:{var l=s.pendingProps;if(n=aa(s.elementType),s.type=n,typeof n=="function")Dd(n)?(l=ca(n,l),s.tag=1,s=Fv(null,s,n,l,a)):(s.tag=0,s=ym(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===Qt){s.tag=11,s=Lv(null,s,n,l,a);break t}else if(f===N){s.tag=14,s=kv(null,s,n,l,a);break t}}throw s=de(n)||n,Error(r(306,s,""))}}return s;case 0:return ym(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=ca(l,s.pendingProps),Fv(n,s,l,f,a);case 3:t:{if(we(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;f=d.element,Gd(n,s),Pl(s,l,null,a);var y=s.memoizedState;if(l=y.cache,Ws(s,ze,l),l!==d.cache&&zd(s,[ze],a,!0),kl(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=jv(n,s,l,a);break t}else if(l!==f){f=ei(Error(r(424)),s),Dl(f),s=jv(n,s,l,a);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pe=ai(n.firstChild),un=s,qt=!0,Ks=null,si=!0,a=Uy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(na(),l===f){s=ms(n,s,a);break t}hn(n,s,l,a)}s=s.child}return s;case 26:return ph(n,s),n===null?(a=sT(s.type,null,s.pendingProps,null))?s.memoizedState=a:qt||(a=s.type,n=s.pendingProps,l=Mh(rt.current).createElement(a),l[ke]=s,l[Ze]=n,fn(l,a,n),Pe(l),s.stateNode=l):s.memoizedState=sT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ns(s),n===null&&qt&&(l=s.stateNode=eT(s.type,s.pendingProps,rt.current),un=s,si=!0,f=pe,ur(s.type)?(sp=f,pe=ai(l.firstChild)):pe=f),hn(n,s,s.pendingProps.children,a),ph(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&qt&&((f=l=pe)&&(l=Wb(l,s.type,s.pendingProps,si),l!==null?(s.stateNode=l,un=s,pe=ai(l.firstChild),si=!1,f=!0):f=!1),f||Xs(s)),ns(s),f=s.type,d=s.pendingProps,y=n!==null?n.memoizedProps:null,l=d.children,$m(f,d)?l=null:y!==null&&$m(f,y)&&(s.flags|=32),s.memoizedState!==null&&(f=Jd(n,s,hb,null,null,a),iu._currentValue=f),ph(n,s),hn(n,s,l,a),s.child;case 6:return n===null&&qt&&((n=a=pe)&&(a=Zb(a,s.pendingProps,si),a!==null?(s.stateNode=a,un=s,pe=null,n=!0):n=!1),n||Xs(s)),null;case 13:return Hv(n,s,a);case 4:return we(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=la(s,null,l,a):hn(n,s,l,a),s.child;case 11:return Lv(n,s,s.type,s.pendingProps,a);case 7:return hn(n,s,s.pendingProps,a),s.child;case 8:return hn(n,s,s.pendingProps.children,a),s.child;case 12:return hn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Ws(s,s.type,l.value),hn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,sa(s),f=cn(f),l=l(f),s.flags|=1,hn(n,s,l,a),s.child;case 14:return kv(n,s,s.type,s.pendingProps,a);case 15:return Pv(n,s,s.type,s.pendingProps,a);case 19:return Qv(n,s,a);case 31:return vb(n,s,a);case 22:return Uv(n,s,a,s.pendingProps);case 24:return sa(s),l=cn(ze),n===null?(f=Fd(),f===null&&(f=he,d=Bd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),s.memoizedState={parent:l,cache:f},Hd(s),Ws(s,ze,f)):((n.lanes&a)!==0&&(Gd(n,s),Pl(s,null,null,a),kl()),f=n.memoizedState,d=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ws(s,ze,l)):(l=d.cache,Ws(s,ze,l),l!==f.cache&&zd(s,[ze],a,!0))),hn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ps(n){n.flags|=4}function wm(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(EE())n.flags|=8192;else throw oa=th,jd}else n.flags&=-16777217}function Kv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!uT(s))if(EE())n.flags|=8192;else throw oa=th,jd}function gh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Ac():536870912,n.lanes|=s,po|=s)}function jl(n,s){if(!qt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function _e(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function Tb(n,s,a){var l=s.pendingProps;switch(xd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(s),null;case 1:return _e(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),hs(ze),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(eo(s)?ps(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kd())),_e(s),null;case 26:var f=s.type,d=s.memoizedState;return n===null?(ps(s),d!==null?(_e(s),Kv(s,d)):(_e(s),wm(s,f,null,l,a))):d?d!==n.memoizedState?(ps(s),_e(s),Kv(s,d)):(_e(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&ps(s),_e(s),wm(s,f,n,l,a)),null;case 27:if(Yn(s),a=rt.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ps(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return _e(s),null}n=ot.current,eo(s)?Ry(s):(n=eT(f,l,a),s.stateNode=n,ps(s))}return _e(s),null;case 5:if(Yn(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ps(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return _e(s),null}if(d=ot.current,eo(s))Ry(s);else{var y=Mh(rt.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(f,{is:l.is}):y.createElement(f)}}d[ke]=s,d[Ze]=l;t:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break t;for(;y.sibling===null;){if(y.return===null||y.return===s)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=d;t:switch(fn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&ps(s)}}return _e(s),wm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&ps(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=rt.current,eo(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=un,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[ke]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||HE(n.nodeValue,a)),n||Xs(s,!0)}else n=Mh(n).createTextNode(l),n[ke]=s,s.stateNode=n}return _e(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=eo(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[ke]=s}else na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_e(s),n=!1}else a=kd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Bn(s),s):(Bn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return _e(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=eo(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[ke]=s}else na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_e(s),f=!1}else f=kd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Bn(s),s):(Bn(s),null)}return Bn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),gh(s,s.updateQueue),_e(s),null);case 4:return ue(),n===null&&Km(s.stateNode.containerInfo),_e(s),null;case 10:return hs(s.type),_e(s),null;case 19:if(Y(Ne),l=s.memoizedState,l===null)return _e(s),null;if(f=(s.flags&128)!==0,d=l.rendering,d===null)if(f)jl(l,!1);else{if(Ce!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=sh(n),d!==null){for(s.flags|=128,jl(l,!1),n=d.updateQueue,s.updateQueue=n,gh(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Sy(a,n),a=a.sibling;return tt(Ne,Ne.current&1|2),qt&&us(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&ce()>Sh&&(s.flags|=128,f=!0,jl(l,!1),s.lanes=4194304)}else{if(!f)if(n=sh(d),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,gh(s,n),jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!qt)return _e(s),null}else 2*ce()-l.renderingStartTime>Sh&&a!==536870912&&(s.flags|=128,f=!0,jl(l,!1),s.lanes=4194304);l.isBackwards?(d.sibling=s.child,s.child=d):(n=l.last,n!==null?n.sibling=d:s.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=ce(),n.sibling=null,a=Ne.current,tt(Ne,f?a&1|2:a&1),qt&&us(s,l.treeForkCount),n):(_e(s),null);case 22:case 23:return Bn(s),Xd(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(_e(s),s.subtreeFlags&6&&(s.flags|=8192)):_e(s),a=s.updateQueue,a!==null&&gh(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&Y(ra),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),hs(ze),_e(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Sb(n,s){switch(xd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return hs(ze),ue(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Yn(s),null;case 31:if(s.memoizedState!==null){if(Bn(s),s.alternate===null)throw Error(r(340));na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Bn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Y(Ne),null;case 4:return ue(),null;case 10:return hs(s.type),null;case 22:case 23:return Bn(s),Xd(),n!==null&&Y(ra),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return hs(ze),null;case 25:return null;default:return null}}function Xv(n,s){switch(xd(s),s.tag){case 3:hs(ze),ue();break;case 26:case 27:case 5:Yn(s);break;case 4:ue();break;case 31:s.memoizedState!==null&&Bn(s);break;case 13:Bn(s);break;case 19:Y(Ne);break;case 10:hs(s.type);break;case 22:case 23:Bn(s),Xd(),n!==null&&Y(ra);break;case 24:hs(ze)}}function Hl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==f)}}catch(A){ee(s,s.return,A)}}function nr(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var y=l.inst,A=y.destroy;if(A!==void 0){y.destroy=void 0,f=s;var R=a,z=A;try{z()}catch(G){ee(f,R,G)}}}l=l.next}while(l!==d)}}catch(G){ee(s,s.return,G)}}function Wv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{By(s,a)}catch(l){ee(n,n.return,l)}}}function Zv(n,s,a){a.props=ca(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ee(n,s,l)}}function Gl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){ee(n,s,f)}}function Qi(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ee(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ee(n,s,f)}else a.current=null}function Jv(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ee(n,n.return,f)}}function Rm(n,s,a){try{var l=n.stateNode;Hb(l,n.type,a,s),l[Ze]=s}catch(f){ee(n,n.return,f)}}function $v(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ur(n.type)||n.tag===4}function Im(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||$v(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ur(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nm(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=mi));else if(l!==4&&(l===27&&ur(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Nm(n,s,a),n=n.sibling;n!==null;)Nm(n,s,a),n=n.sibling}function yh(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&ur(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(yh(n,s,a),n=n.sibling;n!==null;)yh(n,s,a),n=n.sibling}function tE(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);fn(s,l,a),s[ke]=n,s[Ze]=a}catch(d){ee(n,n.return,d)}}var _s=!1,Fe=!1,Dm=!1,eE=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Ab(n,s){if(n=n.containerInfo,Zm=zh,n=dy(n),Ad(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var y=0,A=-1,R=-1,z=0,G=0,X=n,B=null;e:for(;;){for(var j;X!==a||f!==0&&X.nodeType!==3||(A=y+f),X!==d||l!==0&&X.nodeType!==3||(R=y+l),X.nodeType===3&&(y+=X.nodeValue.length),(j=X.firstChild)!==null;)B=X,X=j;for(;;){if(X===n)break e;if(B===a&&++z===f&&(A=y),B===d&&++G===l&&(R=y),(j=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=j}a=A===-1||R===-1?null:{start:A,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jm={focusedElem:n,selectionRange:a},zh=!1,$e=s;$e!==null;)if(s=$e,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,$e=n;else for(;$e!==null;){switch(s=$e,d=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=s,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ut=ca(a.type,f);n=l.getSnapshotBeforeUpdate(ut,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(vt){ee(a,a.return,vt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)ep(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ep(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,$e=n;break}$e=s.return}}function nE(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ys(n,a),l&4&&Hl(5,a);break;case 1:if(ys(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(y){ee(a,a.return,y)}else{var f=ca(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(y){ee(a,a.return,y)}}l&64&&Wv(a),l&512&&Gl(a,a.return);break;case 3:if(ys(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{By(n,s)}catch(y){ee(a,a.return,y)}}break;case 27:s===null&&l&4&&tE(a);case 26:case 5:ys(n,a),s===null&&l&4&&Jv(a),l&512&&Gl(a,a.return);break;case 12:ys(n,a);break;case 31:ys(n,a),l&4&&rE(n,a);break;case 13:ys(n,a),l&4&&aE(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Mb.bind(null,a),Jb(n,a))));break;case 22:if(l=a.memoizedState!==null||_s,!l){s=s!==null&&s.memoizedState!==null||Fe,f=_s;var d=Fe;_s=l,(Fe=s)&&!d?vs(n,a,(a.subtreeFlags&8772)!==0):ys(n,a),_s=f,Fe=d}break;case 30:break;default:ys(n,a)}}function iE(n){var s=n.alternate;s!==null&&(n.alternate=null,iE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ua(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ee=null,bn=!1;function gs(n,s,a){for(a=a.child;a!==null;)sE(n,s,a),a=a.sibling}function sE(n,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(ci,a)}catch{}switch(a.tag){case 26:Fe||Qi(a,s),gs(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Fe||Qi(a,s);var l=Ee,f=bn;ur(a.type)&&(Ee=a.stateNode,bn=!1),gs(n,s,a),tu(a.stateNode),Ee=l,bn=f;break;case 5:Fe||Qi(a,s);case 6:if(l=Ee,f=bn,Ee=null,gs(n,s,a),Ee=l,bn=f,Ee!==null)if(bn)try{(Ee.nodeType===9?Ee.body:Ee.nodeName==="HTML"?Ee.ownerDocument.body:Ee).removeChild(a.stateNode)}catch(d){ee(a,s,d)}else try{Ee.removeChild(a.stateNode)}catch(d){ee(a,s,d)}break;case 18:Ee!==null&&(bn?(n=Ee,WE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Ao(n)):WE(Ee,a.stateNode));break;case 4:l=Ee,f=bn,Ee=a.stateNode.containerInfo,bn=!0,gs(n,s,a),Ee=l,bn=f;break;case 0:case 11:case 14:case 15:nr(2,a,s),Fe||nr(4,a,s),gs(n,s,a);break;case 1:Fe||(Qi(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Zv(a,s,l)),gs(n,s,a);break;case 21:gs(n,s,a);break;case 22:Fe=(l=Fe)||a.memoizedState!==null,gs(n,s,a),Fe=l;break;default:gs(n,s,a)}}function rE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ao(n)}catch(a){ee(s,s.return,a)}}}function aE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(a){ee(s,s.return,a)}}function Cb(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new eE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new eE),s;default:throw Error(r(435,n.tag))}}function vh(n,s){var a=Cb(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=Vb.bind(null,n,l);l.then(f,f)}})}function wn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,y=s,A=y;t:for(;A!==null;){switch(A.tag){case 27:if(ur(A.type)){Ee=A.stateNode,bn=!1;break t}break;case 5:Ee=A.stateNode,bn=!1;break t;case 3:case 4:Ee=A.stateNode.containerInfo,bn=!0;break t}A=A.return}if(Ee===null)throw Error(r(160));sE(d,y,f),Ee=null,bn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)oE(s,n),s=s.sibling}var Ei=null;function oE(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:wn(s,n),Rn(n),l&4&&(nr(3,n,n.return),Hl(3,n),nr(5,n,n.return));break;case 1:wn(s,n),Rn(n),l&512&&(Fe||a===null||Qi(a,a.return)),l&64&&_s&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Ei;if(wn(s,n),Rn(n),l&512&&(Fe||a===null||Qi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Mi]||d[ke]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),fn(d,l,a),d[ke]=n,Pe(d),l=d;break t;case"link":var y=oT("link","href",f).get(l+(a.href||""));if(y){for(var A=0;A<y.length;A++)if(d=y[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(A,1);break e}}d=f.createElement(l),fn(d,l,a),f.head.appendChild(d);break;case"meta":if(y=oT("meta","content",f).get(l+(a.content||""))){for(A=0;A<y.length;A++)if(d=y[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(A,1);break e}}d=f.createElement(l),fn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[ke]=n,Pe(d),l=d}n.stateNode=l}else lT(f,n.type,n.stateNode);else n.stateNode=aT(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?lT(f,n.type,n.stateNode):aT(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Rm(n,n.memoizedProps,a.memoizedProps)}break;case 27:wn(s,n),Rn(n),l&512&&(Fe||a===null||Qi(a,a.return)),a!==null&&l&4&&Rm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(wn(s,n),Rn(n),l&512&&(Fe||a===null||Qi(a,a.return)),n.flags&32){f=n.stateNode;try{Cn(f,"")}catch(ut){ee(n,n.return,ut)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Rm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Dm=!0);break;case 6:if(wn(s,n),Rn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ut){ee(n,n.return,ut)}}break;case 3:if(Lh=null,f=Ei,Ei=Vh(s.containerInfo),wn(s,n),Ei=f,Rn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ao(s.containerInfo)}catch(ut){ee(n,n.return,ut)}Dm&&(Dm=!1,lE(n));break;case 4:l=Ei,Ei=Vh(n.stateNode.containerInfo),wn(s,n),Rn(n),Ei=l;break;case 12:wn(s,n),Rn(n);break;case 31:wn(s,n),Rn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,vh(n,l)));break;case 13:wn(s,n),Rn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Th=ce()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,vh(n,l)));break;case 22:f=n.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,z=_s,G=Fe;if(_s=z||f,Fe=G||R,wn(s,n),Fe=G,_s=z,Rn(n),l&8192)t:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||R||_s||Fe||ha(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){R=a=s;try{if(d=R.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{A=R.stateNode;var X=R.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;A.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ut){ee(R,R.return,ut)}}}else if(s.tag===6){if(a===null){R=s;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(ut){ee(R,R.return,ut)}}}else if(s.tag===18){if(a===null){R=s;try{var j=R.stateNode;f?ZE(j,!0):ZE(R.stateNode,!1)}catch(ut){ee(R,R.return,ut)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,vh(n,a))));break;case 19:wn(s,n),Rn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,vh(n,l)));break;case 30:break;case 21:break;default:wn(s,n),Rn(n)}}function Rn(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if($v(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Im(n);yh(n,d,f);break;case 5:var y=a.stateNode;a.flags&32&&(Cn(y,""),a.flags&=-33);var A=Im(n);yh(n,A,y);break;case 3:case 4:var R=a.stateNode.containerInfo,z=Im(n);Nm(n,z,R);break;default:throw Error(r(161))}}catch(G){ee(n,n.return,G)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function lE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;lE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ys(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)nE(n,s.alternate,s),s=s.sibling}function ha(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:nr(4,s,s.return),ha(s);break;case 1:Qi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Zv(s,s.return,a),ha(s);break;case 27:tu(s.stateNode);case 26:case 5:Qi(s,s.return),ha(s);break;case 22:s.memoizedState===null&&ha(s);break;case 30:ha(s);break;default:ha(s)}n=n.sibling}}function vs(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,d=s,y=d.flags;switch(d.tag){case 0:case 11:case 15:vs(f,d,a),Hl(4,d);break;case 1:if(vs(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){ee(l,l.return,z)}if(l=d,f=l.updateQueue,f!==null){var A=l.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)zy(R[f],A)}catch(z){ee(l,l.return,z)}}a&&y&64&&Wv(d),Gl(d,d.return);break;case 27:tE(d);case 26:case 5:vs(f,d,a),a&&l===null&&y&4&&Jv(d),Gl(d,d.return);break;case 12:vs(f,d,a);break;case 31:vs(f,d,a),a&&y&4&&rE(f,d);break;case 13:vs(f,d,a),a&&y&4&&aE(f,d);break;case 22:d.memoizedState===null&&vs(f,d,a),Gl(d,d.return);break;case 30:break;default:vs(f,d,a)}s=s.sibling}}function Om(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ol(a))}function Mm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ol(n))}function Ti(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)uE(n,s,a,l),s=s.sibling}function uE(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ti(n,s,a,l),f&2048&&Hl(9,s);break;case 1:Ti(n,s,a,l);break;case 3:Ti(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ol(n)));break;case 12:if(f&2048){Ti(n,s,a,l),n=s.stateNode;try{var d=s.memoizedProps,y=d.id,A=d.onPostCommit;typeof A=="function"&&A(y,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){ee(s,s.return,R)}}else Ti(n,s,a,l);break;case 31:Ti(n,s,a,l);break;case 13:Ti(n,s,a,l);break;case 23:break;case 22:d=s.stateNode,y=s.alternate,s.memoizedState!==null?d._visibility&2?Ti(n,s,a,l):Ql(n,s):d._visibility&2?Ti(n,s,a,l):(d._visibility|=2,ho(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Om(y,s);break;case 24:Ti(n,s,a,l),f&2048&&Mm(s.alternate,s);break;default:Ti(n,s,a,l)}}function ho(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=n,y=s,A=a,R=l,z=y.flags;switch(y.tag){case 0:case 11:case 15:ho(d,y,A,R,f),Hl(8,y);break;case 23:break;case 22:var G=y.stateNode;y.memoizedState!==null?G._visibility&2?ho(d,y,A,R,f):Ql(d,y):(G._visibility|=2,ho(d,y,A,R,f)),f&&z&2048&&Om(y.alternate,y);break;case 24:ho(d,y,A,R,f),f&&z&2048&&Mm(y.alternate,y);break;default:ho(d,y,A,R,f)}s=s.sibling}}function Ql(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:Ql(a,l),f&2048&&Om(l.alternate,l);break;case 24:Ql(a,l),f&2048&&Mm(l.alternate,l);break;default:Ql(a,l)}s=s.sibling}}var Yl=8192;function fo(n,s,a){if(n.subtreeFlags&Yl)for(n=n.child;n!==null;)cE(n,s,a),n=n.sibling}function cE(n,s,a){switch(n.tag){case 26:fo(n,s,a),n.flags&Yl&&n.memoizedState!==null&&cw(a,Ei,n.memoizedState,n.memoizedProps);break;case 5:fo(n,s,a);break;case 3:case 4:var l=Ei;Ei=Vh(n.stateNode.containerInfo),fo(n,s,a),Ei=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Yl,Yl=16777216,fo(n,s,a),Yl=l):fo(n,s,a));break;default:fo(n,s,a)}}function hE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Kl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];$e=l,dE(l,n)}hE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)fE(n),n=n.sibling}function fE(n){switch(n.tag){case 0:case 11:case 15:Kl(n),n.flags&2048&&nr(9,n,n.return);break;case 3:Kl(n);break;case 12:Kl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Eh(n)):Kl(n);break;default:Kl(n)}}function Eh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];$e=l,dE(l,n)}hE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:nr(8,s,s.return),Eh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Eh(s));break;default:Eh(s)}n=n.sibling}}function dE(n,s){for(;$e!==null;){var a=$e;switch(a.tag){case 0:case 11:case 15:nr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$e=l;else t:for(a=n;$e!==null;){l=$e;var f=l.sibling,d=l.return;if(iE(l),l===a){$e=null;break t}if(f!==null){f.return=d,$e=f;break t}$e=d}}}var bb={getCacheForType:function(n){var s=cn(ze),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return cn(ze).controller.signal}},wb=typeof WeakMap=="function"?WeakMap:Map,Zt=0,he=null,xt=null,Pt=0,te=0,qn=null,ir=!1,mo=!1,Vm=!1,Es=0,Ce=0,sr=0,fa=0,xm=0,Fn=0,po=0,Xl=null,In=null,Lm=!1,Th=0,mE=0,Sh=1/0,Ah=null,rr=null,Xe=0,ar=null,_o=null,Ts=0,km=0,Pm=null,pE=null,Wl=0,Um=null;function jn(){return(Zt&2)!==0&&Pt!==0?Pt&-Pt:H.T!==null?Hm():Cc()}function _E(){if(Fn===0)if((Pt&536870912)===0||qt){var n=zr;zr<<=1,(zr&3932160)===0&&(zr=262144),Fn=n}else Fn=536870912;return n=zn.current,n!==null&&(n.flags|=32),Fn}function Nn(n,s,a){(n===he&&(te===2||te===9)||n.cancelPendingCommit!==null)&&(go(n,0),or(n,Pt,Fn,!1)),Br(n,a),((Zt&2)===0||n!==he)&&(n===he&&((Zt&2)===0&&(fa|=a),Ce===4&&or(n,Pt,Fn,!1)),Yi(n))}function gE(n,s,a){if((Zt&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||hi(n,s),f=l?Nb(n,s):Bm(n,s,!0),d=l;do{if(f===0){mo&&!l&&or(n,s,0,!1);break}else{if(a=n.current.alternate,d&&!Rb(a)){f=Bm(n,s,!1),d=!1;continue}if(f===2){if(d=s,n.errorRecoveryDisabledLanes&d)var y=0;else y=n.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;t:{var A=n;f=Xl;var R=A.current.memoizedState.isDehydrated;if(R&&(go(A,y).flags|=256),y=Bm(A,y,!1),y!==2){if(Vm&&!R){A.errorRecoveryDisabledLanes|=d,fa|=d,f=4;break t}d=In,In=f,d!==null&&(In===null?In=d:In.push.apply(In,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){go(n,0),or(n,s,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:or(l,s,Fn,!ir);break t;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Th+300-ce(),10<f)){if(or(l,s,Fn,!ir),Ni(l,0,!0)!==0)break t;Ts=s,l.timeoutHandle=KE(yE.bind(null,l,a,In,Ah,Lm,s,Fn,fa,po,ir,d,"Throttled",-0,0),f);break t}yE(l,a,In,Ah,Lm,s,Fn,fa,po,ir,d,null,-0,0)}}break}while(!0);Yi(n)}function yE(n,s,a,l,f,d,y,A,R,z,G,X,B,j){if(n.timeoutHandle=-1,X=s.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mi},cE(s,d,X);var ut=(d&62914560)===d?Th-ce():(d&4194048)===d?mE-ce():0;if(ut=hw(X,ut),ut!==null){Ts=d,n.cancelPendingCommit=ut(wE.bind(null,n,s,d,a,l,f,y,A,R,G,X,null,B,j)),or(n,d,y,!z);return}}wE(n,s,d,a,l,f,y,A,R)}function Rb(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Pn(d(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function or(n,s,a,l){s&=~xm,s&=~fa,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var d=31-Re(f),y=1<<d;l[d]=-1,f&=~y}a!==0&&qr(n,a,s)}function Ch(){return(Zt&6)===0?(Zl(0),!1):!0}function zm(){if(xt!==null){if(te===0)var n=xt.return;else n=xt,cs=ia=null,em(n),ao=null,Vl=0,n=xt;for(;n!==null;)Xv(n.alternate,n),n=n.return;xt=null}}function go(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Yb(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Ts=0,zm(),he=n,xt=a=ls(n.current,null),Pt=s,te=0,qn=null,ir=!1,mo=hi(n,s),Vm=!1,po=Fn=xm=fa=sr=Ce=0,In=Xl=null,Lm=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-Re(l),d=1<<f;s|=n[f],l&=~d}return Es=s,Gc(),a}function vE(n,s){wt=null,H.H=ql,s===ro||s===$c?(s=Ly(),te=3):s===jd?(s=Ly(),te=4):te=s===gm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,qn=s,xt===null&&(Ce=1,dh(n,ei(s,n.current)))}function EE(){var n=zn.current;return n===null?!0:(Pt&4194048)===Pt?ri===null:(Pt&62914560)===Pt||(Pt&536870912)!==0?n===ri:!1}function TE(){var n=H.H;return H.H=ql,n===null?ql:n}function SE(){var n=H.A;return H.A=bb,n}function bh(){Ce=4,ir||(Pt&4194048)!==Pt&&zn.current!==null||(mo=!0),(sr&134217727)===0&&(fa&134217727)===0||he===null||or(he,Pt,Fn,!1)}function Bm(n,s,a){var l=Zt;Zt|=2;var f=TE(),d=SE();(he!==n||Pt!==s)&&(Ah=null,go(n,s)),s=!1;var y=Ce;t:do try{if(te!==0&&xt!==null){var A=xt,R=qn;switch(te){case 8:zm(),y=6;break t;case 3:case 2:case 9:case 6:zn.current===null&&(s=!0);var z=te;if(te=0,qn=null,yo(n,A,R,z),a&&mo){y=0;break t}break;default:z=te,te=0,qn=null,yo(n,A,R,z)}}Ib(),y=Ce;break}catch(G){vE(n,G)}while(!0);return s&&n.shellSuspendCounter++,cs=ia=null,Zt=l,H.H=f,H.A=d,xt===null&&(he=null,Pt=0,Gc()),y}function Ib(){for(;xt!==null;)AE(xt)}function Nb(n,s){var a=Zt;Zt|=2;var l=TE(),f=SE();he!==n||Pt!==s?(Ah=null,Sh=ce()+500,go(n,s)):mo=hi(n,s);t:do try{if(te!==0&&xt!==null){s=xt;var d=qn;e:switch(te){case 1:te=0,qn=null,yo(n,s,d,1);break;case 2:case 9:if(Vy(d)){te=0,qn=null,CE(s);break}s=function(){te!==2&&te!==9||he!==n||(te=7),Yi(n)},d.then(s,s);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:Vy(d)?(te=0,qn=null,CE(s)):(te=0,qn=null,yo(n,s,d,7));break;case 5:var y=null;switch(xt.tag){case 26:y=xt.memoizedState;case 5:case 27:var A=xt;if(y?uT(y):A.stateNode.complete){te=0,qn=null;var R=A.sibling;if(R!==null)xt=R;else{var z=A.return;z!==null?(xt=z,wh(z)):xt=null}break e}}te=0,qn=null,yo(n,s,d,5);break;case 6:te=0,qn=null,yo(n,s,d,6);break;case 8:zm(),Ce=6;break t;default:throw Error(r(462))}}Db();break}catch(G){vE(n,G)}while(!0);return cs=ia=null,H.H=l,H.A=f,Zt=a,xt!==null?0:(he=null,Pt=0,Gc(),Ce)}function Db(){for(;xt!==null&&!xe();)AE(xt)}function AE(n){var s=Yv(n.alternate,n,Es);n.memoizedProps=n.pendingProps,s===null?wh(n):xt=s}function CE(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=qv(a,s,s.pendingProps,s.type,void 0,Pt);break;case 11:s=qv(a,s,s.pendingProps,s.type.render,s.ref,Pt);break;case 5:em(s);default:Xv(a,s),s=xt=Sy(s,Es),s=Yv(a,s,Es)}n.memoizedProps=n.pendingProps,s===null?wh(n):xt=s}function yo(n,s,a,l){cs=ia=null,em(s),ao=null,Vl=0;var f=s.return;try{if(yb(n,f,s,a,Pt)){Ce=1,dh(n,ei(a,n.current)),xt=null;return}}catch(d){if(f!==null)throw xt=f,d;Ce=1,dh(n,ei(a,n.current)),xt=null;return}s.flags&32768?(qt||l===1?n=!0:mo||(Pt&536870912)!==0?n=!1:(ir=n=!0,(l===2||l===9||l===3||l===6)&&(l=zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),bE(s,n)):wh(s)}function wh(n){var s=n;do{if((s.flags&32768)!==0){bE(s,ir);return}n=s.return;var a=Tb(s.alternate,s,Es);if(a!==null){xt=a;return}if(s=s.sibling,s!==null){xt=s;return}xt=s=n}while(s!==null);Ce===0&&(Ce=5)}function bE(n,s){do{var a=Sb(n.alternate,n);if(a!==null){a.flags&=32767,xt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){xt=n;return}xt=n=a}while(n!==null);Ce=6,xt=null}function wE(n,s,a,l,f,d,y,A,R){n.cancelPendingCommit=null;do Rh();while(Xe!==0);if((Zt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=Id,vd(n,a,d,y,A,R),n===he&&(xt=he=null,Pt=0),_o=s,ar=n,Ts=a,km=d,Pm=f,pE=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,xb(Ps,function(){return OE(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,f=it.p,it.p=2,y=Zt,Zt|=4;try{Ab(n,s,a)}finally{Zt=y,it.p=f,H.T=l}}Xe=1,RE(),IE(),NE()}}function RE(){if(Xe===1){Xe=0;var n=ar,s=_o,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=it.p;it.p=2;var f=Zt;Zt|=4;try{oE(s,n);var d=Jm,y=dy(n.containerInfo),A=d.focusedElem,R=d.selectionRange;if(y!==A&&A&&A.ownerDocument&&fy(A.ownerDocument.documentElement,A)){if(R!==null&&Ad(A)){var z=R.start,G=R.end;if(G===void 0&&(G=z),"selectionStart"in A)A.selectionStart=z,A.selectionEnd=Math.min(G,A.value.length);else{var X=A.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var j=B.getSelection(),ut=A.textContent.length,vt=Math.min(R.start,ut),ae=R.end===void 0?vt:Math.min(R.end,ut);!j.extend&&vt>ae&&(y=ae,ae=vt,vt=y);var L=hy(A,vt),O=hy(A,ae);if(L&&O&&(j.rangeCount!==1||j.anchorNode!==L.node||j.anchorOffset!==L.offset||j.focusNode!==O.node||j.focusOffset!==O.offset)){var U=X.createRange();U.setStart(L.node,L.offset),j.removeAllRanges(),vt>ae?(j.addRange(U),j.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),j.addRange(U))}}}}for(X=[],j=A;j=j.parentNode;)j.nodeType===1&&X.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<X.length;A++){var K=X[A];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}zh=!!Zm,Jm=Zm=null}finally{Zt=f,it.p=l,H.T=a}}n.current=s,Xe=2}}function IE(){if(Xe===2){Xe=0;var n=ar,s=_o,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=it.p;it.p=2;var f=Zt;Zt|=4;try{nE(n,s.alternate,s)}finally{Zt=f,it.p=l,H.T=a}}Xe=3}}function NE(){if(Xe===4||Xe===3){Xe=0,Se();var n=ar,s=_o,a=Ts,l=pE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Xe=5:(Xe=0,_o=ar=null,DE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(rr=null),ss(a),s=s.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(ci,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=H.T,f=it.p,it.p=2,H.T=null;try{for(var d=n.onRecoverableError,y=0;y<l.length;y++){var A=l[y];d(A.value,{componentStack:A.stack})}}finally{H.T=s,it.p=f}}(Ts&3)!==0&&Rh(),Yi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Um?Wl++:(Wl=0,Um=n):Wl=0,Zl(0)}}function DE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ol(s)))}function Rh(){return RE(),IE(),NE(),OE()}function OE(){if(Xe!==5)return!1;var n=ar,s=km;km=0;var a=ss(Ts),l=H.T,f=it.p;try{it.p=32>a?32:a,H.T=null,a=Pm,Pm=null;var d=ar,y=Ts;if(Xe=0,_o=ar=null,Ts=0,(Zt&6)!==0)throw Error(r(331));var A=Zt;if(Zt|=4,fE(d.current),uE(d,d.current,y,a),Zt=A,Zl(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(ci,d)}catch{}return!0}finally{it.p=f,H.T=l,DE(n,s)}}function ME(n,s,a){s=ei(a,s),s=_m(n.stateNode,s,2),n=$s(n,s,2),n!==null&&(Br(n,2),Yi(n))}function ee(n,s,a){if(n.tag===3)ME(n,n,a);else for(;s!==null;){if(s.tag===3){ME(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(rr===null||!rr.has(l))){n=ei(a,n),a=Vv(2),l=$s(s,a,2),l!==null&&(xv(a,l,s,n),Br(l,2),Yi(l));break}}s=s.return}}function qm(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new wb;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(Vm=!0,f.add(a),n=Ob.bind(null,n,s,a),s.then(n,n))}function Ob(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,he===n&&(Pt&a)===a&&(Ce===4||Ce===3&&(Pt&62914560)===Pt&&300>ce()-Th?(Zt&2)===0&&go(n,0):xm|=a,po===Pt&&(po=0)),Yi(n)}function VE(n,s){s===0&&(s=Ac()),n=ta(n,s),n!==null&&(Br(n,s),Yi(n))}function Mb(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),VE(n,a)}function Vb(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),VE(n,a)}function xb(n,s){return ft(n,s)}var Ih=null,vo=null,Fm=!1,Nh=!1,jm=!1,lr=0;function Yi(n){n!==vo&&n.next===null&&(vo===null?Ih=vo=n:vo=vo.next=n),Nh=!0,Fm||(Fm=!0,kb())}function Zl(n,s){if(!jm&&Nh){jm=!0;do for(var a=!1,l=Ih;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var y=l.suspendedLanes,A=l.pingedLanes;d=(1<<31-Re(42|n)+1)-1,d&=f&~(y&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,PE(l,d))}else d=Pt,d=Ni(l,l===he?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||hi(l,d)||(a=!0,PE(l,d));l=l.next}while(a);jm=!1}}function Lb(){xE()}function xE(){Nh=Fm=!1;var n=0;lr!==0&&Qb()&&(n=lr);for(var s=ce(),a=null,l=Ih;l!==null;){var f=l.next,d=LE(l,s);d===0?(l.next=null,a===null?Ih=f:a.next=f,f===null&&(vo=a)):(a=l,(n!==0||(d&3)!==0)&&(Nh=!0)),l=f}Xe!==0&&Xe!==5||Zl(n),lr!==0&&(lr=0)}function LE(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var y=31-Re(d),A=1<<y,R=f[y];R===-1?((A&a)===0||(A&l)!==0)&&(f[y]=yd(A,s)):R<=s&&(n.expiredLanes|=A),d&=~A}if(s=he,a=Pt,a=Ni(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(te===2||te===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Yt(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||hi(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Yt(l),ss(a)){case 2:case 8:a=ol;break;case 32:a=Ps;break;case 268435456:a=yc;break;default:a=Ps}return l=kE.bind(null,n),a=ft(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Yt(l),n.callbackPriority=2,n.callbackNode=null,2}function kE(n,s){if(Xe!==0&&Xe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Rh()&&n.callbackNode!==a)return null;var l=Pt;return l=Ni(n,n===he?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(gE(n,l,s),LE(n,ce()),n.callbackNode!=null&&n.callbackNode===a?kE.bind(null,n):null)}function PE(n,s){if(Rh())return null;gE(n,s,!0)}function kb(){Kb(function(){(Zt&6)!==0?ft(ks,Lb):xE()})}function Hm(){if(lr===0){var n=io;n===0&&(n=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),lr=n}return lr}function UE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Fa(""+n)}function zE(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function Pb(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var d=UE((f[Ze]||null).action),y=l.submitter;y&&(s=(s=y[Ze]||null)?UE(s.formAction):y.getAttribute("formAction"),s!==null&&(d=s,y=null));var A=new Bi("action","action",null,l,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(lr!==0){var R=y?zE(f,y):new FormData(f);cm(a,{pending:!0,data:R,method:f.method,action:d},null,R)}}else typeof d=="function"&&(A.preventDefault(),R=y?zE(f,y):new FormData(f),cm(a,{pending:!0,data:R,method:f.method,action:d},d,R))},currentTarget:f}]})}}for(var Gm=0;Gm<Rd.length;Gm++){var Qm=Rd[Gm],Ub=Qm.toLowerCase(),zb=Qm[0].toUpperCase()+Qm.slice(1);vi(Ub,"on"+zb)}vi(_y,"onAnimationEnd"),vi(gy,"onAnimationIteration"),vi(yy,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(eb,"onTransitionRun"),vi(nb,"onTransitionStart"),vi(ib,"onTransitionCancel"),vi(vy,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function BE(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var y=l.length-1;0<=y;y--){var A=l[y],R=A.instance,z=A.currentTarget;if(A=A.listener,R!==d&&f.isPropagationStopped())break t;d=A,f.currentTarget=z;try{d(f)}catch(G){Hc(G)}f.currentTarget=null,d=R}else for(y=0;y<l.length;y++){if(A=l[y],R=A.instance,z=A.currentTarget,A=A.listener,R!==d&&f.isPropagationStopped())break t;d=A,f.currentTarget=z;try{d(f)}catch(G){Hc(G)}f.currentTarget=null,d=R}}}}function Lt(n,s){var a=s[Pa];a===void 0&&(a=s[Pa]=new Set);var l=n+"__bubble";a.has(l)||(qE(s,n,2,!1),a.add(l))}function Ym(n,s,a){var l=0;s&&(l|=4),qE(a,n,l,s)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function Km(n){if(!n[Dh]){n[Dh]=!0,cl.forEach(function(a){a!=="selectionchange"&&(Bb.has(a)||Ym(a,!1,n),Ym(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Dh]||(s[Dh]=!0,Ym("selectionchange",!1,s))}}function qE(n,s,a,l){switch(_T(s)){case 2:var f=mw;break;case 8:f=pw;break;default:f=up}a=f.bind(null,s,a,n),f=void 0,!Qr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Xm(n,s,a,l,f){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var A=l.stateNode.containerInfo;if(A===f)break;if(y===4)for(y=l.return;y!==null;){var R=y.tag;if((R===3||R===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;A!==null;){if(y=Vi(A),y===null)return;if(R=y.tag,R===5||R===6||R===26||R===27){l=d=y;continue t}A=A.parentNode}}l=l.return}js(function(){var z=d,G=Zn(a),X=[];t:{var B=Ey.get(n);if(B!==void 0){var j=Bi,ut=n;switch(n){case"keypress":if(Kr(a)===0)break t;case"keydown":case"keyup":j=qc;break;case"focusin":ut="focus",j=Wr;break;case"focusout":ut="blur",j=Wr;break;case"beforeblur":case"afterblur":j=Wr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=g;break;case _y:case gy:case yy:j=xc;break;case vy:j=C;break;case"scroll":case"scrollend":j=Sl;break;case"wheel":j=q;break;case"copy":case"cut":case"paste":j=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=os;break;case"toggle":case"beforetoggle":j=bt}var vt=(s&4)!==0,ae=!vt&&(n==="scroll"||n==="scrollend"),L=vt?B!==null?B+"Capture":null:B;vt=[];for(var O=z,U;O!==null;){var K=O;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||L===null||(K=pi(O,L),K!=null&&vt.push($l(O,K,U))),ae)break;O=O.return}0<vt.length&&(B=new j(B,ut,null,a,G),X.push({event:B,listeners:vt}))}}if((s&7)===0){t:{if(B=n==="mouseover"||n==="pointerover",j=n==="mouseout"||n==="pointerout",B&&a!==vl&&(ut=a.relatedTarget||a.fromElement)&&(Vi(ut)||ut[Oi]))break t;if((j||B)&&(B=G.window===G?G:(B=G.ownerDocument)?B.defaultView||B.parentWindow:window,j?(ut=a.relatedTarget||a.toElement,j=z,ut=ut?Vi(ut):null,ut!==null&&(ae=u(ut),vt=ut.tag,ut!==ae||vt!==5&&vt!==27&&vt!==6)&&(ut=null)):(j=null,ut=z),j!==ut)){if(vt=Al,K="onMouseLeave",L="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(vt=os,K="onPointerLeave",L="onPointerEnter",O="pointer"),ae=j==null?B:Ln(j),U=ut==null?B:Ln(ut),B=new vt(K,O+"leave",j,a,G),B.target=ae,B.relatedTarget=U,K=null,Vi(G)===z&&(vt=new vt(L,O+"enter",ut,a,G),vt.target=U,vt.relatedTarget=ae,K=vt),ae=K,j&&ut)e:{for(vt=qb,L=j,O=ut,U=0,K=L;K;K=vt(K))U++;K=0;for(var _t=O;_t;_t=vt(_t))K++;for(;0<U-K;)L=vt(L),U--;for(;0<K-U;)O=vt(O),K--;for(;U--;){if(L===O||O!==null&&L===O.alternate){vt=L;break e}L=vt(L),O=vt(O)}vt=null}else vt=null;j!==null&&FE(X,B,j,vt,!1),ut!==null&&ae!==null&&FE(X,ae,ut,vt,!0)}}t:{if(B=z?Ln(z):window,j=B.nodeName&&B.nodeName.toLowerCase(),j==="select"||j==="input"&&B.type==="file")var Kt=ry;else if(iy(B))if(ay)Kt=JC;else{Kt=WC;var ct=XC}else j=B.nodeName,!j||j.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&qa(z.elementType)&&(Kt=ry):Kt=ZC;if(Kt&&(Kt=Kt(n,z))){sy(X,Kt,a,G);break t}ct&&ct(n,B,z),n==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&_l(B,"number",B.value)}switch(ct=z?Ln(z):window,n){case"focusin":(iy(ct)||ct.contentEditable==="true")&&(Xa=ct,Cd=z,Il=null);break;case"focusout":Il=Cd=Xa=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,my(X,a,G);break;case"selectionchange":if(tb)break;case"keydown":case"keyup":my(X,a,G)}var Rt;if(Wt)t:{switch(n){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else Ka?Zr(n,a)&&(Ut="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ut="onCompositionStart");Ut&&(ji&&a.locale!=="ko"&&(Ka||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Ka&&(Rt=Tl()):(zi=G,El="value"in zi?zi.value:zi.textContent,Ka=!0)),ct=Oh(z,Ut),0<ct.length&&(Ut=new Fi(Ut,n,null,a,G),X.push({event:Ut,listeners:ct}),Rt?Ut.data=Rt:(Rt=Ya(a),Rt!==null&&(Ut.data=Rt)))),(Rt=$n?GC(n,a):QC(n,a))&&(Ut=Oh(z,"onBeforeInput"),0<Ut.length&&(ct=new Fi("onBeforeInput","beforeinput",null,a,G),X.push({event:ct,listeners:Ut}),ct.data=Rt)),Pb(X,n,z,a,G)}BE(X,s)})}function $l(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Oh(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=pi(n,a),f!=null&&l.unshift($l(n,f,d)),f=pi(n,s),f!=null&&l.push($l(n,f,d))),n.tag===3)return l;n=n.return}return[]}function qb(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function FE(n,s,a,l,f){for(var d=s._reactName,y=[];a!==null&&a!==l;){var A=a,R=A.alternate,z=A.stateNode;if(A=A.tag,R!==null&&R===l)break;A!==5&&A!==26&&A!==27||z===null||(R=z,f?(z=pi(a,d),z!=null&&y.unshift($l(a,z,R))):f||(z=pi(a,d),z!=null&&y.push($l(a,z,R)))),a=a.return}y.length!==0&&n.push({event:s,listeners:y})}var Fb=/\r\n?/g,jb=/\u0000|\uFFFD/g;function jE(n){return(typeof n=="string"?n:""+n).replace(Fb,`
`).replace(jb,"")}function HE(n,s){return s=jE(s),jE(n)===s}function re(n,s,a,l,f,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Cn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Cn(n,""+l);break;case"className":kn(n,"class",l);break;case"tabIndex":kn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(n,a,l);break;case"style":yl(n,l,d);break;case"data":if(s!=="object"){kn(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Fa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&re(n,s,"name",f.name,f,null),re(n,s,"formEncType",f.formEncType,f,null),re(n,s,"formMethod",f.formMethod,f,null),re(n,s,"formTarget",f.formTarget,f,null)):(re(n,s,"encType",f.encType,f,null),re(n,s,"method",f.method,f,null),re(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Fa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=mi);break;case"onScroll":l!=null&&Lt("scroll",n);break;case"onScrollEnd":l!=null&&Lt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Fa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Lt("beforetoggle",n),Lt("toggle",n),za(n,"popover",l);break;case"xlinkActuate":Ue(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ue(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ue(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ue(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ue(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ue(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":za(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oc.get(a)||a,za(n,a,l))}}function Wm(n,s,a,l,f,d){switch(a){case"style":yl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Cn(n,l):(typeof l=="number"||typeof l=="bigint")&&Cn(n,""+l);break;case"onScroll":l!=null&&Lt("scroll",n);break;case"onScrollEnd":l!=null&&Lt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),d=n[Ze]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(s,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):za(n,a,l)}}}function fn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",n),Lt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:re(n,s,d,y,a,null)}}f&&re(n,s,"srcSet",a.srcSet,a,null),l&&re(n,s,"src",a.src,a,null);return;case"input":Lt("invalid",n);var A=d=y=f=null,R=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":f=G;break;case"type":y=G;break;case"checked":R=G;break;case"defaultChecked":z=G;break;case"value":d=G;break;case"defaultValue":A=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:re(n,s,l,G,a,null)}}Ic(n,d,A,R,z,y,f,!1);return;case"select":Lt("invalid",n),l=y=d=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":d=A;break;case"defaultValue":y=A;break;case"multiple":l=A;default:re(n,s,f,A,a,null)}s=d,a=y,n.multiple=!!l,s!=null?zs(n,!!l,s,!1):a!=null&&zs(n,!!l,a,!0);return;case"textarea":Lt("invalid",n),d=f=l=null;for(y in a)if(a.hasOwnProperty(y)&&(A=a[y],A!=null))switch(y){case"value":l=A;break;case"defaultValue":f=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:re(n,s,y,A,a,null)}Bs(n,l,f,d);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:re(n,s,R,l,a,null)}return;case"dialog":Lt("beforetoggle",n),Lt("toggle",n),Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":Lt("load",n);break;case"video":case"audio":for(l=0;l<Jl.length;l++)Lt(Jl[l],n);break;case"image":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"embed":case"source":case"link":Lt("error",n),Lt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:re(n,s,z,l,a,null)}return;default:if(qa(s)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&Wm(n,s,G,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&re(n,s,A,l,a,null))}function Hb(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,A=null,R=null,z=null,G=null;for(j in a){var X=a[j];if(a.hasOwnProperty(j)&&X!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":R=X;default:l.hasOwnProperty(j)||re(n,s,j,null,l,X)}}for(var B in l){var j=l[B];if(X=a[B],l.hasOwnProperty(B)&&(j!=null||X!=null))switch(B){case"type":d=j;break;case"name":f=j;break;case"checked":z=j;break;case"defaultChecked":G=j;break;case"value":y=j;break;case"defaultValue":A=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,s));break;default:j!==X&&re(n,s,B,j,l,X)}}Ba(n,y,A,R,z,G,d,f);return;case"select":j=y=A=B=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":j=R;default:l.hasOwnProperty(d)||re(n,s,d,null,l,R)}for(f in l)if(d=l[f],R=a[f],l.hasOwnProperty(f)&&(d!=null||R!=null))switch(f){case"value":B=d;break;case"defaultValue":A=d;break;case"multiple":y=d;default:d!==R&&re(n,s,f,d,l,R)}s=A,a=y,l=j,B!=null?zs(n,!!a,B,!1):!!l!=!!a&&(s!=null?zs(n,!!a,s,!0):zs(n,!!a,a?[]:"",!1));return;case"textarea":j=B=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:re(n,s,A,null,l,f)}for(y in l)if(f=l[y],d=a[y],l.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":B=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&re(n,s,y,f,l,d)}Nc(n,B,j);return;case"option":for(var ut in a)if(B=a[ut],a.hasOwnProperty(ut)&&B!=null&&!l.hasOwnProperty(ut))switch(ut){case"selected":n.selected=!1;break;default:re(n,s,ut,null,l,B)}for(R in l)if(B=l[R],j=a[R],l.hasOwnProperty(R)&&B!==j&&(B!=null||j!=null))switch(R){case"selected":n.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:re(n,s,R,B,l,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in a)B=a[vt],a.hasOwnProperty(vt)&&B!=null&&!l.hasOwnProperty(vt)&&re(n,s,vt,null,l,B);for(z in l)if(B=l[z],j=a[z],l.hasOwnProperty(z)&&B!==j&&(B!=null||j!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,s));break;default:re(n,s,z,B,l,j)}return;default:if(qa(s)){for(var ae in a)B=a[ae],a.hasOwnProperty(ae)&&B!==void 0&&!l.hasOwnProperty(ae)&&Wm(n,s,ae,void 0,l,B);for(G in l)B=l[G],j=a[G],!l.hasOwnProperty(G)||B===j||B===void 0&&j===void 0||Wm(n,s,G,B,l,j);return}}for(var L in a)B=a[L],a.hasOwnProperty(L)&&B!=null&&!l.hasOwnProperty(L)&&re(n,s,L,null,l,B);for(X in l)B=l[X],j=a[X],!l.hasOwnProperty(X)||B===j||B==null&&j==null||re(n,s,X,B,l,j)}function GE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gb(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,y=f.initiatorType,A=f.duration;if(d&&A&&GE(y)){for(y=0,A=f.responseEnd,l+=1;l<a.length;l++){var R=a[l],z=R.startTime;if(z>A)break;var G=R.transferSize,X=R.initiatorType;G&&GE(X)&&(R=R.responseEnd,y+=G*(R<A?1:(A-z)/(R-z)))}if(--l,s+=8*(d+y)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Zm=null,Jm=null;function Mh(n){return n.nodeType===9?n:n.ownerDocument}function QE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YE(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function $m(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var tp=null;function Qb(){var n=window.event;return n&&n.type==="popstate"?n===tp?!1:(tp=n,!0):(tp=null,!1)}var KE=typeof setTimeout=="function"?setTimeout:void 0,Yb=typeof clearTimeout=="function"?clearTimeout:void 0,XE=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof XE<"u"?function(n){return XE.resolve(null).then(n).catch(Xb)}:KE;function Xb(n){setTimeout(function(){throw n})}function ur(n){return n==="head"}function WE(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Ao(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")tu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,tu(a);for(var d=a.firstChild;d;){var y=d.nextSibling,A=d.nodeName;d[Mi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&tu(n.ownerDocument.body);a=f}while(a);Ao(s)}function ZE(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function ep(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ep(a),Ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Wb(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Mi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ai(n.nextSibling),n===null)break}return null}function Zb(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ai(n.nextSibling),n===null))return null;return n}function JE(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ai(n.nextSibling),n===null))return null;return n}function np(n){return n.data==="$?"||n.data==="$~"}function ip(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Jb(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ai(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var sp=null;function $E(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return ai(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function tT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function eT(n,s,a){switch(s=Mh(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function tu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ua(n)}var oi=new Map,nT=new Set;function Vh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ss=it.d;it.d={f:$b,r:tw,D:ew,C:nw,L:iw,m:sw,X:aw,S:rw,M:ow};function $b(){var n=Ss.f(),s=Ch();return n||s}function tw(n){var s=Wn(n);s!==null&&s.tag===5&&s.type==="form"?vv(s):Ss.r(n)}var Eo=typeof document>"u"?null:document;function iT(n,s,a){var l=Eo;if(l&&typeof s=="string"&&s){var f=An(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),nT.has(f)||(nT.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),fn(s,"link",n),Pe(s),l.head.appendChild(s)))}}function ew(n){Ss.D(n),iT("dns-prefetch",n,null)}function nw(n,s){Ss.C(n,s),iT("preconnect",n,s)}function iw(n,s,a){Ss.L(n,s,a);var l=Eo;if(l&&n&&s){var f='link[rel="preload"][as="'+An(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+An(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+An(a.imageSizes)+'"]')):f+='[href="'+An(n)+'"]';var d=f;switch(s){case"style":d=To(n);break;case"script":d=So(n)}oi.has(d)||(n=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),oi.set(d,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(eu(d))||s==="script"&&l.querySelector(nu(d))||(s=l.createElement("link"),fn(s,"link",n),Pe(s),l.head.appendChild(s)))}}function sw(n,s){Ss.m(n,s);var a=Eo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+An(l)+'"][href="'+An(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=So(n)}if(!oi.has(d)&&(n=T({rel:"modulepreload",href:n},s),oi.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nu(d)))return}l=a.createElement("link"),fn(l,"link",n),Pe(l),a.head.appendChild(l)}}}function rw(n,s,a){Ss.S(n,s,a);var l=Eo;if(l&&n){var f=xi(l).hoistableStyles,d=To(n);s=s||"default";var y=f.get(d);if(!y){var A={loading:0,preload:null};if(y=l.querySelector(eu(d)))A.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},a),(a=oi.get(d))&&rp(n,a);var R=y=l.createElement("link");Pe(R),fn(R,"link",n),R._p=new Promise(function(z,G){R.onload=z,R.onerror=G}),R.addEventListener("load",function(){A.loading|=1}),R.addEventListener("error",function(){A.loading|=2}),A.loading|=4,xh(y,s,l)}y={type:"stylesheet",instance:y,count:1,state:A},f.set(d,y)}}}function aw(n,s){Ss.X(n,s);var a=Eo;if(a&&n){var l=xi(a).hoistableScripts,f=So(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=T({src:n,async:!0},s),(s=oi.get(f))&&ap(n,s),d=a.createElement("script"),Pe(d),fn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function ow(n,s){Ss.M(n,s);var a=Eo;if(a&&n){var l=xi(a).hoistableScripts,f=So(n),d=l.get(f);d||(d=a.querySelector(nu(f)),d||(n=T({src:n,async:!0,type:"module"},s),(s=oi.get(f))&&ap(n,s),d=a.createElement("script"),Pe(d),fn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function sT(n,s,a,l){var f=(f=rt.current)?Vh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=To(a.href),a=xi(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=To(a.href);var d=xi(f).hoistableStyles,y=d.get(n);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,y),(d=f.querySelector(eu(n)))&&!d._p&&(y.instance=d,y.state.loading=5),oi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},oi.set(n,a),d||lw(f,n,a,y.state))),s&&l===null)throw Error(r(528,""));return y}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=So(a),a=xi(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function To(n){return'href="'+An(n)+'"'}function eu(n){return'link[rel="stylesheet"]['+n+"]"}function rT(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function lw(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),fn(s,"link",a),Pe(s),n.head.appendChild(s))}function So(n){return'[src="'+An(n)+'"]'}function nu(n){return"script[async]"+n}function aT(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+An(a.href)+'"]');if(l)return s.instance=l,Pe(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Pe(l),fn(l,"style",f),xh(l,a.precedence,n),s.instance=l;case"stylesheet":f=To(a.href);var d=n.querySelector(eu(f));if(d)return s.state.loading|=4,s.instance=d,Pe(d),d;l=rT(a),(f=oi.get(f))&&rp(l,f),d=(n.ownerDocument||n).createElement("link"),Pe(d);var y=d;return y._p=new Promise(function(A,R){y.onload=A,y.onerror=R}),fn(d,"link",l),s.state.loading|=4,xh(d,a.precedence,n),s.instance=d;case"script":return d=So(a.src),(f=n.querySelector(nu(d)))?(s.instance=f,Pe(f),f):(l=a,(f=oi.get(d))&&(l=T({},a),ap(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Pe(f),fn(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,xh(l,a.precedence,n));return s.instance}function xh(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,y=0;y<l.length;y++){var A=l[y];if(A.dataset.precedence===s)d=A;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function rp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function ap(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Lh=null;function oT(n,s,a){if(Lh===null){var l=new Map,f=Lh=new Map;f.set(a,l)}else f=Lh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Mi]||d[ke]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(s)||"";y=n+y;var A=l.get(y);A?A.push(d):l.set(y,[d])}}return l}function lT(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function uw(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function uT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function cw(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=To(l.href),d=s.querySelector(eu(f));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=kh.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=d,Pe(d);return}d=s.ownerDocument||s,l=rT(l),(f=oi.get(f))&&rp(l,f),d=d.createElement("link"),Pe(d);var y=d;y._p=new Promise(function(A,R){y.onload=A,y.onerror=R}),fn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=kh.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var op=0;function hw(n,s){return n.stylesheets&&n.count===0&&Uh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+s);0<n.imgBytes&&op===0&&(op=62500*Gb());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>op?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function kh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ph=null;function Uh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ph=new Map,s.forEach(fw,n),Ph=null,kh.call(n))}function fw(n,s){if(!(s.state.loading&4)){var a=Ph.get(n);if(a)var l=a.get(null);else{a=new Map,Ph.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}f=s.instance,y=f.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,f),a.set(y,f),this.count++,l=kh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var iu={$$typeof:gt,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function dw(n,s,a,l,f,d,y,A,R){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function cT(n,s,a,l,f,d,y,A,R,z,G,X){return n=new dw(n,s,a,y,R,z,G,X,A),s=1,d===!0&&(s|=24),d=Un(3,null,null,s),n.current=d,d.stateNode=n,s=Bd(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Hd(d),n}function hT(n){return n?(n=Ja,n):Ja}function fT(n,s,a,l,f,d){f=hT(f),l.context===null?l.context=f:l.pendingContext=f,l=Js(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=$s(n,l,s),a!==null&&(Nn(a,n,s),Ll(a,n,s))}function dT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function lp(n,s){dT(n,s),(n=n.alternate)&&dT(n,s)}function mT(n){if(n.tag===13||n.tag===31){var s=ta(n,67108864);s!==null&&Nn(s,n,67108864),lp(n,67108864)}}function pT(n){if(n.tag===13||n.tag===31){var s=jn();s=Fr(s);var a=ta(n,s);a!==null&&Nn(a,n,s),lp(n,s)}}var zh=!0;function mw(n,s,a,l){var f=H.T;H.T=null;var d=it.p;try{it.p=2,up(n,s,a,l)}finally{it.p=d,H.T=f}}function pw(n,s,a,l){var f=H.T;H.T=null;var d=it.p;try{it.p=8,up(n,s,a,l)}finally{it.p=d,H.T=f}}function up(n,s,a,l){if(zh){var f=cp(l);if(f===null)Xm(n,s,l,Bh,a),gT(n,l);else if(gw(f,n,s,a,l))l.stopPropagation();else if(gT(n,l),s&4&&-1<_w.indexOf(n)){for(;f!==null;){var d=Wn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=Ii(d.pendingLanes);if(y!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;y;){var R=1<<31-Re(y);A.entanglements[1]|=R,y&=~R}Yi(d),(Zt&6)===0&&(Sh=ce()+500,Zl(0))}}break;case 31:case 13:A=ta(d,2),A!==null&&Nn(A,d,2),Ch(),lp(d,2)}if(d=cp(l),d===null&&Xm(n,s,l,Bh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Xm(n,s,l,null,a)}}function cp(n){return n=Zn(n),hp(n)}var Bh=null;function hp(n){if(Bh=null,n=Vi(n),n!==null){var s=u(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=m(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Bh=n,null}function _T(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ui()){case ks:return 2;case ol:return 8;case Ps:case gd:return 32;case yc:return 268435456;default:return 32}default:return 32}}var fp=!1,cr=null,hr=null,fr=null,su=new Map,ru=new Map,dr=[],_w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gT(n,s){switch(n){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":su.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(s.pointerId)}}function au(n,s,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},s!==null&&(s=Wn(s),s!==null&&mT(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function gw(n,s,a,l,f){switch(s){case"focusin":return cr=au(cr,n,s,a,l,f),!0;case"dragenter":return hr=au(hr,n,s,a,l,f),!0;case"mouseover":return fr=au(fr,n,s,a,l,f),!0;case"pointerover":var d=f.pointerId;return su.set(d,au(su.get(d)||null,n,s,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,ru.set(d,au(ru.get(d)||null,n,s,a,l,f)),!0}return!1}function yT(n){var s=Vi(n.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,fi(n.priority,function(){pT(a)});return}}else if(s===31){if(s=m(a),s!==null){n.blockedOn=s,fi(n.priority,function(){pT(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=cp(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);vl=l,a.target.dispatchEvent(l),vl=null}else return s=Wn(a),s!==null&&mT(s),n.blockedOn=a,!1;s.shift()}return!0}function vT(n,s,a){qh(n)&&a.delete(s)}function yw(){fp=!1,cr!==null&&qh(cr)&&(cr=null),hr!==null&&qh(hr)&&(hr=null),fr!==null&&qh(fr)&&(fr=null),su.forEach(vT),ru.forEach(vT)}function Fh(n,s){n.blockedOn===s&&(n.blockedOn=null,fp||(fp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,yw)))}var jh=null;function ET(n){jh!==n&&(jh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){jh===n&&(jh=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(hp(l||a)===null)continue;break}var d=Wn(a);d!==null&&(n.splice(s,3),s-=3,cm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Ao(n){function s(R){return Fh(R,n)}cr!==null&&Fh(cr,n),hr!==null&&Fh(hr,n),fr!==null&&Fh(fr,n),su.forEach(s),ru.forEach(s);for(var a=0;a<dr.length;a++){var l=dr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<dr.length&&(a=dr[0],a.blockedOn===null);)yT(a),a.blockedOn===null&&dr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],y=f[Ze]||null;if(typeof d=="function")y||ET(a);else if(y){var A=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[Ze]||null)A=y.formAction;else if(hp(f)!==null)continue}else A=y.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),ET(a)}}}function TT(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function dp(n){this._internalRoot=n}Hh.prototype.render=dp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=jn();fT(a,l,n,s,null,null)},Hh.prototype.unmount=dp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;fT(n.current,2,null,n,null,null),Ch(),s[Oi]=null}};function Hh(n){this._internalRoot=n}Hh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Cc();n={blockedOn:null,target:n,priority:s};for(var a=0;a<dr.length&&s!==0&&s<dr[a].priority;a++);dr.splice(a,0,n),a===0&&yT(n)}};var ST=t.version;if(ST!=="19.2.0")throw Error(r(527,ST,"19.2.0"));it.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=_(s),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var vw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{ci=Gh.inject(vw),on=Gh}catch{}}return lu.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",f=Nv,d=Dv,y=Ov;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=cT(n,1,!1,null,null,a,l,null,f,d,y,TT),n[Oi]=s.current,Km(n),new dp(s)},lu.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Nv,y=Dv,A=Ov,R=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),s=cT(n,1,!0,s,a??null,l,f,R,d,y,A,TT),s.context=hT(null),a=s.current,l=jn(),l=Fr(l),f=Js(l),f.callback=null,$s(a,f,l),a=l,s.current.lanes=a,Br(s,a),Yi(s),n[Oi]=s.current,Km(n),new Hh(s)},lu.version="19.2.0",lu}var MT;function Nw(){if(MT)return pp.exports;MT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),pp.exports=Iw(),pp.exports}var Dw=Nw(),Dt=N_();const Ow=()=>{};var VT={};const NS={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const et=function(i,t){if(!i)throw Ko(t)},Ko=function(i){return new Error("Firebase Database ("+NS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const DS=function(i){const t=[];let e=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},Mw=function(i){const t=[];let e=0,r=0;for(;e<i.length;){const o=i[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[e++],c=i[e++],m=i[e++],p=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(p>>10)),t[r++]=String.fromCharCode(56320+(p&1023))}else{const u=i[e++],c=i[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},D_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],c=o+1<i.length,m=c?i[o+1]:0,p=o+2<i.length,_=p?i[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let S=(m&15)<<2|_>>6,V=_&63;p||(V=64,c||(S=64)),r.push(e[E],e[T],e[S],e[V])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(DS(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):Mw(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=e[i.charAt(o++)],m=o<i.length?e[i.charAt(o)]:0;++o;const _=o<i.length?e[i.charAt(o)]:64;++o;const T=o<i.length?e[i.charAt(o)]:64;if(++o,u==null||m==null||_==null||T==null)throw new Vw;const S=u<<2|m>>4;if(r.push(S),_!==64){const V=m<<4&240|_>>2;if(r.push(V),T!==64){const F=_<<6&192|T;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Vw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OS=function(i){const t=DS(i);return D_.encodeByteArray(t,!0)},uf=function(i){return OS(i).replace(/\./g,"")},Bp=function(i){try{return D_.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xw(i){return MS(void 0,i)}function MS(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!Lw(e)||(i[e]=MS(i[e],t[e]));return i}function Lw(i){return i!=="__proto__"}function kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Pw=()=>kw().__FIREBASE_DEFAULTS__,Uw=()=>{if(typeof process>"u"||typeof VT>"u")return;const i=VT.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},zw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&Bp(i[1]);return t&&JSON.parse(t)},O_=()=>{try{return Ow()||Pw()||Uw()||zw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Bw=i=>O_()?.emulatorHosts?.[i],VS=i=>{const t=Bw(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},xS=()=>O_()?.config;class Xi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}function Ju(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LS(i){return(await fetch(i,{credentials:"include"})).ok}function kS(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[uf(JSON.stringify(e)),uf(JSON.stringify(c)),""].join(".")}const gu={};function qw(){const i={prod:[],emulator:[]};for(const t of Object.keys(gu))gu[t]?i.emulator.push(t):i.prod.push(t);return i}function Fw(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let xT=!1;function PS(i,t){if(typeof window>"u"||typeof document>"u"||!Ju(window.location.host)||gu[i]===t||gu[i]||xT)return;gu[i]=t;function e(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=qw().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{xT=!0,c()},S}function E(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Fw(r),V=e("text"),F=document.getElementById(V)||document.createElement("span"),W=e("learnmore"),J=document.getElementById(W)||document.createElement("a"),ht=e("preprendIcon"),Et=document.getElementById(ht)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const gt=S.element;m(gt),E(J,W);const Qt=_();p(Et,ht),gt.append(Et,F,J,Qt),document.body.appendChild(gt)}u?(F.innerText="Preview backend disconnected.",Et.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Et.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function US(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(US())}function jw(){const i=O_()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gw(){return NS.NODE_ADMIN===!0}function Qw(){return!jw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yw(){try{return typeof indexedDB=="object"}catch{return!1}}function Kw(){return new Promise((i,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(e){t(e)}})}const Xw="FirebaseError";class Xo extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=Xw,Object.setPrototypeOf(this,Xo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,BS.prototype.create)}}class BS{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?Ww(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Xo(o,m,r)}}function Ww(i,t){return i.replace(Zw,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const Zw=/\{\$([^}]+)}/g;function Iu(i){return JSON.parse(i)}function an(i){return JSON.stringify(i)}const qS=function(i){let t={},e={},r={},o="";try{const u=i.split(".");t=Iu(Bp(u[0])||""),e=Iu(Bp(u[1])||""),o=u[2],r=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:r,signature:o}},Jw=function(i){const t=qS(i),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},$w=function(i){const t=qS(i).claims;return typeof t=="object"&&t.admin===!0};function wi(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Ea(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function qp(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function cf(i,t,e){const r={};for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=t.call(e,i[o],o,i));return r}function Nu(i,t){if(i===t)return!0;const e=Object.keys(i),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=i[o],c=t[o];if(LT(u)&&LT(c)){if(!Nu(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function LT(i){return i!==null&&typeof i=="object"}function tR(i){const t=[];for(const[e,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}class eR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const r=this.W_;if(typeof t=="string")for(let T=0;T<16;T++)r[T]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let T=0;T<16;T++)r[T]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let T=16;T<80;T++){const S=r[T-3]^r[T-8]^r[T-14]^r[T-16];r[T]=(S<<1|S>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],c=this.chain_[2],m=this.chain_[3],p=this.chain_[4],_,E;for(let T=0;T<80;T++){T<40?T<20?(_=m^u&(c^m),E=1518500249):(_=u^c^m,E=1859775393):T<60?(_=u&c|m&(u|c),E=2400959708):(_=u^c^m,E=3395469782);const S=(o<<5|o>>>27)+_+p+E+r[T]&4294967295;p=m,m=c,c=(u<<30|u>>>2)&4294967295,u=o,o=S}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const r=e-this.blockSize;let o=0;const u=this.buf_;let c=this.inbuf_;for(;o<e;){if(c===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(u[c]=t.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(u),c=0;break}}else for(;o<e;)if(u[c]=t[o],++c,++o,c===this.blockSize){this.compress_(u),c=0;break}}this.inbuf_=c,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=e&255,e/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)t[r]=this.chain_[o]>>u&255,++r;return t}}function ko(i,t){return`${i} failed: ${t} argument `}const nR=function(i){const t=[];let e=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);if(o>=55296&&o<=56319){const u=o-55296;r++,et(r<i.length,"Surrogate pair missing trail surrogate.");const c=i.charCodeAt(r)-56320;o=65536+(u<<10)+c}o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):o<65536?(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},qf=function(i){let t=0;for(let e=0;e<i.length;e++){const r=i.charCodeAt(e);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,e++):t+=3}return t};function Ye(i){return i&&i._delegate?i._delegate:i}class Po{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const da="[DEFAULT]";class iR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new Xi;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rR(t))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=da){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=da){return this.instances.has(t)}getOptions(t=da){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sR(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=da){return this.component?this.component.multipleInstances?t:da:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sR(i){return i===da?void 0:i}function rR(i){return i.instantiationMode==="EAGER"}class aR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new iR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Ft;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ft||(Ft={}));const oR={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},lR=Ft.INFO,uR={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},cR=(i,t,...e)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),o=uR[t];if(o)console[o](`[${r}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class M_{constructor(t){this.name=t,this._logLevel=lR,this._logHandler=cR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?oR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const hR=(i,t)=>t.some(e=>i instanceof e);let kT,PT;function fR(){return kT||(kT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dR(){return PT||(PT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FS=new WeakMap,Fp=new WeakMap,jS=new WeakMap,Ep=new WeakMap,V_=new WeakMap;function mR(i){const t=new Promise((e,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{e(yr(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&FS.set(e,i)}).catch(()=>{}),V_.set(t,i),t}function pR(i){if(Fp.has(i))return;const t=new Promise((e,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});Fp.set(i,t)}let jp={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return Fp.get(i);if(t==="objectStoreNames")return i.objectStoreNames||jS.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return yr(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function _R(i){jp=i(jp)}function gR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=i.call(Tp(this),t,...e);return jS.set(r,t.sort?t.sort():[t]),yr(r)}:dR().includes(i)?function(...t){return i.apply(Tp(this),t),yr(FS.get(this))}:function(...t){return yr(i.apply(Tp(this),t))}}function yR(i){return typeof i=="function"?gR(i):(i instanceof IDBTransaction&&pR(i),hR(i,fR())?new Proxy(i,jp):i)}function yr(i){if(i instanceof IDBRequest)return mR(i);if(Ep.has(i))return Ep.get(i);const t=yR(i);return t!==i&&(Ep.set(i,t),V_.set(t,i)),t}const Tp=i=>V_.get(i);function vR(i,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(i,t),m=yr(c);return r&&c.addEventListener("upgradeneeded",p=>{r(yr(c.result),p.oldVersion,p.newVersion,yr(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const ER=["get","getKey","getAll","getAllKeys","count"],TR=["put","add","delete","clear"],Sp=new Map;function UT(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Sp.get(t))return Sp.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=TR.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ER.includes(e)))return;const u=async function(c,...m){const p=this.transaction(c,o?"readwrite":"readonly");let _=p.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[e](...m),o&&p.done]))[0]};return Sp.set(t,u),u}_R(i=>({...i,get:(t,e,r)=>UT(t,e)||i.get(t,e,r),has:(t,e)=>!!UT(t,e)||i.has(t,e)}));class SR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(AR(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function AR(i){return i.getComponent()?.type==="VERSION"}const Hp="@firebase/app",zT="0.14.6";const Rs=new M_("@firebase/app"),CR="@firebase/app-compat",bR="@firebase/analytics-compat",wR="@firebase/analytics",RR="@firebase/app-check-compat",IR="@firebase/app-check",NR="@firebase/auth",DR="@firebase/auth-compat",OR="@firebase/database",MR="@firebase/data-connect",VR="@firebase/database-compat",xR="@firebase/functions",LR="@firebase/functions-compat",kR="@firebase/installations",PR="@firebase/installations-compat",UR="@firebase/messaging",zR="@firebase/messaging-compat",BR="@firebase/performance",qR="@firebase/performance-compat",FR="@firebase/remote-config",jR="@firebase/remote-config-compat",HR="@firebase/storage",GR="@firebase/storage-compat",QR="@firebase/firestore",YR="@firebase/ai",KR="@firebase/firestore-compat",XR="firebase",WR="12.6.0";const Gp="[DEFAULT]",ZR={[Hp]:"fire-core",[CR]:"fire-core-compat",[wR]:"fire-analytics",[bR]:"fire-analytics-compat",[IR]:"fire-app-check",[RR]:"fire-app-check-compat",[NR]:"fire-auth",[DR]:"fire-auth-compat",[OR]:"fire-rtdb",[MR]:"fire-data-connect",[VR]:"fire-rtdb-compat",[xR]:"fire-fn",[LR]:"fire-fn-compat",[kR]:"fire-iid",[PR]:"fire-iid-compat",[UR]:"fire-fcm",[zR]:"fire-fcm-compat",[BR]:"fire-perf",[qR]:"fire-perf-compat",[FR]:"fire-rc",[jR]:"fire-rc-compat",[HR]:"fire-gcs",[GR]:"fire-gcs-compat",[QR]:"fire-fst",[KR]:"fire-fst-compat",[YR]:"fire-vertex","fire-js":"fire-js",[XR]:"fire-js-all"};const hf=new Map,JR=new Map,Qp=new Map;function BT(i,t){try{i.container.addComponent(t)}catch(e){Rs.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Du(i){const t=i.name;if(Qp.has(t))return Rs.debug(`There were multiple attempts to register component ${t}.`),!1;Qp.set(t,i);for(const e of hf.values())BT(e,i);for(const e of JR.values())BT(e,i);return!0}function HS(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function GS(i){return i==null?!1:i.settings!==void 0}const $R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new BS("app","Firebase",$R);class tI{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const QS=WR;function YS(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const r={name:Gp,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw vr.create("bad-app-name",{appName:String(o)});if(e||(e=xS()),!e)throw vr.create("no-options");const u=hf.get(o);if(u){if(Nu(e,u.options)&&Nu(r,u.config))return u;throw vr.create("duplicate-app",{appName:o})}const c=new aR(o);for(const p of Qp.values())c.addComponent(p);const m=new tI(e,r,c);return hf.set(o,m),m}function KS(i=Gp){const t=hf.get(i);if(!t&&i===Gp&&xS())return YS();if(!t)throw vr.create("no-app",{appName:i});return t}function Er(i,t,e){let r=ZR[i]??i;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Rs.warn(c.join(" "));return}Du(new Po(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const eI="firebase-heartbeat-database",nI=1,Ou="firebase-heartbeat-store";let Ap=null;function XS(){return Ap||(Ap=vR(eI,nI,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Ou)}catch(e){console.warn(e)}}}}).catch(i=>{throw vr.create("idb-open",{originalErrorMessage:i.message})})),Ap}async function iI(i){try{const e=(await XS()).transaction(Ou),r=await e.objectStore(Ou).get(WS(i));return await e.done,r}catch(t){if(t instanceof Xo)Rs.warn(t.message);else{const e=vr.create("idb-get",{originalErrorMessage:t?.message});Rs.warn(e.message)}}}async function qT(i,t){try{const r=(await XS()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(t,WS(i)),await r.done}catch(e){if(e instanceof Xo)Rs.warn(e.message);else{const r=vr.create("idb-set",{originalErrorMessage:e?.message});Rs.warn(r.message)}}}function WS(i){return`${i.name}!${i.options.appId}`}const sI=1024,rI=30;class aI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lI(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=FT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>rI){const o=uI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Rs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FT(),{heartbeatsToSend:e,unsentEntries:r}=oI(this._heartbeatsCache.heartbeats),o=uf(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Rs.warn(t),""}}}function FT(){return new Date().toISOString().substring(0,10)}function oI(i,t=sI){const e=[];let r=i.slice();for(const o of i){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),jT(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),jT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class lI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yw()?Kw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await iI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return qT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return qT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function jT(i){return uf(JSON.stringify({version:2,heartbeats:i})).length}function uI(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let r=1;r<i.length;r++)i[r].date<e&&(e=i[r].date,t=r);return t}function cI(i){Du(new Po("platform-logger",t=>new SR(t),"PRIVATE")),Du(new Po("heartbeat",t=>new aI(t),"PRIVATE")),Er(Hp,zT,i),Er(Hp,zT,"esm2020"),Er("fire-js","")}cI("");var hI="firebase",fI="12.6.0";Er(hI,fI,"app");var HT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Tr,ZS;(function(){var i;function t(N,b){function I(){}I.prototype=b.prototype,N.F=b.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(x,D,k){for(var w=Array(arguments.length-2),de=2;de<arguments.length;de++)w[de-2]=arguments[de];return b.prototype[D].apply(x,w)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,b,I){I||(I=0);const x=Array(16);if(typeof b=="string")for(var D=0;D<16;++D)x[D]=b.charCodeAt(I++)|b.charCodeAt(I++)<<8|b.charCodeAt(I++)<<16|b.charCodeAt(I++)<<24;else for(D=0;D<16;++D)x[D]=b[I++]|b[I++]<<8|b[I++]<<16|b[I++]<<24;b=N.g[0],I=N.g[1],D=N.g[2];let k=N.g[3],w;w=b+(k^I&(D^k))+x[0]+3614090360&4294967295,b=I+(w<<7&4294967295|w>>>25),w=k+(D^b&(I^D))+x[1]+3905402710&4294967295,k=b+(w<<12&4294967295|w>>>20),w=D+(I^k&(b^I))+x[2]+606105819&4294967295,D=k+(w<<17&4294967295|w>>>15),w=I+(b^D&(k^b))+x[3]+3250441966&4294967295,I=D+(w<<22&4294967295|w>>>10),w=b+(k^I&(D^k))+x[4]+4118548399&4294967295,b=I+(w<<7&4294967295|w>>>25),w=k+(D^b&(I^D))+x[5]+1200080426&4294967295,k=b+(w<<12&4294967295|w>>>20),w=D+(I^k&(b^I))+x[6]+2821735955&4294967295,D=k+(w<<17&4294967295|w>>>15),w=I+(b^D&(k^b))+x[7]+4249261313&4294967295,I=D+(w<<22&4294967295|w>>>10),w=b+(k^I&(D^k))+x[8]+1770035416&4294967295,b=I+(w<<7&4294967295|w>>>25),w=k+(D^b&(I^D))+x[9]+2336552879&4294967295,k=b+(w<<12&4294967295|w>>>20),w=D+(I^k&(b^I))+x[10]+4294925233&4294967295,D=k+(w<<17&4294967295|w>>>15),w=I+(b^D&(k^b))+x[11]+2304563134&4294967295,I=D+(w<<22&4294967295|w>>>10),w=b+(k^I&(D^k))+x[12]+1804603682&4294967295,b=I+(w<<7&4294967295|w>>>25),w=k+(D^b&(I^D))+x[13]+4254626195&4294967295,k=b+(w<<12&4294967295|w>>>20),w=D+(I^k&(b^I))+x[14]+2792965006&4294967295,D=k+(w<<17&4294967295|w>>>15),w=I+(b^D&(k^b))+x[15]+1236535329&4294967295,I=D+(w<<22&4294967295|w>>>10),w=b+(D^k&(I^D))+x[1]+4129170786&4294967295,b=I+(w<<5&4294967295|w>>>27),w=k+(I^D&(b^I))+x[6]+3225465664&4294967295,k=b+(w<<9&4294967295|w>>>23),w=D+(b^I&(k^b))+x[11]+643717713&4294967295,D=k+(w<<14&4294967295|w>>>18),w=I+(k^b&(D^k))+x[0]+3921069994&4294967295,I=D+(w<<20&4294967295|w>>>12),w=b+(D^k&(I^D))+x[5]+3593408605&4294967295,b=I+(w<<5&4294967295|w>>>27),w=k+(I^D&(b^I))+x[10]+38016083&4294967295,k=b+(w<<9&4294967295|w>>>23),w=D+(b^I&(k^b))+x[15]+3634488961&4294967295,D=k+(w<<14&4294967295|w>>>18),w=I+(k^b&(D^k))+x[4]+3889429448&4294967295,I=D+(w<<20&4294967295|w>>>12),w=b+(D^k&(I^D))+x[9]+568446438&4294967295,b=I+(w<<5&4294967295|w>>>27),w=k+(I^D&(b^I))+x[14]+3275163606&4294967295,k=b+(w<<9&4294967295|w>>>23),w=D+(b^I&(k^b))+x[3]+4107603335&4294967295,D=k+(w<<14&4294967295|w>>>18),w=I+(k^b&(D^k))+x[8]+1163531501&4294967295,I=D+(w<<20&4294967295|w>>>12),w=b+(D^k&(I^D))+x[13]+2850285829&4294967295,b=I+(w<<5&4294967295|w>>>27),w=k+(I^D&(b^I))+x[2]+4243563512&4294967295,k=b+(w<<9&4294967295|w>>>23),w=D+(b^I&(k^b))+x[7]+1735328473&4294967295,D=k+(w<<14&4294967295|w>>>18),w=I+(k^b&(D^k))+x[12]+2368359562&4294967295,I=D+(w<<20&4294967295|w>>>12),w=b+(I^D^k)+x[5]+4294588738&4294967295,b=I+(w<<4&4294967295|w>>>28),w=k+(b^I^D)+x[8]+2272392833&4294967295,k=b+(w<<11&4294967295|w>>>21),w=D+(k^b^I)+x[11]+1839030562&4294967295,D=k+(w<<16&4294967295|w>>>16),w=I+(D^k^b)+x[14]+4259657740&4294967295,I=D+(w<<23&4294967295|w>>>9),w=b+(I^D^k)+x[1]+2763975236&4294967295,b=I+(w<<4&4294967295|w>>>28),w=k+(b^I^D)+x[4]+1272893353&4294967295,k=b+(w<<11&4294967295|w>>>21),w=D+(k^b^I)+x[7]+4139469664&4294967295,D=k+(w<<16&4294967295|w>>>16),w=I+(D^k^b)+x[10]+3200236656&4294967295,I=D+(w<<23&4294967295|w>>>9),w=b+(I^D^k)+x[13]+681279174&4294967295,b=I+(w<<4&4294967295|w>>>28),w=k+(b^I^D)+x[0]+3936430074&4294967295,k=b+(w<<11&4294967295|w>>>21),w=D+(k^b^I)+x[3]+3572445317&4294967295,D=k+(w<<16&4294967295|w>>>16),w=I+(D^k^b)+x[6]+76029189&4294967295,I=D+(w<<23&4294967295|w>>>9),w=b+(I^D^k)+x[9]+3654602809&4294967295,b=I+(w<<4&4294967295|w>>>28),w=k+(b^I^D)+x[12]+3873151461&4294967295,k=b+(w<<11&4294967295|w>>>21),w=D+(k^b^I)+x[15]+530742520&4294967295,D=k+(w<<16&4294967295|w>>>16),w=I+(D^k^b)+x[2]+3299628645&4294967295,I=D+(w<<23&4294967295|w>>>9),w=b+(D^(I|~k))+x[0]+4096336452&4294967295,b=I+(w<<6&4294967295|w>>>26),w=k+(I^(b|~D))+x[7]+1126891415&4294967295,k=b+(w<<10&4294967295|w>>>22),w=D+(b^(k|~I))+x[14]+2878612391&4294967295,D=k+(w<<15&4294967295|w>>>17),w=I+(k^(D|~b))+x[5]+4237533241&4294967295,I=D+(w<<21&4294967295|w>>>11),w=b+(D^(I|~k))+x[12]+1700485571&4294967295,b=I+(w<<6&4294967295|w>>>26),w=k+(I^(b|~D))+x[3]+2399980690&4294967295,k=b+(w<<10&4294967295|w>>>22),w=D+(b^(k|~I))+x[10]+4293915773&4294967295,D=k+(w<<15&4294967295|w>>>17),w=I+(k^(D|~b))+x[1]+2240044497&4294967295,I=D+(w<<21&4294967295|w>>>11),w=b+(D^(I|~k))+x[8]+1873313359&4294967295,b=I+(w<<6&4294967295|w>>>26),w=k+(I^(b|~D))+x[15]+4264355552&4294967295,k=b+(w<<10&4294967295|w>>>22),w=D+(b^(k|~I))+x[6]+2734768916&4294967295,D=k+(w<<15&4294967295|w>>>17),w=I+(k^(D|~b))+x[13]+1309151649&4294967295,I=D+(w<<21&4294967295|w>>>11),w=b+(D^(I|~k))+x[4]+4149444226&4294967295,b=I+(w<<6&4294967295|w>>>26),w=k+(I^(b|~D))+x[11]+3174756917&4294967295,k=b+(w<<10&4294967295|w>>>22),w=D+(b^(k|~I))+x[2]+718787259&4294967295,D=k+(w<<15&4294967295|w>>>17),w=I+(k^(D|~b))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+k&4294967295}r.prototype.v=function(N,b){b===void 0&&(b=N.length);const I=b-this.blockSize,x=this.C;let D=this.h,k=0;for(;k<b;){if(D==0)for(;k<=I;)o(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<b;)if(x[D++]=N.charCodeAt(k++),D==this.blockSize){o(this,x),D=0;break}}else for(;k<b;)if(x[D++]=N[k++],D==this.blockSize){o(this,x),D=0;break}}this.h=D,this.o+=b},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;b=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=b&255,b/=256;for(this.v(N),N=Array(16),b=0,I=0;I<4;++I)for(let x=0;x<32;x+=8)N[b++]=this.g[I]>>>x&255;return N};function u(N,b){var I=m;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=b(N)}function c(N,b){this.h=b;const I=[];let x=!0;for(let D=N.length-1;D>=0;D--){const k=N[D]|0;x&&k==b||(I[D]=k,x=!1)}this.g=I}var m={};function p(N){return-128<=N&&N<128?u(N,function(b){return new c([b|0],b<0?-1:0)}):new c([N|0],N<0?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return J(_(-N));const b=[];let I=1;for(let x=0;N>=I;x++)b[x]=N/I|0,I*=4294967296;return new c(b,0)}function E(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return J(E(N.substring(1),b));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=_(Math.pow(b,8));let x=T;for(let k=0;k<N.length;k+=8){var D=Math.min(8,N.length-k);const w=parseInt(N.substring(k,k+D),b);D<8?(D=_(Math.pow(b,D)),x=x.j(D).add(_(w))):(x=x.j(I),x=x.add(_(w)))}return x}var T=p(0),S=p(1),V=p(16777216);i=c.prototype,i.m=function(){if(W(this))return-J(this).m();let N=0,b=1;for(let I=0;I<this.g.length;I++){const x=this.i(I);N+=(x>=0?x:4294967296+x)*b,b*=4294967296}return N},i.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(F(this))return"0";if(W(this))return"-"+J(this).toString(N);const b=_(Math.pow(N,6));var I=this;let x="";for(;;){const D=Qt(I,b).g;I=ht(I,D.j(b));let k=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=D,F(I))return k+x;for(;k.length<6;)k="0"+k;x=k+x}},i.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function F(N){if(N.h!=0)return!1;for(let b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function W(N){return N.h==-1}i.l=function(N){return N=ht(this,N),W(N)?-1:F(N)?0:1};function J(N){const b=N.g.length,I=[];for(let x=0;x<b;x++)I[x]=~N.g[x];return new c(I,~N.h).add(S)}i.abs=function(){return W(this)?J(this):this},i.add=function(N){const b=Math.max(this.g.length,N.g.length),I=[];let x=0;for(let D=0;D<=b;D++){let k=x+(this.i(D)&65535)+(N.i(D)&65535),w=(k>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);x=w>>>16,k&=65535,w&=65535,I[D]=w<<16|k}return new c(I,I[I.length-1]&-2147483648?-1:0)};function ht(N,b){return N.add(J(b))}i.j=function(N){if(F(this)||F(N))return T;if(W(this))return W(N)?J(this).j(J(N)):J(J(this).j(N));if(W(N))return J(this.j(J(N)));if(this.l(V)<0&&N.l(V)<0)return _(this.m()*N.m());const b=this.g.length+N.g.length,I=[];for(var x=0;x<2*b;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(let D=0;D<N.g.length;D++){const k=this.i(x)>>>16,w=this.i(x)&65535,de=N.i(D)>>>16,me=N.i(D)&65535;I[2*x+2*D]+=w*me,Et(I,2*x+2*D),I[2*x+2*D+1]+=k*me,Et(I,2*x+2*D+1),I[2*x+2*D+1]+=w*de,Et(I,2*x+2*D+1),I[2*x+2*D+2]+=k*de,Et(I,2*x+2*D+2)}for(N=0;N<b;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=b;N<2*b;N++)I[N]=0;return new c(I,0)};function Et(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function gt(N,b){this.g=N,this.h=b}function Qt(N,b){if(F(b))throw Error("division by zero");if(F(N))return new gt(T,T);if(W(N))return b=Qt(J(N),b),new gt(J(b.g),J(b.h));if(W(b))return b=Qt(N,J(b)),new gt(J(b.g),b.h);if(N.g.length>30){if(W(N)||W(b))throw Error("slowDivide_ only works with positive integers.");for(var I=S,x=b;x.l(N)<=0;)I=le(I),x=le(x);var D=Nt(I,1),k=Nt(x,1);for(x=Nt(x,2),I=Nt(I,2);!F(x);){var w=k.add(x);w.l(N)<=0&&(D=D.add(I),k=w),x=Nt(x,1),I=Nt(I,1)}return b=ht(N,D.j(b)),new gt(D,b)}for(D=T;N.l(b)>=0;){for(I=Math.max(1,Math.floor(N.m()/b.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),k=_(I),w=k.j(b);W(w)||w.l(N)>0;)I-=x,k=_(I),w=k.j(b);F(k)&&(k=S),D=D.add(k),N=ht(N,w)}return new gt(D,N)}i.B=function(N){return Qt(this,N).h},i.and=function(N){const b=Math.max(this.g.length,N.g.length),I=[];for(let x=0;x<b;x++)I[x]=this.i(x)&N.i(x);return new c(I,this.h&N.h)},i.or=function(N){const b=Math.max(this.g.length,N.g.length),I=[];for(let x=0;x<b;x++)I[x]=this.i(x)|N.i(x);return new c(I,this.h|N.h)},i.xor=function(N){const b=Math.max(this.g.length,N.g.length),I=[];for(let x=0;x<b;x++)I[x]=this.i(x)^N.i(x);return new c(I,this.h^N.h)};function le(N){const b=N.g.length+1,I=[];for(let x=0;x<b;x++)I[x]=N.i(x)<<1|N.i(x-1)>>>31;return new c(I,N.h)}function Nt(N,b){const I=b>>5;b%=32;const x=N.g.length-I,D=[];for(let k=0;k<x;k++)D[k]=b>0?N.i(k+I)>>>b|N.i(k+I+1)<<32-b:N.i(k+I);return new c(D,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ZS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=_,c.fromString=E,Tr=c}).apply(typeof HT<"u"?HT:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var JS,mu,$S,tf,Yp,t1,e1,n1;(function(){var i,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var g=0;g<h.length;++g){var v=h[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,g){if(g)t:{var v=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var P=h[C];if(!(P in v))break t;v=v[P]}h=h[h.length-1],C=v[h],g=g(C),g!=C&&g!=null&&t(v,h,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(g){var v=[],C;for(C in g)Object.prototype.hasOwnProperty.call(g,C)&&v.push([C,g[C]]);return v}});var u=u||{},c=this||self;function m(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function p(h,g,v){return h.call.apply(h.bind,arguments)}function _(h,g,v){return _=p,_.apply(null,arguments)}function E(h,g){var v=Array.prototype.slice.call(arguments,1);return function(){var C=v.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function T(h,g){function v(){}v.prototype=g.prototype,h.Z=g.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(C,P,q){for(var nt=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)nt[bt-2]=arguments[bt];return g.prototype[P].apply(C,nt)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function V(h){const g=h.length;if(g>0){const v=Array(g);for(let C=0;C<g;C++)v[C]=h[C];return v}return[]}function F(h,g){for(let C=1;C<arguments.length;C++){const P=arguments[C];var v=typeof P;if(v=v!="object"?v:P?Array.isArray(P)?"array":v:"null",v=="array"||v=="object"&&typeof P.length=="number"){v=h.length||0;const q=P.length||0;h.length=v+q;for(let nt=0;nt<q;nt++)h[v+nt]=P[nt]}else h.push(P)}}class W{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function J(h){c.setTimeout(()=>{throw h},0)}function ht(){var h=N;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class Et{constructor(){this.h=this.g=null}add(g,v){const C=gt.get();C.set(g,v),this.h?this.h.next=C:this.g=C,this.h=C}}var gt=new W(()=>new Qt,h=>h.reset());class Qt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let le,Nt=!1,N=new Et,b=()=>{const h=Promise.resolve(void 0);le=()=>{h.then(I)}};function I(){for(var h;h=ht();){try{h.h.call(h.g)}catch(v){J(v)}var g=gt;g.j(h),g.h<100&&(g.h++,h.next=g.g,g.g=h)}Nt=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,g),c.removeEventListener("test",v,g)}catch{}return h})();function w(h){return/^[\s\xa0]*$/.test(h)}function de(h,g){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,g)}T(de,D),de.prototype.init=function(h,g){const v=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget,g||(v=="mouseover"?g=h.fromElement:v=="mouseout"&&(g=h.toElement)),this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),H=0;function it(h,g,v,C,P){this.listener=h,this.proxy=null,this.src=g,this.type=v,this.capture=!!C,this.ha=P,this.key=++H,this.da=this.fa=!1}function dt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function kt(h,g,v){for(const C in h)g.call(v,h[C],C,h)}function jt(h,g){for(const v in h)g.call(void 0,h[v],v,h)}function M(h){const g={};for(const v in h)g[v]=h[v];return g}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(h,g){let v,C;for(let P=1;P<arguments.length;P++){C=arguments[P];for(v in C)h[v]=C[v];for(let q=0;q<Y.length;q++)v=Y[q],Object.prototype.hasOwnProperty.call(C,v)&&(h[v]=C[v])}}function ot(h){this.src=h,this.g={},this.h=0}ot.prototype.add=function(h,g,v,C,P){const q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);const nt=rt(h,g,C,P);return nt>-1?(g=h[nt],v||(g.fa=!1)):(g=new it(g,this.src,q,!!C,P),g.fa=v,h.push(g)),g};function pt(h,g){const v=g.type;if(v in h.g){var C=h.g[v],P=Array.prototype.indexOf.call(C,g,void 0),q;(q=P>=0)&&Array.prototype.splice.call(C,P,1),q&&(dt(g),h.g[v].length==0&&(delete h.g[v],h.h--))}}function rt(h,g,v,C){for(let P=0;P<h.length;++P){const q=h[P];if(!q.da&&q.listener==g&&q.capture==!!v&&q.ha==C)return P}return-1}var Vt="closure_lm_"+(Math.random()*1e6|0),we={};function ue(h,g,v,C,P){if(Array.isArray(g)){for(let q=0;q<g.length;q++)ue(h,g[q],v,C,P);return null}return v=Ls(v),h&&h[me]?h.J(g,v,m(C)?!!C.capture:!1,P):ns(h,g,v,!1,C,P)}function ns(h,g,v,C,P,q){if(!g)throw Error("Invalid event type");const nt=m(P)?!!P.capture:!!P;let bt=is(h);if(bt||(h[Vt]=bt=new ot(h)),v=bt.add(g,v,C,nt,q),v.proxy)return v;if(C=Yn(),v.proxy=C,C.src=h,C.listener=v,h.addEventListener)k||(P=nt),P===void 0&&(P=!1),h.addEventListener(g.toString(),C,P);else if(h.attachEvent)h.attachEvent(Kn(g.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Yn(){function h(v){return g.call(h.src,h.listener,v)}const g=Pr;return h}function Vs(h,g,v,C,P){if(Array.isArray(g))for(var q=0;q<g.length;q++)Vs(h,g[q],v,C,P);else C=m(C)?!!C.capture:!!C,v=Ls(v),h&&h[me]?(h=h.i,q=String(g).toString(),q in h.g&&(g=h.g[q],v=rt(g,v,C,P),v>-1&&(dt(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete h.g[q],h.h--)))):h&&(h=is(h))&&(g=h.g[g.toString()],h=-1,g&&(h=rt(g,v,C,P)),(v=h>-1?g[h]:null)&&xs(v))}function xs(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[me])pt(g.i,h);else{var v=h.type,C=h.proxy;g.removeEventListener?g.removeEventListener(v,C,h.capture):g.detachEvent?g.detachEvent(Kn(v),C):g.addListener&&g.removeListener&&g.removeListener(C),(v=is(g))?(pt(v,h),v.h==0&&(v.src=null,g[Vt]=null)):dt(h)}}}function Kn(h){return h in we?we[h]:we[h]="on"+h}function Pr(h,g){if(h.da)h=!0;else{g=new de(g,this);const v=h.listener,C=h.ha||h.src;h.fa&&xs(h),h=v.call(C,g)}return h}function is(h){return h=h[Vt],h instanceof ot?h:null}var Ur="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ls(h){return typeof h=="function"?h:(h[Ur]||(h[Ur]=function(g){return h.handleEvent(g)}),h[Ur])}function $(){x.call(this),this.i=new ot(this),this.M=this,this.G=null}T($,x),$.prototype[me]=!0,$.prototype.removeEventListener=function(h,g,v,C){Vs(this,h,g,v,C)};function ft(h,g){var v,C=h.G;if(C)for(v=[];C;C=C.G)v.push(C);if(h=h.M,C=g.type||g,typeof g=="string")g=new D(g,h);else if(g instanceof D)g.target=g.target||h;else{var P=g;g=new D(C,h),tt(g,P)}P=!0;let q,nt;if(v)for(nt=v.length-1;nt>=0;nt--)q=g.g=v[nt],P=Yt(q,C,!0,g)&&P;if(q=g.g=h,P=Yt(q,C,!0,g)&&P,P=Yt(q,C,!1,g)&&P,v)for(nt=0;nt<v.length;nt++)q=g.g=v[nt],P=Yt(q,C,!1,g)&&P}$.prototype.N=function(){if($.Z.N.call(this),this.i){var h=this.i;for(const g in h.g){const v=h.g[g];for(let C=0;C<v.length;C++)dt(v[C]);delete h.g[g],h.h--}}this.G=null},$.prototype.J=function(h,g,v,C){return this.i.add(String(h),g,!1,v,C)},$.prototype.K=function(h,g,v,C){return this.i.add(String(h),g,!0,v,C)};function Yt(h,g,v,C){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();let P=!0;for(let q=0;q<g.length;++q){const nt=g[q];if(nt&&!nt.da&&nt.capture==v){const bt=nt.listener,Ie=nt.ha||nt.src;nt.fa&&pt(h.i,nt),P=bt.call(Ie,C)!==!1&&P}}return P&&!C.defaultPrevented}function xe(h,g){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:c.setTimeout(h,g||0)}function Se(h){h.g=xe(()=>{h.g=null,h.i&&(h.i=!1,Se(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class ce extends x{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Se(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(h){x.call(this),this.h=h,this.g={}}T(ui,x);var ks=[];function ol(h){kt(h.g,function(g,v){this.g.hasOwnProperty(v)&&xs(g)},h),h.g={}}ui.prototype.N=function(){ui.Z.N.call(this),ol(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ps=c.JSON.stringify,gd=c.JSON.parse,yc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function vc(){}function Ec(){}var ci={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){D.call(this,"d")}T(on,D);function Xn(){D.call(this,"c")}T(Xn,D);var Re={},Tc=null;function ka(){return Tc=Tc||new $}Re.Ia="serverreachability";function Sc(h){D.call(this,Re.Ia,h)}T(Sc,D);function Ri(h){const g=ka();ft(g,new Sc(g))}Re.STAT_EVENT="statevent";function zr(h,g){D.call(this,Re.STAT_EVENT,h),this.stat=g}T(zr,D);function Le(h){const g=ka();ft(g,new zr(g,h))}Re.Ja="timingevent";function Ii(h,g){D.call(this,Re.Ja,h),this.size=g}T(Ii,D);function Ni(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},g)}function hi(){this.g=!0}hi.prototype.ua=function(){this.g=!1};function yd(h,g,v,C,P,q){h.info(function(){if(h.g)if(q){var nt="",bt=q.split("&");for(let Wt=0;Wt<bt.length;Wt++){var Ie=bt[Wt].split("=");if(Ie.length>1){const ve=Ie[0];Ie=Ie[1];const $n=ve.split("_");nt=$n.length>=2&&$n[1]=="type"?nt+(ve+"="+Ie+"&"):nt+(ve+"=redacted&")}}}else nt=null;else nt=q;return"XMLHTTP REQ ("+C+") [attempt "+P+"]: "+g+`
`+v+`
`+nt})}function Ac(h,g,v,C,P,q,nt){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+P+"]: "+g+`
`+v+`
`+q+" "+nt})}function Di(h,g,v,C){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+vd(h,v)+(C?" "+C:"")})}function Br(h,g){h.info(function(){return"TIMEOUT: "+g})}hi.prototype.info=function(){};function vd(h,g){if(!h.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(h=0;h<q.length;h++)if(Array.isArray(q[h])){var v=q[h];if(!(v.length<2)){var C=v[1];if(Array.isArray(C)&&!(C.length<1)){var P=C[0];if(P!="noop"&&P!="stop"&&P!="close")for(let nt=1;nt<C.length;nt++)C[nt]=""}}}}return Ps(q)}catch{return g}}var qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ll={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ul;function Fr(){}T(Fr,vc),Fr.prototype.g=function(){return new XMLHttpRequest},ul=new Fr;function ss(h){return encodeURIComponent(String(h))}function Cc(h){var g=1;h=h.split(":");const v=[];for(;g>0&&h.length;)v.push(h.shift()),g--;return h.length&&v.push(h.join(":")),v}function fi(h,g,v,C){this.j=h,this.i=g,this.l=v,this.S=C||1,this.V=new ui(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new di}function di(){this.i=null,this.g="",this.h=!1}var ke={},Ze={};function Oi(h,g,v){h.M=1,h.A=jr(Ue(g)),h.u=v,h.R=!0,Pa(h,null)}function Pa(h,g){h.F=Date.now(),Mi(h),h.B=Ue(h.A);var v=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),qa(v.i,"t",C),h.C=0,v=h.j.L,h.h=new di,h.g=zc(h.j,v?g:null,!h.u),h.P>0&&(h.O=new ce(_(h.Y,h,h.g),h.P)),g=h.V,v=h.g,C=h.ba;var P="readystatechange";Array.isArray(P)||(P&&(ks[0]=P.toString()),P=ks);for(let q=0;q<P.length;q++){const nt=ue(v,P[q],C||g.handleEvent,!1,g.h||g);if(!nt)break;g.g[nt.key]=nt}g=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,g)):(h.v="GET",h.g.ea(h.B,h.v,null,g)),Ri(),yd(h.i,h.v,h.B,h.l,h.S,h.u)}fi.prototype.ba=function(h){h=h.target;const g=this.O;g&&_i(h)==3?g.j():this.Y(h)},fi.prototype.Y=function(h){try{if(h==this.g)t:{const bt=_i(this.g),Ie=this.g.ya(),Wt=this.g.ca();if(!(bt<3)&&(bt!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||bt!=4||Ie==7||(Ie==8||Wt<=0?Ri(3):Ri(2)),Vi(this);var g=this.g.ca();this.X=g;var v=Ed(this);if(this.o=g==200,Ac(this.i,this.v,this.B,this.l,this.S,bt,g),this.o){if(this.U&&!this.L){e:{if(this.g){var C,P=this.g;if((C=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(C)){var q=C;break e}}q=null}if(h=q)Di(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,h);else{this.o=!1,this.m=3,Le(12),Ln(this),Wn(this);break t}}if(this.R){h=!0;let ve;for(;!this.K&&this.C<v.length;)if(ve=wc(this,v),ve==Ze){bt==4&&(this.m=4,Le(14),h=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(ve==ke){this.m=4,Le(15),Di(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Di(this.i,this.l,ve,null),xi(this,ve);if(bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||v.length!=0||this.h.h||(this.m=1,Le(16),h=!1),this.o=this.o&&h,!h)Di(this.i,this.l,v,"[Invalid Chunked Response]"),Ln(this),Wn(this);else if(v.length>0&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.aa&&!nt.P&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Cl(nt),nt.P=!0,Le(11))}}else Di(this.i,this.l,v,null),xi(this,v);bt==4&&Ln(this),this.o&&!this.K&&(bt==4?Lc(this.j,this):(this.o=!1,Mi(this)))}else as(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),Ln(this),Wn(this)}}}catch{}finally{}};function Ed(h){if(!bc(h))return h.g.la();const g=ln(h.g);if(g==="")return"";let v="";const C=g.length,P=_i(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),Wn(h),"";h.h.i=new c.TextDecoder}for(let q=0;q<C;q++)h.h.h=!0,v+=h.h.i.decode(g[q],{stream:!(P&&q==C-1)});return g.length=0,h.h.g+=v,h.C=0,h.h.g}function bc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function wc(h,g){var v=h.C,C=g.indexOf(`
`,v);return C==-1?Ze:(v=Number(g.substring(v,C)),isNaN(v)?ke:(C+=1,C+v>g.length?Ze:(g=g.slice(C,C+v),h.C=C+v,g)))}fi.prototype.cancel=function(){this.K=!0,Ln(this)};function Mi(h){h.T=Date.now()+h.H,Ua(h,h.H)}function Ua(h,g){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ni(_(h.aa,h),g)}function Vi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}fi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Br(this.i,this.B),this.M!=2&&(Ri(),Le(17)),Ln(this),this.m=2,Wn(this)):Ua(this,this.T-h)};function Wn(h){h.j.I==0||h.K||Lc(h.j,h)}function Ln(h){Vi(h);var g=h.O;g&&typeof g.dispose=="function"&&g.dispose(),h.O=null,ol(h.V),h.g&&(g=h.g,h.g=null,g.abort(),g.dispose())}function xi(h,g){try{var v=h.j;if(v.I!=0&&(v.g==h||ki(v.h,h))){if(!h.L&&ki(v.h,h)&&v.I==3){try{var C=v.Ba.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var P=C;if(P[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Qa(v),Gs(v);else break t;Wr(v),Le(18)}}else v.xa=P[1],0<v.xa-v.K&&P[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ni(_(v.Va,v),6e3));Li(v.h)<=1&&v.ta&&(v.ta=void 0)}else Fi(v,11)}else if((h.L||v.g==h)&&Qa(v),!w(g))for(P=v.Ba.g.parse(g),g=0;g<P.length;g++){let Wt=P[g];const ve=Wt[0];if(!(ve<=v.K))if(v.K=ve,Wt=Wt[1],v.I==2)if(Wt[0]=="c"){v.M=Wt[1],v.ba=Wt[2];const $n=Wt[3];$n!=null&&(v.ka=$n,v.j.info("VER="+v.ka));const ji=Wt[4];ji!=null&&(v.za=ji,v.j.info("SVER="+v.za));const gi=Wt[5];gi!=null&&typeof gi=="number"&&gi>0&&(C=1.5*gi,v.O=C,v.j.info("backChannelRequestTimeoutMs_="+C)),C=v;const yi=h.g;if(yi){const Zr=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zr){var q=C.h;q.g||Zr.indexOf("spdy")==-1&&Zr.indexOf("quic")==-1&&Zr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(fl(q,q.h),q.h=null))}if(C.G){const Ya=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ya&&(C.wa=Ya,$t(C.J,C.G,Ya))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),C=v;var nt=h;if(C.na=Uc(C,C.L?C.ba:null,C.W),nt.L){dl(C.h,nt);var bt=nt,Ie=C.O;Ie&&(bt.H=Ie),bt.D&&(Vi(bt),Mi(bt)),C.g=nt}else Vc(C);v.i.length>0&&qi(v)}else Wt[0]!="stop"&&Wt[0]!="close"||Fi(v,7);else v.I==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?Fi(v,7):Sl(v):Wt[0]!="noop"&&v.l&&v.l.qa(Wt),v.A=0)}}Ri(4)}catch{}}var Pe=class{constructor(h,g){this.g=h,this.map=g}};function cl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function hl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Li(h){return h.h?1:h.g?h.g.size:0}function ki(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function fl(h,g){h.g?h.g.add(g):h.h=g}function dl(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}cl.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ml(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const v of h.g.values())g=g.concat(v.G);return g}return V(h.i)}var Rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function za(h,g){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const C=h[v].indexOf("=");let P,q=null;C>=0?(P=h[v].substring(0,C),q=h[v].substring(C+1)):P=h[v],g(P,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function kn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;h instanceof kn?(this.l=h.l,Je(this,h.j),this.o=h.o,this.g=h.g,Us(this,h.u),this.h=h.h,pl(this,Oc(h.i)),this.m=h.m):h&&(g=String(h).match(Rc))?(this.l=!1,Je(this,g[1]||"",!0),this.o=Pi(g[2]||""),this.g=Pi(g[3]||"",!0),Us(this,g[4]),this.h=Pi(g[5]||"",!0),pl(this,g[6]||"",!0),this.m=Pi(g[7]||"")):(this.l=!1,this.i=new Bs(null,this.l))}kn.prototype.toString=function(){const h=[];var g=this.j;g&&h.push(Hr(g,Ba,!0),":");var v=this.g;return(v||g=="file")&&(h.push("//"),(g=this.o)&&h.push(Hr(g,Ba,!0),"@"),h.push(ss(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Hr(v,v.charAt(0)=="/"?_l:Ic,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Hr(v,Nc)),h.join("")},kn.prototype.resolve=function(h){const g=Ue(this);let v=!!h.j;v?Je(g,h.j):v=!!h.o,v?g.o=h.o:v=!!h.g,v?g.g=h.g:v=h.u!=null;var C=h.h;if(v)Us(g,h.u);else if(v=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var P=g.h.lastIndexOf("/");P!=-1&&(C=g.h.slice(0,P+1)+C)}if(P=C,P==".."||P==".")C="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){C=P.lastIndexOf("/",0)==0,P=P.split("/");const q=[];for(let nt=0;nt<P.length;){const bt=P[nt++];bt=="."?C&&nt==P.length&&q.push(""):bt==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),C&&nt==P.length&&q.push("")):(q.push(bt),C=!0)}C=q.join("/")}else C=P}return v?g.h=C:v=h.i.toString()!=="",v?pl(g,Oc(h.i)):v=!!h.m,v&&(g.m=h.m),g};function Ue(h){return new kn(h)}function Je(h,g,v){h.j=v?Pi(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Us(h,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);h.u=g}else h.u=null}function pl(h,g,v){g instanceof Bs?(h.i=g,Fa(h.i,h.l)):(v||(g=Hr(g,zs)),h.i=new Bs(g,h.l))}function $t(h,g,v){h.i.set(g,v)}function jr(h){return $t(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Pi(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hr(h,g,v){return typeof h=="string"?(h=encodeURI(h).replace(g,An),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function An(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ba=/[#\/\?@]/g,Ic=/[#\?:]/g,_l=/[#\?]/g,zs=/[#\?@]/g,Nc=/#/g;function Bs(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Cn(h){h.g||(h.g=new Map,h.h=0,h.i&&za(h.i,function(g,v){h.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}i=Bs.prototype,i.add=function(h,g){Cn(this),this.i=null,h=qs(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(g),this.h+=1,this};function Dc(h,g){Cn(h),g=qs(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function gl(h,g){return Cn(h),g=qs(h,g),h.g.has(g)}i.forEach=function(h,g){Cn(this),this.g.forEach(function(v,C){v.forEach(function(P){h.call(g,P,C,this)},this)},this)};function yl(h,g){Cn(h);let v=[];if(typeof g=="string")gl(h,g)&&(v=v.concat(h.g.get(qs(h,g))));else for(h=Array.from(h.g.values()),g=0;g<h.length;g++)v=v.concat(h[g]);return v}i.set=function(h,g){return Cn(this),this.i=null,h=qs(this,h),gl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},i.get=function(h,g){return h?(h=yl(this,h),h.length>0?String(h[0]):g):g};function qa(h,g,v){Dc(h,g),v.length>0&&(h.i=null,h.g.set(qs(h,g),V(v)),h.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(let C=0;C<g.length;C++){var v=g[C];const P=ss(v);v=yl(this,v);for(let q=0;q<v.length;q++){let nt=P;v[q]!==""&&(nt+="="+ss(v[q])),h.push(nt)}}return this.i=h.join("&")};function Oc(h){const g=new Bs;return g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),g}function qs(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function Fa(h,g){g&&!h.j&&(Cn(h),h.i=null,h.g.forEach(function(v,C){const P=C.toLowerCase();C!=P&&(Dc(this,C),qa(this,P,v))},h)),h.j=g}function mi(h,g){const v=new hi;if(c.Image){const C=new Image;C.onload=E(Zn,v,"TestLoadImage: loaded",!0,g,C),C.onerror=E(Zn,v,"TestLoadImage: error",!1,g,C),C.onabort=E(Zn,v,"TestLoadImage: abort",!1,g,C),C.ontimeout=E(Zn,v,"TestLoadImage: timeout",!1,g,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else g(!1)}function vl(h,g){const v=new hi,C=new AbortController,P=setTimeout(()=>{C.abort(),Zn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:C.signal}).then(q=>{clearTimeout(P),q.ok?Zn(v,"TestPingServer: ok",!0,g):Zn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),Zn(v,"TestPingServer: error",!1,g)})}function Zn(h,g,v,C,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),C(v)}catch{}}function Fs(){this.g=new yc}function Ui(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ui,vc),Ui.prototype.g=function(){return new Gr(this.i,this.h)};function Gr(h,g){$.call(this),this.H=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Gr,$),i=Gr.prototype,i.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=g,this.readyState=1,pi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(g.body=h),(this.H||c).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?js(this):pi(this),this.readyState==3&&ja(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,js(this))},i.Na=function(h){this.g&&(this.response=h,js(this))},i.ga=function(){this.g&&js(this)};function js(h){h.readyState=4,h.l=null,h.j=null,h.B=null,pi(h)}i.setRequestHeader=function(h,g){this.A.append(h,g)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=g.next();return h.join(`\r
`)};function pi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Jn(h){let g="";return kt(h,function(v,C){g+=C,g+=":",g+=v,g+=`\r
`}),g}function Qr(h,g,v){t:{for(C in v){var C=!1;break t}C=!0}C||(v=Jn(v),typeof h=="string"?v!=null&&ss(v):$t(h,g,v))}function ie(h){$.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ie,$);var zi=/^https?$/i,El=["POST","PUT"];i=ie.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,g,v,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ul.g(),this.g.onreadystatechange=S(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(q){Yr(this,q);return}if(h=v||"",v=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var P in C)v.set(P,C[P]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const q of C.keys())v.set(q,C.get(q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),P=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(El,g,void 0)>=0)||C||P||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,nt]of v)this.g.setRequestHeader(q,nt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(q){Yr(this,q)}};function Yr(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.o=5,Tl(h),rs(h)}function Tl(h){h.A||(h.A=!0,ft(h,"complete"),ft(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ft(this,"complete"),ft(this,"abort"),rs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rs(this,!0)),ie.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},i.Xa=function(){Kr(this)};function Kr(h){if(h.h&&typeof u<"u"){if(h.v&&_i(h)==4)setTimeout(h.Ca.bind(h),0);else if(ft(h,"readystatechange"),_i(h)==4){h.h=!1;try{const q=h.ca();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var v;if(!(v=g)){var C;if(C=q===0){let nt=String(h.D).match(Rc)[1]||null;!nt&&c.self&&c.self.location&&(nt=c.self.location.protocol.slice(0,-1)),C=!zi.test(nt?nt.toLowerCase():"")}v=C}if(v)ft(h,"complete"),ft(h,"success");else{h.o=6;try{var P=_i(h)>2?h.g.statusText:""}catch{P=""}h.l=P+" ["+h.ca()+"]",Tl(h)}}finally{rs(h)}}}}function rs(h,g){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,g||ft(h,"ready");try{v.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function _i(h){return h.g?h.g.readyState:0}i.ca=function(){try{return _i(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),gd(g)}};function ln(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function as(h){const g={};h=(h.g&&_i(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(w(h[C]))continue;var v=Cc(h[C]);const P=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=g[P]||[];g[P]=q,q.push(v)}jt(g,function(C){return C.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(h,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||g}function Hs(h){this.za=0,this.i=[],this.j=new hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,h),this.Za=Bi("retryDelaySeedMs",1e4,h),this.Ta=Bi("forwardChannelMaxRetries",2,h),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new cl(h&&h.concurrentRequestLimit),this.Ba=new Fs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Hs.prototype,i.ka=8,i.I=1,i.connect=function(h,g,v,C){Le(0),this.W=h,this.H=g||{},v&&C!==void 0&&(this.H.OSID=v,this.H.OAID=C),this.F=this.X,this.J=Uc(this,null,this.W),qi(this)};function Sl(h){if(Ha(h),h.I==3){var g=h.V++,v=Ue(h.J);if($t(v,"SID",h.M),$t(v,"RID",g),$t(v,"TYPE","terminate"),Xr(h,v),g=new fi(h,h.j,g),g.M=2,g.A=jr(Ue(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=g.A,v=!0),v||(g.g=zc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Mi(g)}Pc(h)}function Gs(h){h.g&&(Cl(h),h.g.cancel(),h.g=null)}function Ha(h){Gs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Qa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function qi(h){if(!hl(h.h)&&!h.m){h.m=!0;var g=h.Ea;le||b(),Nt||(le(),Nt=!0),N.add(g,h),h.D=0}}function Ga(h,g){return Li(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=g.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ni(_(h.Ea,h,g),kc(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const P=new fi(this,this.j,h);let q=this.o;if(this.U&&(q?(q=M(q),tt(q,this.U)):q=this.U),this.u!==null||this.R||(P.J=q,q=null),this.S)t:{for(var g=0,v=0;v<this.i.length;v++){e:{var C=this.i[v];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(g+=C,g>4096){g=v;break t}if(g===4096||v===this.i.length-1){g=v+1;break t}}g=1e3}else g=1e3;g=Mc(this,P,g),v=Ue(this.J),$t(v,"RID",h),$t(v,"CVER",22),this.G&&$t(v,"X-HTTP-Session-Id",this.G),Xr(this,v),q&&(this.R?g="headers="+ss(Jn(q))+"&"+g:this.u&&Qr(v,this.u,q)),fl(this.h,P),this.Ra&&$t(v,"TYPE","init"),this.S?($t(v,"$req",g),$t(v,"SID","null"),P.U=!0,Oi(P,v,null)):Oi(P,v,g),this.I=2}}else this.I==3&&(h?Al(this,h):this.i.length==0||hl(this.h)||Al(this))};function Al(h,g){var v;g?v=g.l:v=h.V++;const C=Ue(h.J);$t(C,"SID",h.M),$t(C,"RID",v),$t(C,"AID",h.K),Xr(h,C),h.u&&h.o&&Qr(C,h.u,h.o),v=new fi(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),g&&(h.i=g.G.concat(h.i)),g=Mc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),fl(h.h,v),Oi(v,C,g)}function Xr(h,g){h.H&&kt(h.H,function(v,C){$t(g,C,v)}),h.l&&kt({},function(v,C){$t(g,C,v)})}function Mc(h,g,v){v=Math.min(h.i.length,v);const C=h.l?_(h.l.Ka,h.l,h):null;t:{var P=h.i;let bt=-1;for(;;){const Ie=["count="+v];bt==-1?v>0?(bt=P[0].g,Ie.push("ofs="+bt)):bt=0:Ie.push("ofs="+bt);let Wt=!0;for(let ve=0;ve<v;ve++){var q=P[ve].g;const $n=P[ve].map;if(q-=bt,q<0)bt=Math.max(0,P[ve].g-100),Wt=!1;else try{q="req"+q+"_"||"";try{var nt=$n instanceof Map?$n:Object.entries($n);for(const[ji,gi]of nt){let yi=gi;m(gi)&&(yi=Ps(gi)),Ie.push(q+ji+"="+encodeURIComponent(yi))}}catch(ji){throw Ie.push(q+"type="+encodeURIComponent("_badmap")),ji}}catch{C&&C($n)}}if(Wt){nt=Ie.join("&");break t}}nt=void 0}return h=h.i.splice(0,v),g.G=h,nt}function Vc(h){if(!h.g&&!h.v){h.Y=1;var g=h.Da;le||b(),Nt||(le(),Nt=!0),N.add(g,h),h.A=0}}function Wr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ni(_(h.Da,h),kc(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,xc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ni(_(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),Gs(this),xc(this))};function Cl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function xc(h){h.g=new fi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var g=Ue(h.na);$t(g,"RID","rpc"),$t(g,"SID",h.M),$t(g,"AID",h.K),$t(g,"CI",h.F?"0":"1"),!h.F&&h.ia&&$t(g,"TO",h.ia),$t(g,"TYPE","xmlhttp"),Xr(h,g),h.u&&h.o&&Qr(g,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=jr(Ue(g)),v.u=null,v.R=!0,Pa(v,h)}i.Va=function(){this.C!=null&&(this.C=null,Gs(this),Wr(this),Le(19))};function Qa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Lc(h,g){var v=null;if(h.g==g){Qa(h),Cl(h),h.g=null;var C=2}else if(ki(h.h,g))v=g.G,dl(h.h,g),C=1;else return;if(h.I!=0){if(g.o)if(C==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var P=h.D;C=ka(),ft(C,new Ii(C,v)),qi(h)}else Vc(h);else if(P=g.m,P==3||P==0&&g.X>0||!(C==1&&Ga(h,g)||C==2&&Wr(h)))switch(v&&v.length>0&&(g=h.h,g.i=g.i.concat(v)),P){case 1:Fi(h,5);break;case 4:Fi(h,10);break;case 3:Fi(h,6);break;default:Fi(h,2)}}}function kc(h,g){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*g}function Fi(h,g){if(h.j.info("Error code "+g),g==2){var v=_(h.bb,h),C=h.Ua;const P=!C;C=new kn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Je(C,"https"),jr(C),P?mi(C.toString(),v):vl(C.toString(),v)}else Le(2);h.I=0,h.l&&h.l.pa(g),Pc(h),Ha(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Pc(h){if(h.I=0,h.ja=[],h.l){const g=ml(h.h);(g.length!=0||h.i.length!=0)&&(F(h.ja,g),F(h.ja,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.oa()}}function Uc(h,g,v){var C=v instanceof kn?Ue(v):new kn(v);if(C.g!="")g&&(C.g=g+"."+C.g),Us(C,C.u);else{var P=c.location;C=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;const q=new kn(null);C&&Je(q,C),g&&(q.g=g),P&&Us(q,P),v&&(q.h=v),C=q}return v=h.G,g=h.wa,v&&g&&$t(C,v,g),$t(C,"VER",h.ka),Xr(h,C),C}function zc(h,g,v){if(g&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Aa&&!h.ma?new ie(new Ui({ab:v})):new ie(h.ma),g.Fa(h.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bc(){}i=Bc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Qs(){}Qs.prototype.g=function(h,g){return new En(h,g)};function En(h,g){$.call(this),this.g=new Hs(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(h?h["X-WebChannel-Client-Profile"]=g.sa:h={"X-WebChannel-Client-Profile":g.sa}),this.g.U=h,(h=g&&g.Qb)&&!w(h)&&(this.g.u=h),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new os(this)}T(En,$),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Sl(this.g)},En.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Ps(h),h=v);g.i.push(new Pe(g.Ya++,h)),g.I==3&&qi(g)},En.prototype.N=function(){this.g.l=null,delete this.j,Sl(this.g),delete this.g,En.Z.N.call(this)};function qc(h){on.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){t:{for(const v in g){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}T(qc,on);function Fc(){Xn.call(this),this.status=1}T(Fc,Xn);function os(h){this.g=h}T(os,Bc),os.prototype.ra=function(){ft(this.g,"a")},os.prototype.qa=function(h){ft(this.g,new qc(h))},os.prototype.pa=function(h){ft(this.g,new Fc)},os.prototype.oa=function(){ft(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,n1=function(){return new Qs},e1=function(){return ka()},t1=Re,Yp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,tf=qr,ll.COMPLETE="complete",$S=ll,Ec.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",$.prototype.listen=$.prototype.J,mu=Ec,ie.prototype.listenOnce=ie.prototype.K,ie.prototype.getLastError=ie.prototype.Ha,ie.prototype.getLastErrorCode=ie.prototype.ya,ie.prototype.getStatus=ie.prototype.ca,ie.prototype.getResponseJson=ie.prototype.La,ie.prototype.getResponseText=ie.prototype.la,ie.prototype.send=ie.prototype.ea,ie.prototype.setWithCredentials=ie.prototype.Fa,JS=ie}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const GT="@firebase/firestore",QT="4.9.2";class yn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let Wo="12.3.0";const Ta=new M_("@firebase/firestore");function bo(){return Ta.logLevel}function lt(i,...t){if(Ta.logLevel<=Ft.DEBUG){const e=t.map(x_);Ta.debug(`Firestore (${Wo}): ${i}`,...e)}}function Is(i,...t){if(Ta.logLevel<=Ft.ERROR){const e=t.map(x_);Ta.error(`Firestore (${Wo}): ${i}`,...e)}}function Uo(i,...t){if(Ta.logLevel<=Ft.WARN){const e=t.map(x_);Ta.warn(`Firestore (${Wo}): ${i}`,...e)}}function x_(i){if(typeof i=="string")return i;try{return(function(e){return JSON.stringify(e)})(i)}catch{return i}}function yt(i,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,i1(i,r,e)}function i1(i,t,e){let r=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Is(r),new Error(r)}function Gt(i,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,i||i1(t,o,r)}function At(i,t){return i}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Xo{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class s1{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(yn.UNAUTHENTICATED)))}shutdown(){}}class mI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class pI{constructor(t){this.t=t,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Gt(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,e(p)):Promise.resolve();let u=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new bs,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=u;t.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new bs)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Gt(typeof r.accessToken=="string",31837,{l:r}),new s1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string",2055,{h:t}),new yn(t)}}class _I{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gI{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new _I(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class YT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yI{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,GS(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Gt(this.o===void 0,3512);const r=u=>{u.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,lt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new YT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Gt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new YT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vI(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<i;r++)e[r]=Math.floor(256*Math.random());return e}class L_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=vI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function zt(i,t){return i<t?-1:i>t?1:0}function Kp(i,t){const e=Math.min(i.length,t.length);for(let r=0;r<e;r++){const o=i.charAt(r),u=t.charAt(r);if(o!==u)return Cp(o)===Cp(u)?zt(o,u):Cp(o)?1:-1}return zt(i.length,t.length)}const EI=55296,TI=57343;function Cp(i){const t=i.charCodeAt(0);return t>=EI&&t<=TI}function zo(i,t,e){return i.length===t.length&&i.every(((r,o)=>e(r,t[o])))}const KT="__name__";class Ki{constructor(t,e,r){e===void 0?e=0:e>t.length&&yt(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&yt(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Ki.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ki?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=Ki.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return zt(t.length,e.length)}static compareSegments(t,e){const r=Ki.isNumericId(t),o=Ki.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?Ki.extractNumericId(t).compare(Ki.extractNumericId(e)):Kp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Tr.fromString(t.substring(4,t.length-2))}}class oe extends Ki{construct(t,e,r){return new oe(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new st(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new oe(e)}static emptyPath(){return new oe([])}}const SI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Ki{construct(t,e,r){return new mn(t,e,r)}static isValidIdentifier(t){return SI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KT}static keyField(){return new mn([KT])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new st(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new st(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new st(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=p,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new st(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new mn(e)}static emptyPath(){return new mn([])}}class mt{constructor(t){this.path=t}static fromPath(t){return new mt(oe.fromString(t))}static fromName(t){return new mt(oe.fromString(t).popFirst(5))}static empty(){return new mt(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return oe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new oe(t.slice()))}}function r1(i,t,e){if(!e)throw new st(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function AI(i,t,e,r){if(t===!0&&r===!0)throw new st(Q.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function XT(i){if(!mt.isDocumentKey(i))throw new st(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function WT(i){if(mt.isDocumentKey(i))throw new st(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function a1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ff(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":yt(12329,{type:typeof i})}function Vn(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new st(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Ff(i);throw new st(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function Qe(i,t){const e={typeString:i};return t&&(e.value=t),e}function $u(i,t){if(!a1(i))throw new st(Q.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in i)){e=`JSON missing required field: '${r}'`;break}const c=i[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new st(Q.INVALID_ARGUMENT,e);return!0}const ZT=-62135596800,JT=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(t){return ye.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*JT);return new ye(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new st(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new st(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<ZT)throw new st(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new st(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JT}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($u(t,ye._jsonSchema))return new ye(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ZT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:Qe("string",ye._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};class Tt{static fromTimestamp(t){return new Tt(t)}static min(){return new Tt(new ye(0,0))}static max(){return new Tt(new ye(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mu=-1;function CI(i,t){const e=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Tt.fromTimestamp(r===1e9?new ye(e+1,0):new ye(e,r));return new wr(o,mt.empty(),t)}function bI(i){return new wr(i.readTime,i.key,Mu)}class wr{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new wr(Tt.min(),mt.empty(),Mu)}static max(){return new wr(Tt.max(),mt.empty(),Mu)}}function wI(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=mt.comparator(i.documentKey,t.documentKey),e!==0?e:zt(i.largestBatchId,t.largestBatchId))}const RI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class II{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Zo(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==RI)throw i;lt("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Z(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Z?e:Z.resolve(e)}catch(e){return Z.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Z.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Z.reject(e)}static resolve(t){return new Z(((e,r)=>{e(t)}))}static reject(t){return new Z(((e,r)=>{r(t)}))}static waitFor(t){return new Z(((e,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(p=>r(p)))})),c=!0,u===o&&e()}))}static or(t){let e=Z.resolve(!1);for(const r of t)e=e.next((o=>o?Z.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new Z(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let p=0;p<u;p++){const _=p;e(t[_]).next((E=>{c[_]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(t,e){return new Z(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}function NI(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Jo(i){return i.name==="IndexedDbTransactionError"}class jf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}jf.ce=-1;const k_=-1;function tc(i){return i==null}function ff(i){return i===0&&1/i==-1/0}function DI(i){return typeof i=="number"&&Number.isInteger(i)&&!ff(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const o1="";function OI(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=$T(t)),t=MI(i.get(e),t);return $T(t)}function MI(i,t){let e=t;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":e+="";break;case o1:e+="";break;default:e+=u}}return e}function $T(i){return i+o1+""}function t0(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Lr(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function l1(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}let Ke=class Xp{constructor(t,e){this.comparator=t,this.root=e||Sr.EMPTY}insert(t,e){return new Xp(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(t){return new Xp(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yh(this.root,t,this.comparator,!0)}},Yh=class{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Sr=class As{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??As.RED,this.left=o??As.EMPTY,this.right=u??As.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new As(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return As.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}};Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Sr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class We{constructor(t){this.comparator=t,this.data=new Ke(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new e0(this.data.getIterator())}getIteratorFrom(t){return new e0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof We)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new We(this.comparator);return e.data=t,e}}class e0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gn{constructor(t){this.fields=t,t.sort(mn.comparator)}static empty(){return new Gn([])}unionWith(t){let e=new We(mn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Gn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return zo(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}class u1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new u1("Invalid base64 string: "+u):u}})(t);return new pn(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new pn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const VI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(i){if(Gt(!!i,39018),typeof i=="string"){let t=0;const e=VI.exec(i);if(Gt(!!e,46558,{timestamp:i}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Oe(i.seconds),nanos:Oe(i.nanos)}}function Oe(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ir(i){return typeof i=="string"?pn.fromBase64String(i):pn.fromUint8Array(i)}const c1="server_timestamp",h1="__type__",f1="__previous_value__",d1="__local_write_time__";function P_(i){return(i?.mapValue?.fields||{})[h1]?.stringValue===c1}function Hf(i){const t=i.mapValue.fields[f1];return P_(t)?Hf(t):t}function Vu(i){const t=Rr(i.mapValue.fields[d1].timestampValue);return new ye(t.seconds,t.nanos)}class xI{constructor(t,e,r,o,u,c,m,p,_,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=E}}const df="(default)";class xu{constructor(t,e){this.projectId=t,this.database=e||df}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===df}isEqual(t){return t instanceof xu&&t.projectId===this.projectId&&t.database===this.database}}const m1="__type__",LI="__max__",Kh={mapValue:{}},p1="__vector__",mf="value";function Nr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?P_(i)?4:PI(i)?9007199254740991:kI(i)?10:11:yt(28295,{value:i})}function $i(i,t){if(i===t)return!0;const e=Nr(i);if(e!==Nr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Vu(i).isEqual(Vu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Rr(o.timestampValue),m=Rr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(o,u){return Ir(o.bytesValue).isEqual(Ir(u.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(o,u){return Oe(o.geoPointValue.latitude)===Oe(u.geoPointValue.latitude)&&Oe(o.geoPointValue.longitude)===Oe(u.geoPointValue.longitude)})(i,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Oe(o.integerValue)===Oe(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=Oe(o.doubleValue),m=Oe(u.doubleValue);return c===m?ff(c)===ff(m):isNaN(c)&&isNaN(m)}return!1})(i,t);case 9:return zo(i.arrayValue.values||[],t.arrayValue.values||[],$i);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(t0(c)!==t0(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!$i(c[p],m[p])))return!1;return!0})(i,t);default:return yt(52216,{left:i})}}function Lu(i,t){return(i.values||[]).find((e=>$i(e,t)))!==void 0}function Bo(i,t){if(i===t)return 0;const e=Nr(i),r=Nr(t);if(e!==r)return zt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return zt(i.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=Oe(u.integerValue||u.doubleValue),p=Oe(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,t);case 3:return n0(i.timestampValue,t.timestampValue);case 4:return n0(Vu(i),Vu(t));case 5:return Kp(i.stringValue,t.stringValue);case 6:return(function(u,c){const m=Ir(u),p=Ir(c);return m.compareTo(p)})(i.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),p=c.split("/");for(let _=0;_<m.length&&_<p.length;_++){const E=zt(m[_],p[_]);if(E!==0)return E}return zt(m.length,p.length)})(i.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=zt(Oe(u.latitude),Oe(c.latitude));return m!==0?m:zt(Oe(u.longitude),Oe(c.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return i0(i.arrayValue,t.arrayValue);case 10:return(function(u,c){const m=u.fields||{},p=c.fields||{},_=m[mf]?.arrayValue,E=p[mf]?.arrayValue,T=zt(_?.values?.length||0,E?.values?.length||0);return T!==0?T:i0(_,E)})(i.mapValue,t.mapValue);case 11:return(function(u,c){if(u===Kh.mapValue&&c===Kh.mapValue)return 0;if(u===Kh.mapValue)return 1;if(c===Kh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),_=c.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const S=Kp(p[T],E[T]);if(S!==0)return S;const V=Bo(m[p[T]],_[E[T]]);if(V!==0)return V}return zt(p.length,E.length)})(i.mapValue,t.mapValue);default:throw yt(23264,{he:e})}}function n0(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return zt(i,t);const e=Rr(i),r=Rr(t),o=zt(e.seconds,r.seconds);return o!==0?o:zt(e.nanos,r.nanos)}function i0(i,t){const e=i.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=Bo(e[o],r[o]);if(u)return u}return zt(e.length,r.length)}function qo(i){return Wp(i)}function Wp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const r=Rr(e);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return Ir(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return mt.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Wp(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Wp(e.fields[c])}`;return o+"}"})(i.mapValue):yt(61005,{value:i})}function ef(i){switch(Nr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hf(i);return t?16+ef(t):16;case 5:return 2*i.stringValue.length;case 6:return Ir(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+ef(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Lr(r.fields,((u,c)=>{o+=u.length+ef(c)})),o})(i.mapValue);default:throw yt(13486,{value:i})}}function s0(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function Zp(i){return!!i&&"integerValue"in i}function U_(i){return!!i&&"arrayValue"in i}function r0(i){return!!i&&"nullValue"in i}function a0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function nf(i){return!!i&&"mapValue"in i}function kI(i){return(i?.mapValue?.fields||{})[m1]?.stringValue===p1}function yu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Lr(i.mapValue.fields,((e,r)=>t.mapValue.fields[e]=yu(r))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=yu(i.arrayValue.values[e]);return t}return{...i}}function PI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===LI}class Sn{constructor(t){this.value=t}static empty(){return new Sn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!nf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=yu(e)}setAll(t){let e=mn.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const p=this.getFieldsMap(e);this.applyChanges(p,r,o),r={},o=[],e=m.popLast()}c?r[m.lastSegment()]=yu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());nf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return $i(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];nf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){Lr(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new Sn(yu(this.value))}}function _1(i){const t=[];return Lr(i.fields,((e,r)=>{const o=new mn([e]);if(nf(r)){const u=_1(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new Gn(t)}class rn{constructor(t,e,r,o,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new rn(t,0,Tt.min(),Tt.min(),Tt.min(),Sn.empty(),0)}static newFoundDocument(t,e,r,o){return new rn(t,1,e,Tt.min(),r,o,0)}static newNoDocument(t,e){return new rn(t,2,e,Tt.min(),Tt.min(),Sn.empty(),0)}static newUnknownDocument(t,e){return new rn(t,3,e,Tt.min(),Tt.min(),Sn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pf{constructor(t,e){this.position=t,this.inclusive=e}}function o0(i,t,e){let r=0;for(let o=0;o<i.position.length;o++){const u=t[o],c=i.position[o];if(u.field.isKeyField()?r=mt.comparator(mt.fromName(c.referenceValue),e.key):r=Bo(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function l0(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!$i(i.position[e],t.position[e]))return!1;return!0}class ku{constructor(t,e="asc"){this.field=t,this.dir=e}}function UI(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class g1{}class He extends g1{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new BI(t,e,r):e==="array-contains"?new jI(t,r):e==="in"?new HI(t,r):e==="not-in"?new GI(t,r):e==="array-contains-any"?new QI(t,r):new He(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new qI(t,r):new FI(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Bo(e,this.value)):e!==null&&Nr(this.value)===Nr(e)&&this.matchesComparison(Bo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends g1{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new bi(t,e)}matches(t){return y1(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function y1(i){return i.op==="and"}function v1(i){return zI(i)&&y1(i)}function zI(i){for(const t of i.filters)if(t instanceof bi)return!1;return!0}function Jp(i){if(i instanceof He)return i.field.canonicalString()+i.op.toString()+qo(i.value);if(v1(i))return i.filters.map((t=>Jp(t))).join(",");{const t=i.filters.map((e=>Jp(e))).join(",");return`${i.op}(${t})`}}function E1(i,t){return i instanceof He?(function(r,o){return o instanceof He&&r.op===o.op&&r.field.isEqual(o.field)&&$i(r.value,o.value)})(i,t):i instanceof bi?(function(r,o){return o instanceof bi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&E1(c,o.filters[m])),!0):!1})(i,t):void yt(19439)}function T1(i){return i instanceof He?(function(e){return`${e.field.canonicalString()} ${e.op} ${qo(e.value)}`})(i):i instanceof bi?(function(e){return e.op.toString()+" {"+e.getFilters().map(T1).join(" ,")+"}"})(i):"Filter"}class BI extends He{constructor(t,e,r){super(t,e,r),this.key=mt.fromName(r.referenceValue)}matches(t){const e=mt.comparator(t.key,this.key);return this.matchesComparison(e)}}class qI extends He{constructor(t,e){super(t,"in",e),this.keys=S1("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class FI extends He{constructor(t,e){super(t,"not-in",e),this.keys=S1("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function S1(i,t){return(t.arrayValue?.values||[]).map((e=>mt.fromName(e.referenceValue)))}class jI extends He{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return U_(e)&&Lu(e.arrayValue,this.value)}}class HI extends He{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Lu(this.value.arrayValue,e)}}class GI extends He{constructor(t,e){super(t,"not-in",e)}matches(t){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Lu(this.value.arrayValue,e)}}class QI extends He{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!U_(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Lu(this.value.arrayValue,r)))}}class YI{constructor(t,e=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function u0(i,t=null,e=[],r=[],o=null,u=null,c=null){return new YI(i,t,e,r,o,u,c)}function z_(i){const t=At(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Jp(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),tc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>qo(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>qo(r))).join(",")),t.Te=e}return t.Te}function B_(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!UI(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!E1(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!l0(i.startAt,t.startAt)&&l0(i.endAt,t.endAt)}function $p(i){return mt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class $o{constructor(t,e=null,r=[],o=[],u=null,c="F",m=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KI(i,t,e,r,o,u,c,m){return new $o(i,t,e,r,o,u,c,m)}function q_(i){return new $o(i)}function c0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function A1(i){return i.collectionGroup!==null}function vu(i){const t=At(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new We(mn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new ku(u,r))})),e.has(mn.keyField().canonicalString())||t.Ie.push(new ku(mn.keyField(),r))}return t.Ie}function Wi(i){const t=At(i);return t.Ee||(t.Ee=XI(t,vu(i))),t.Ee}function XI(i,t){if(i.limitType==="F")return u0(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ku(o.field,u)}));const e=i.endAt?new pf(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new pf(i.startAt.position,i.startAt.inclusive):null;return u0(i.path,i.collectionGroup,t,i.filters,i.limit,e,r)}}function t_(i,t){const e=i.filters.concat([t]);return new $o(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function _f(i,t,e){return new $o(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Gf(i,t){return B_(Wi(i),Wi(t))&&i.limitType===t.limitType}function C1(i){return`${z_(Wi(i))}|lt:${i.limitType}`}function wo(i){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>T1(o))).join(", ")}]`),tc(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>qo(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>qo(o))).join(",")),`Target(${r})`})(Wi(i))}; limitType=${i.limitType})`}function Qf(i,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):mt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,t)&&(function(r,o){for(const u of vu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(i,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,p){const _=o0(c,m,p);return c.inclusive?_<=0:_<0})(r.startAt,vu(r),o)||r.endAt&&!(function(c,m,p){const _=o0(c,m,p);return c.inclusive?_>=0:_>0})(r.endAt,vu(r),o))})(i,t)}function WI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function b1(i){return(t,e)=>{let r=!1;for(const o of vu(i)){const u=ZI(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function ZI(i,t,e){const r=i.field.isKeyField()?mt.comparator(t.key,e.key):(function(u,c,m){const p=c.data.field(u),_=m.data.field(u);return p!==null&&_!==null?Bo(p,_):yt(42886)})(i.field,t,e);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return yt(19790,{direction:i.dir})}}class Na{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Lr(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return l1(this.inner)}size(){return this.innerSize}}const JI=new Ke(mt.comparator);function Ns(){return JI}const w1=new Ke(mt.comparator);function pu(...i){let t=w1;for(const e of i)t=t.insert(e.key,e);return t}function R1(i){let t=w1;return i.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function pa(){return Eu()}function I1(){return Eu()}function Eu(){return new Na((i=>i.toString()),((i,t)=>i.isEqual(t)))}const $I=new Ke(mt.comparator),t2=new We(mt.comparator);function Bt(...i){let t=t2;for(const e of i)t=t.add(e);return t}const e2=new We(zt);function n2(){return e2}function F_(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ff(t)?"-0":t}}function N1(i){return{integerValue:""+i}}function i2(i,t){return DI(t)?N1(t):F_(i,t)}class Yf{constructor(){this._=void 0}}function s2(i,t,e){return i instanceof gf?(function(o,u){const c={fields:{[h1]:{stringValue:c1},[d1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&P_(u)&&(u=Hf(u)),u&&(c.fields[f1]=u),{mapValue:c}})(e,t):i instanceof Pu?O1(i,t):i instanceof Uu?M1(i,t):(function(o,u){const c=D1(o,u),m=h0(c)+h0(o.Ae);return Zp(c)&&Zp(o.Ae)?N1(m):F_(o.serializer,m)})(i,t)}function r2(i,t,e){return i instanceof Pu?O1(i,t):i instanceof Uu?M1(i,t):e}function D1(i,t){return i instanceof yf?(function(r){return Zp(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class gf extends Yf{}class Pu extends Yf{constructor(t){super(),this.elements=t}}function O1(i,t){const e=V1(t);for(const r of i.elements)e.some((o=>$i(o,r)))||e.push(r);return{arrayValue:{values:e}}}class Uu extends Yf{constructor(t){super(),this.elements=t}}function M1(i,t){let e=V1(t);for(const r of i.elements)e=e.filter((o=>!$i(o,r)));return{arrayValue:{values:e}}}class yf extends Yf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function h0(i){return Oe(i.integerValue||i.doubleValue)}function V1(i){return U_(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function a2(i,t){return i.field.isEqual(t.field)&&(function(r,o){return r instanceof Pu&&o instanceof Pu||r instanceof Uu&&o instanceof Uu?zo(r.elements,o.elements,$i):r instanceof yf&&o instanceof yf?$i(r.Ae,o.Ae):r instanceof gf&&o instanceof gf})(i.transform,t.transform)}class o2{constructor(t,e){this.version=t,this.transformResults=e}}class Ge{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ge}static exists(t){return new Ge(void 0,t)}static updateTime(t){return new Ge(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function sf(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Kf{}function x1(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new nc(i.key,Ge.none()):new ec(i.key,i.data,Ge.none());{const e=i.data,r=Sn.empty();let o=new We(mn.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new kr(i.key,r,new Gn(o.toArray()),Ge.none())}}function l2(i,t,e){i instanceof ec?(function(o,u,c){const m=o.value.clone(),p=d0(o.fieldTransforms,u,c.transformResults);m.setAll(p),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,t,e):i instanceof kr?(function(o,u,c){if(!sf(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=d0(o.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(L1(o)),p.setAll(m),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Tu(i,t,e,r){return i instanceof ec?(function(u,c,m,p){if(!sf(u.precondition,c))return m;const _=u.value.clone(),E=m0(u.fieldTransforms,p,c);return _.setAll(E),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),null})(i,t,e,r):i instanceof kr?(function(u,c,m,p){if(!sf(u.precondition,c))return m;const _=m0(u.fieldTransforms,p,c),E=c.data;return E.setAll(L1(u)),E.setAll(_),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,t,e,r):(function(u,c,m){return sf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(i,t,e)}function u2(i,t){let e=null;for(const r of i.fieldTransforms){const o=t.data.field(r.field),u=D1(r.transform,o||null);u!=null&&(e===null&&(e=Sn.empty()),e.set(r.field,u))}return e||null}function f0(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&zo(r,o,((u,c)=>a2(u,c)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class ec extends Kf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class kr extends Kf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function L1(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=i.data.field(e);t.set(e,r)}})),t}function d0(i,t,e){const r=new Map;Gt(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let o=0;o<e.length;o++){const u=i[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,r2(c,m,e[o]))}return r}function m0(i,t,e){const r=new Map;for(const o of i){const u=o.transform,c=e.data.field(o.field);r.set(o.field,s2(u,c,t))}return r}class nc extends Kf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k1 extends Kf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class c2{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&l2(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Tu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Tu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=I1();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const p=x1(c,m);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Tt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Bt())}isEqual(t){return this.batchId===t.batchId&&zo(this.mutations,t.mutations,((e,r)=>f0(e,r)))&&zo(this.baseMutations,t.baseMutations,((e,r)=>f0(e,r)))}}class j_{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){Gt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return $I})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new j_(t,e,r,o)}}class h2{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class f2{constructor(t,e){this.count=t,this.unchangedNames=e}}var je,Ht;function P1(i){switch(i){case Q.OK:return yt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return yt(15467,{code:i})}}function U1(i){if(i===void 0)return Is("GRPC error has no .code"),Q.UNKNOWN;switch(i){case je.OK:return Q.OK;case je.CANCELLED:return Q.CANCELLED;case je.UNKNOWN:return Q.UNKNOWN;case je.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case je.INTERNAL:return Q.INTERNAL;case je.UNAVAILABLE:return Q.UNAVAILABLE;case je.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case je.NOT_FOUND:return Q.NOT_FOUND;case je.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case je.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case je.ABORTED:return Q.ABORTED;case je.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case je.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case je.DATA_LOSS:return Q.DATA_LOSS;default:return yt(39323,{code:i})}}(Ht=je||(je={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";function d2(){return new TextEncoder}const m2=new Tr([4294967295,4294967295],0);function p0(i){const t=d2().encode(i),e=new ZS;return e.update(t),new Uint8Array(e.digest())}function _0(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Tr([e,r],0),new Tr([o,u],0)]}class H_{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new _u(`Invalid padding: ${e}`);if(r<0)throw new _u(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new _u(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Tr.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(Tr.fromNumber(r)));return o.compare(m2)===1&&(o=new Tr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=p0(t),[r,o]=_0(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new H_(u,o,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=p0(t),[r,o]=_0(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xf{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,ic.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Xf(Tt.min(),o,new Ke(zt),Ns(),Bt())}}class ic{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new ic(r,e,Bt(),Bt(),Bt())}}class rf{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class z1{constructor(t,e){this.targetId=t,this.Ce=e}}class B1{constructor(t,e,r=pn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class g0{constructor(){this.ve=0,this.Fe=y0(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bt(),e=Bt(),r=Bt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:yt(38017,{changeType:u})}})),new ic(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=y0()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ns(),this.Je=Xh(),this.He=Xh(),this.Ye=new Ke(zt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if($p(u))if(r===0){const c=new mt(u.path);this.et(e,c,rn.newNoDocument(c,Tt.min()))}else Gt(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),p=m?this.ct(m,t,c):1;if(p!==0){this.it(e);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,_)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=Ir(r).toUint8Array()}catch(p){if(p instanceof u1)return Uo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new H_(c,o,u)}catch(p){return Uo(p instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&$p(m.target)){const p=new mt(m.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,rn.newNoDocument(p,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=Bt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((p=>{const _=this.ot(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new Xf(t,e,this.Ye,this.je,r);return this.je=Ns(),this.Je=Xh(),this.He=Xh(),this.Ye=new Ke(zt),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new g0,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new We(zt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new We(zt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||lt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new g0),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Xh(){return new Ke(mt.comparator)}function y0(){return new Ke(mt.comparator)}const _2={asc:"ASCENDING",desc:"DESCENDING"},g2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y2={and:"AND",or:"OR"};class v2{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function e_(i,t){return i.useProto3Json||tc(t)?t:{value:t}}function vf(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function q1(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function E2(i,t){return vf(i,t.toTimestamp())}function Qn(i){return Gt(!!i,49232),Tt.fromTimestamp((function(e){const r=Rr(e);return new ye(r.seconds,r.nanos)})(i))}function G_(i,t){return n_(i,t).canonicalString()}function n_(i,t){const e=(function(o){return new oe(["projects",o.projectId,"databases",o.database])})(i).child("documents");return t===void 0?e:e.child(t)}function F1(i){const t=oe.fromString(i);return Gt(K1(t),10190,{key:t.toString()}),t}function Ef(i,t){return G_(i.databaseId,t.path)}function Su(i,t){const e=F1(t);if(e.get(1)!==i.databaseId.projectId)throw new st(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new st(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new mt(H1(e))}function j1(i,t){return G_(i.databaseId,t)}function T2(i){const t=F1(i);return t.length===4?oe.emptyPath():H1(t)}function i_(i){return new oe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function H1(i){return Gt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function v0(i,t,e){return{name:Ef(i,t),fields:e.value.mapValue.fields}}function S2(i,t){return"found"in t?(function(r,o){Gt(!!o.found,43571),o.found.name,o.found.updateTime;const u=Su(r,o.found.name),c=Qn(o.found.updateTime),m=o.found.createTime?Qn(o.found.createTime):Tt.min(),p=new Sn({mapValue:{fields:o.found.fields}});return rn.newFoundDocument(u,c,m,p)})(i,t):"missing"in t?(function(r,o){Gt(!!o.missing,3894),Gt(!!o.readTime,22933);const u=Su(r,o.missing),c=Qn(o.readTime);return rn.newNoDocument(u,c)})(i,t):yt(7234,{result:t})}function A2(i,t){let e;if("targetChange"in t){t.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:yt(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(_,E){return _.useProto3Json?(Gt(E===void 0||typeof E=="string",58123),pn.fromBase64String(E||"")):(Gt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),pn.fromUint8Array(E||new Uint8Array))})(i,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(_){const E=_.code===void 0?Q.UNKNOWN:U1(_.code);return new st(E,_.message||"")})(c);e=new B1(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Su(i,r.document.name),u=Qn(r.document.updateTime),c=r.document.createTime?Qn(r.document.createTime):Tt.min(),m=new Sn({mapValue:{fields:r.document.fields}}),p=rn.newFoundDocument(o,u,c,m),_=r.targetIds||[],E=r.removedTargetIds||[];e=new rf(_,E,p.key,p)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Su(i,r.document),u=r.readTime?Qn(r.readTime):Tt.min(),c=rn.newNoDocument(o,u),m=r.removedTargetIds||[];e=new rf([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Su(i,r.document),u=r.removedTargetIds||[];e=new rf([],u,o,null)}else{if(!("filter"in t))return yt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new f2(o,u),m=r.targetId;e=new z1(m,c)}}return e}function G1(i,t){let e;if(t instanceof ec)e={update:v0(i,t.key,t.value)};else if(t instanceof nc)e={delete:Ef(i,t.key)};else if(t instanceof kr)e={update:v0(i,t.key,t.data),updateMask:M2(t.fieldMask)};else{if(!(t instanceof k1))return yt(16599,{Vt:t.type});e={verify:Ef(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof gf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Pu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof yf)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw yt(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:E2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:yt(27497)})(i,t.precondition)),e}function C2(i,t){return i&&i.length>0?(Gt(t!==void 0,14353),i.map((e=>(function(o,u){let c=o.updateTime?Qn(o.updateTime):Qn(u);return c.isEqual(Tt.min())&&(c=Qn(u)),new o2(c,o.transformResults||[])})(e,t)))):[]}function b2(i,t){return{documents:[j1(i,t.path)]}}function w2(i,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=j1(i,o);const u=(function(_){if(_.length!==0)return Y1(bi.create(_,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(_){if(_.length!==0)return _.map((E=>(function(S){return{field:Ro(S.field),direction:N2(S.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=e_(i,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:e,parent:o}}function R2(i){let t=T2(i.parent);const e=i.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){Gt(r===1,65062);const E=e.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=(function(T){const S=Q1(T);return S instanceof bi&&v1(S)?S.getFilters():[S]})(e.where));let c=[];e.orderBy&&(c=(function(T){return T.map((S=>(function(F){return new ku(Io(F.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(S)))})(e.orderBy));let m=null;e.limit&&(m=(function(T){let S;return S=typeof T=="object"?T.value:T,tc(S)?null:S})(e.limit));let p=null;e.startAt&&(p=(function(T){const S=!!T.before,V=T.values||[];return new pf(V,S)})(e.startAt));let _=null;return e.endAt&&(_=(function(T){const S=!T.before,V=T.values||[];return new pf(V,S)})(e.endAt)),KI(t,o,c,u,m,"F",p,_)}function I2(i,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Q1(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Io(e.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(e.unaryFilter.field);return He.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Io(e.unaryFilter.field);return He.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Io(e.unaryFilter.field);return He.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(i):i.fieldFilter!==void 0?(function(e){return He.create(Io(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return bi.create(e.compositeFilter.filters.map((r=>Q1(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(e.compositeFilter.op))})(i):yt(30097,{filter:i})}function N2(i){return _2[i]}function D2(i){return g2[i]}function O2(i){return y2[i]}function Ro(i){return{fieldPath:i.canonicalString()}}function Io(i){return mn.fromServerFormat(i.fieldPath)}function Y1(i){return i instanceof He?(function(e){if(e.op==="=="){if(a0(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NAN"}};if(r0(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(a0(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NAN"}};if(r0(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(e.field),op:D2(e.op),value:e.value}}})(i):i instanceof bi?(function(e){const r=e.getFilters().map((o=>Y1(o)));return r.length===1?r[0]:{compositeFilter:{op:O2(e.op),filters:r}}})(i):yt(54877,{filter:i})}function M2(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function K1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class _r{constructor(t,e,r,o,u=Tt.min(),c=Tt.min(),m=pn.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new _r(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class V2{constructor(t){this.yt=t}}function x2(i){const t=R2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?_f(t,t.limit,"L"):t}class L2{constructor(){this.Cn=new k2}addToCollectionParentIndex(t,e){return this.Cn.add(e),Z.resolve()}getCollectionParents(t,e){return Z.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Z.resolve()}deleteFieldIndex(t,e){return Z.resolve()}deleteAllFieldIndexes(t){return Z.resolve()}createTargetIndexes(t,e){return Z.resolve()}getDocumentsMatchingTarget(t,e){return Z.resolve(null)}getIndexType(t,e){return Z.resolve(0)}getFieldIndexes(t,e){return Z.resolve([])}getNextCollectionGroupToUpdate(t){return Z.resolve(null)}getMinOffset(t,e){return Z.resolve(wr.min())}getMinOffsetFromCollectionGroup(t,e){return Z.resolve(wr.min())}updateCollectionGroup(t,e,r){return Z.resolve()}updateIndexEntries(t,e){return Z.resolve()}}class k2{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new We(oe.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new We(oe.comparator)).toArray()}}const E0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X1=41943040;class Dn{static withCacheSize(t){return new Dn(t,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(X1,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);class Fo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Fo(0)}static cr(){return new Fo(-1)}}const T0="LruGarbageCollector",P2=1048576;function S0([i,t],[e,r]){const o=zt(i,e);return o===0?zt(t,r):o}class U2{constructor(t){this.Ir=t,this.buffer=new We(S0),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();S0(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class z2{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lt(T0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Jo(e)?lt(T0,"Ignoring IndexedDB error during garbage collection: ",e):await Zo(e)}await this.Vr(3e5)}))}}class B2{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return Z.resolve(jf.ce);const r=new U2(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(E0)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E0):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,m,p,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(r=T,m=Date.now(),this.removeTargets(t,r,e)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(t,r)))).next((T=>(_=Date.now(),bo()<=Ft.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(_-p)+`ms
Total Duration: ${_-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function q2(i,t){return new B2(i,t)}class F2{constructor(){this.changes=new Na((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,rn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?Z.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class j2{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class H2{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&Tu(r.mutation,o,Gn.empty(),ye.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Bt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Bt()){const o=pa();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=pu();return u.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=pa();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Bt())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,o){let u=Ns();const c=Eu(),m=(function(){return Eu()})();return e.forEach(((p,_)=>{const E=r.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof kr)?u=u.insert(_.key,_):E!==void 0?(c.set(_.key,E.mutation.getFieldMask()),Tu(E.mutation,_,E.mutation.getFieldMask(),ye.now())):c.set(_.key,Gn.empty())})),this.recalculateAndSaveOverlays(t,u).next((p=>(p.forEach(((_,E)=>c.set(_,E))),e.forEach(((_,E)=>m.set(_,new j2(E,c.get(_)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Eu();let o=new Ke(((c,m)=>c-m)),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((p=>{const _=e.get(p);if(_===null)return;let E=r.get(p)||Gn.empty();E=m.applyToLocalView(_,E),r.set(p,E);const T=(o.get(m.batchId)||Bt()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),_=p.key,E=p.value,T=I1();E.forEach((S=>{if(!u.has(S)){const V=x1(e.get(S),r.get(S));V!==null&&T.set(S,V),u=u.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(t,_,T))}return Z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return mt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):A1(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):Z.resolve(pa());let m=Mu,p=u;return c.next((_=>Z.forEach(_,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{p=p.insert(E,S)}))))).next((()=>this.populateOverlays(t,_,u))).next((()=>this.computeViews(t,p,_,Bt()))).next((E=>({batchId:m,changes:R1(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new mt(e)).next((r=>{let o=pu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=pu();return this.indexManager.getCollectionParents(t,u).next((m=>Z.forEach(m,(p=>{const _=(function(T,S){return new $o(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(e,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,o).next((E=>{E.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((p,_)=>{const E=_.getKey();c.get(E)===null&&(c=c.insert(E,rn.newInvalidDocument(E)))}));let m=pu();return c.forEach(((p,_)=>{const E=u.get(p);E!==void 0&&Tu(E.mutation,_,Gn.empty(),ye.now()),Qf(e,_)&&(m=m.insert(p,_))})),m}))}}class G2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Z.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:Qn(o.createTime)}})(e)),Z.resolve()}getNamedQuery(t,e){return Z.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:x2(o.bundledQuery),readTime:Qn(o.readTime)}})(e)),Z.resolve()}}class Q2{constructor(){this.overlays=new Ke(mt.comparator),this.qr=new Map}getOverlay(t,e){return Z.resolve(this.overlays.get(e))}getOverlays(t,e){const r=pa();return Z.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),Z.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(t,e,r){const o=pa(),u=e.length+1,c=new mt(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new Ke(((_,E)=>_-E));const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>r){let E=u.get(_.largestBatchId);E===null&&(E=pa(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=pa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((_,E)=>m.set(_,E))),!(m.size()>=o)););return Z.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new h2(e,r));let u=this.qr.get(e);u===void 0&&(u=Bt(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}class Y2{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(t){return Z.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Z.resolve()}}class Q_{constructor(){this.Qr=new We(en.$r),this.Ur=new We(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new en(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new en(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new mt(new oe([])),r=new en(e,t),o=new en(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new mt(new oe([])),r=new en(e,t),o=new en(e,t+1);let u=Bt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new en(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class en{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return mt.comparator(t.key,e.key)||zt(t.Yr,e.Yr)}static Kr(t,e){return zt(t.Yr,e.Yr)||mt.comparator(t.key,e.key)}}class K2{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new We(en.$r)}checkEmpty(t){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new c2(u,e,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new en(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Z.resolve(c)}lookupMutationBatch(t,e){return Z.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?k_:this.tr-1)}getAllMutationBatches(t){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new en(e,0),o=new en(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new We(zt);return e.forEach((o=>{const u=new en(o,0),c=new en(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;mt.isDocumentKey(u)||(u=u.child(""));const c=new en(new mt(u),0);let m=new We(zt);return this.Zr.forEachWhile((p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(p.Yr)),!0)}),c),Z.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){Gt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(e.mutations,(o=>{const u=new en(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new en(e,0),o=this.Zr.firstAfterOrEqual(r);return Z.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,Z.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class X2{constructor(t){this.ri=t,this.docs=(function(){return new Ke(mt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return Z.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(e))}getEntries(t,e){let r=Ns();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():rn.newInvalidDocument(o))})),Z.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=Ns();const c=e.path,m=new mt(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:_,value:{document:E}}=p.getNext();if(!c.isPrefixOf(_.path))break;_.path.length>c.length+1||wI(bI(E),r)<=0||(o.has(E.key)||Qf(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(t,e,r,o){yt(9500)}ii(t,e){return Z.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new W2(this)}getSize(t){return Z.resolve(this.size)}}class W2 extends F2{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),Z.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class Z2{constructor(t){this.persistence=t,this.si=new Na((e=>z_(e)),B_),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.oi=0,this._i=new Q_,this.targetCount=0,this.ai=Fo.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),Z.resolve()}getLastRemoteSnapshotVersion(t){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Z.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),Z.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Fo(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Z.resolve()}updateTargetData(t,e){return this.Pr(e),Z.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Z.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),Z.waitFor(u).next((()=>o))}getTargetCount(t){return Z.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return Z.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),Z.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),Z.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Z.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return Z.resolve(r)}containsKey(t,e){return Z.resolve(this._i.containsKey(e))}}class W1{constructor(t,e){this.ui={},this.overlays={},this.ci=new jf(0),this.li=!1,this.li=!0,this.hi=new Y2,this.referenceDelegate=t(this),this.Pi=new Z2(this),this.indexManager=new L2,this.remoteDocumentCache=(function(o){return new X2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new V2(e),this.Ii=new G2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Q2,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new K2(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){lt("MemoryPersistence","Starting transaction:",t);const o=new J2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class J2 extends II{constructor(t){super(),this.currentSequenceNumber=t}}class Y_{constructor(t){this.persistence=t,this.Ri=new Q_,this.Vi=null}static mi(t){return new Y_(t)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),Z.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Z.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const o=mt.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,Tt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return Z.or([()=>Z.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Tf{constructor(t,e){this.persistence=t,this.pi=new Na((r=>OI(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=q2(this,e)}static mi(t,e){return new Tf(t,e)}Ei(){}di(t){return Z.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return Z.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?Z.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,Tt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Z.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Z.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),Z.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Z.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ef(t.data.value)),e}br(t,e,r){return Z.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return Z.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class K_{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=Bt(),o=Bt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new K_(t,e.fromCache,r,o)}}class $2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class tN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Qw()?8:NI(US())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new $2;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(bo()<=Ft.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",wo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(bo()<=Ft.DEBUG&&lt("QueryEngine","Query:",wo(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(bo()<=Ft.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",wo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Wi(e))):Z.resolve())}ys(t,e){if(c0(e))return Z.resolve(null);let r=Wi(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=_f(e,null,"F"),r=Wi(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Bt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((p=>{const _=this.Ds(e,m);return this.Cs(e,_,c,p.readTime)?this.ys(t,_f(e,null,"F")):this.vs(t,_,e,p)}))))})))))}ws(t,e,r,o){return c0(e)||o.isEqual(Tt.min())?Z.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?Z.resolve(null):(bo()<=Ft.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wo(e)),this.vs(t,c,e,CI(o,Mu)).next((m=>m)))}))}Ds(t,e){let r=new We(b1(t));return e.forEach(((o,u)=>{Qf(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return bo()<=Ft.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",wo(e)),this.ps.getDocumentsMatchingQuery(t,e,wr.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const X_="LocalStore",eN=3e8;class nN{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new Ke(zt),this.xs=new Na((u=>z_(u)),B_),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new H2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function iN(i,t,e,r){return new nN(i,t,e,r)}async function Z1(i,t){const e=At(i);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let p=Bt();for(const _ of o){c.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}return e.localDocuments.getDocuments(r,p).next((_=>({Ls:_,removedBatchIds:c,addedBatchIds:m})))}))}))}function sN(i,t){const e=At(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,_,E){const T=_.batch,S=T.keys();let V=Z.resolve();return S.forEach((F=>{V=V.next((()=>E.getEntry(p,F))).next((W=>{const J=_.docVersions.get(F);Gt(J!==null,48541),W.version.compareTo(J)<0&&(T.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),E.addEntry(W)))}))})),V.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Bt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(p=p.add(m.batch.mutations[_].key));return p})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function J1(i){const t=At(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function rN(i,t){const e=At(i),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((E,T)=>{const S=o.get(T);if(!S)return;m.push(e.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>e.Pi.addMatchingKeys(u,E.addedDocuments,T))));let V=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?V=V.withResumeToken(pn.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,r)),o=o.insert(T,V),(function(W,J,ht){return W.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=eN?!0:ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0})(S,V,E)&&m.push(e.Pi.updateTargetData(u,V))}));let p=Ns(),_=Bt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(aN(u,c,t.documentUpdates).next((E=>{p=E.ks,_=E.qs}))),!r.isEqual(Tt.min())){const E=e.Pi.getLastRemoteSnapshotVersion(u).next((T=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return Z.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,p,_))).next((()=>p))})).then((u=>(e.Ms=o,u)))}function aN(i,t,e){let r=Bt(),o=Bt();return e.forEach((u=>r=r.add(u))),t.getEntries(i,r).next((u=>{let c=Ns();return e.forEach(((m,p)=>{const _=u.get(m);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Tt.min())?(t.removeEntry(m,p.readTime),c=c.insert(m,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(p),c=c.insert(m,p)):lt(X_,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function oN(i,t){const e=At(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=k_),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function lN(i,t){const e=At(i);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,Z.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new _r(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function s_(i,t,e){const r=At(i),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Jo(c))throw c;lt(X_,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function A0(i,t,e){const r=At(i);let o=Tt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,_,E){const T=At(p),S=T.xs.get(E);return S!==void 0?Z.resolve(T.Ms.get(S)):T.Pi.getTargetData(_,E)})(r,c,Wi(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:Tt.min(),e?u:Bt()))).next((m=>(uN(r,WI(t),m),{documents:m,Qs:u})))))}function uN(i,t,e){let r=i.Os.get(t)||Tt.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(t,r)}class C0{constructor(){this.activeTargetIds=n2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class cN{constructor(){this.Mo=new C0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new C0,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class hN{Oo(t){}shutdown(){}}const b0="ConnectivityMonitor";class w0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lt(b0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lt(b0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Wh=null;function r_(){return Wh===null?Wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wh++,"0x"+Wh.toString(16)}const bp="RestConnection",fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===df?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=r_(),m=this.zo(t,e.toUriEncodedString());lt(bp,`Sending RPC '${t}' ${c}:`,m,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:_}=new URL(m),E=Ju(_);return this.Jo(t,m,p,r,E).then((T=>(lt(bp,`Received RPC '${t}' ${c}: `,T),T)),(T=>{throw Uo(bp,`RPC '${t}' ${c} failed with error: `,T,"url: ",m,"request:",r),T}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=fN[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}class mN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const gn="WebChannelConnection";class pN extends dN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=r_();return new Promise(((m,p)=>{const _=new JS;_.setWithCredentials(!0),_.listenOnce($S.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case tf.NO_ERROR:const T=_.getResponseJson();lt(gn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(T)),m(T);break;case tf.TIMEOUT:lt(gn,`RPC '${t}' ${c} timed out`),p(new st(Q.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const S=_.getStatus();if(lt(gn,`RPC '${t}' ${c} failed with status:`,S,"response text:",_.getResponseText()),S>0){let V=_.getResponseJson();Array.isArray(V)&&(V=V[0]);const F=V?.error;if(F&&F.status&&F.message){const W=(function(ht){const Et=ht.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(Et)>=0?Et:Q.UNKNOWN})(F.status);p(new st(W,F.message))}else p(new st(Q.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new st(Q.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:c,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{lt(gn,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(o);lt(gn,`RPC '${t}' ${c} sending request:`,o),_.send(e,"POST",E,r,15)}))}T_(t,e,r){const o=r_(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=n1(),m=e1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,e,r),p.encodeInitMessageHeaders=!0;const E=u.join("");lt(gn,`Creating RPC '${t}' stream ${o}: ${E}`,p);const T=c.createWebChannel(E,p);this.I_(T);let S=!1,V=!1;const F=new mN({Yo:J=>{V?lt(gn,`Not sending because RPC '${t}' stream ${o} is closed:`,J):(S||(lt(gn,`Opening RPC '${t}' stream ${o} transport.`),T.open(),S=!0),lt(gn,`RPC '${t}' stream ${o} sending:`,J),T.send(J))},Zo:()=>T.close()}),W=(J,ht,Et)=>{J.listen(ht,(gt=>{try{Et(gt)}catch(Qt){setTimeout((()=>{throw Qt}),0)}}))};return W(T,mu.EventType.OPEN,(()=>{V||(lt(gn,`RPC '${t}' stream ${o} transport opened.`),F.o_())})),W(T,mu.EventType.CLOSE,(()=>{V||(V=!0,lt(gn,`RPC '${t}' stream ${o} transport closed`),F.a_(),this.E_(T))})),W(T,mu.EventType.ERROR,(J=>{V||(V=!0,Uo(gn,`RPC '${t}' stream ${o} transport errored. Name:`,J.name,"Message:",J.message),F.a_(new st(Q.UNAVAILABLE,"The operation could not be completed")))})),W(T,mu.EventType.MESSAGE,(J=>{if(!V){const ht=J.data[0];Gt(!!ht,16349);const Et=ht,gt=Et?.error||Et[0]?.error;if(gt){lt(gn,`RPC '${t}' stream ${o} received error:`,gt);const Qt=gt.status;let le=(function(b){const I=je[b];if(I!==void 0)return U1(I)})(Qt),Nt=gt.message;le===void 0&&(le=Q.INTERNAL,Nt="Unknown error status: "+Qt+" with message "+gt.message),V=!0,F.a_(new st(le,Nt)),T.close()}else lt(gn,`RPC '${t}' stream ${o} received:`,ht),F.u_(ht)}})),W(m,t1.STAT_EVENT,(J=>{J.stat===Yp.PROXY?lt(gn,`RPC '${t}' stream ${o} detected buffering proxy`):J.stat===Yp.NOPROXY&&lt(gn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function wp(){return typeof document<"u"?document:null}function Wf(i){return new v2(i,!0)}class W_{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&lt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const R0="PersistentStream";class $1{constructor(t,e,r,o,u,c,m,p){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W_(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Q.RESOURCE_EXHAUSTED?(Is(e.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new st(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return lt(R0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(lt(R0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _N extends $1{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=A2(this.serializer,t),r=(function(u){if(!("targetChange"in u))return Tt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Tt.min():c.readTime?Qn(c.readTime):Tt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=i_(this.serializer),e.addTarget=(function(u,c){let m;const p=c.target;if(m=$p(p)?{documents:b2(u,p)}:{query:w2(u,p).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=q1(u,c.resumeToken);const _=e_(u,c.expectedCount);_!==null&&(m.expectedCount=_)}else if(c.snapshotVersion.compareTo(Tt.min())>0){m.readTime=vf(u,c.snapshotVersion.toTimestamp());const _=e_(u,c.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,t);const r=I2(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=i_(this.serializer),e.removeTarget=t,this.q_(e)}}class gN extends $1{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=C2(t.writeResults,t.commitTime),r=Qn(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=i_(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>G1(this.serializer,r)))};this.q_(e)}}class yN{}class vN extends yN{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new st(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,n_(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new st(Q.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,n_(e,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new st(Q.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EN{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Is(e),this.aa=!1):lt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Sa="RemoteStore";class TN{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Da(this)&&(lt(Sa,"Restarting streams for network reachability change."),await(async function(p){const _=At(p);_.Ea.add(4),await sc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Zf(_)})(this))}))})),this.Ra=new EN(r,o)}}async function Zf(i){if(Da(i))for(const t of i.da)await t(!0)}async function sc(i){for(const t of i.da)await t(!1)}function tA(i,t){const e=At(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),tg(e)?$_(e):tl(e).O_()&&J_(e,t))}function Z_(i,t){const e=At(i),r=tl(e);e.Ia.delete(t),r.O_()&&eA(e,t),e.Ia.size===0&&(r.O_()?r.L_():Da(e)&&e.Ra.set("Unknown"))}function J_(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tt.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}tl(i).Y_(t)}function eA(i,t){i.Va.Ue(t),tl(i).Z_(t)}function $_(i){i.Va=new p2({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),tl(i).start(),i.Ra.ua()}function tg(i){return Da(i)&&!tl(i).x_()&&i.Ia.size>0}function Da(i){return At(i).Ea.size===0}function nA(i){i.Va=void 0}async function SN(i){i.Ra.set("Online")}async function AN(i){i.Ia.forEach(((t,e)=>{J_(i,t)}))}async function CN(i,t){nA(i),tg(i)?(i.Ra.ha(t),$_(i)):i.Ra.set("Unknown")}async function bN(i,t,e){if(i.Ra.set("Online"),t instanceof B1&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(i,t)}catch(r){lt(Sa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Sf(i,r)}else if(t instanceof rf?i.Va.Ze(t):t instanceof z1?i.Va.st(t):i.Va.tt(t),!e.isEqual(Tt.min()))try{const r=await J1(i.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(_);E&&u.Ia.set(_,E.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,_)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(pn.EMPTY_BYTE_STRING,E.snapshotVersion)),eA(u,p);const T=new _r(E.target,p,_,E.sequenceNumber);J_(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(i,e)}catch(r){lt(Sa,"Failed to raise snapshot:",r),await Sf(i,r)}}async function Sf(i,t,e){if(!Jo(t))throw t;i.Ea.add(1),await sc(i),i.Ra.set("Offline"),e||(e=()=>J1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{lt(Sa,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await Zf(i)}))}function iA(i,t){return t().catch((e=>Sf(i,e,t)))}async function Jf(i){const t=At(i),e=Dr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:k_;for(;wN(t);)try{const o=await oN(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,RN(t,o)}catch(o){await Sf(t,o)}sA(t)&&rA(t)}function wN(i){return Da(i)&&i.Ta.length<10}function RN(i,t){i.Ta.push(t);const e=Dr(i);e.O_()&&e.X_&&e.ea(t.mutations)}function sA(i){return Da(i)&&!Dr(i).x_()&&i.Ta.length>0}function rA(i){Dr(i).start()}async function IN(i){Dr(i).ra()}async function NN(i){const t=Dr(i);for(const e of i.Ta)t.ea(e.mutations)}async function DN(i,t,e){const r=i.Ta.shift(),o=j_.from(r,t,e);await iA(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Jf(i)}async function ON(i,t){t&&Dr(i).X_&&await(async function(r,o){if((function(c){return P1(c)&&c!==Q.ABORTED})(o.code)){const u=r.Ta.shift();Dr(r).B_(),await iA(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Jf(r)}})(i,t),sA(i)&&rA(i)}async function I0(i,t){const e=At(i);e.asyncQueue.verifyOperationInProgress(),lt(Sa,"RemoteStore received new credentials");const r=Da(e);e.Ea.add(3),await sc(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Zf(e)}async function MN(i,t){const e=At(i);t?(e.Ea.delete(2),await Zf(e)):t||(e.Ea.add(2),await sc(e),e.Ra.set("Unknown"))}function tl(i){return i.ma||(i.ma=(function(e,r,o){const u=At(e);return u.sa(),new _N(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:SN.bind(null,i),t_:AN.bind(null,i),r_:CN.bind(null,i),H_:bN.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),tg(i)?$_(i):i.Ra.set("Unknown")):(await i.ma.stop(),nA(i))}))),i.ma}function Dr(i){return i.fa||(i.fa=(function(e,r,o){const u=At(e);return u.sa(),new gN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:IN.bind(null,i),r_:ON.bind(null,i),ta:NN.bind(null,i),na:DN.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await Jf(i)):(await i.fa.stop(),i.Ta.length>0&&(lt(Sa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class eg{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,m=new eg(t,e,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(i,t){if(Is("AsyncQueue",`${t}: ${i}`),Jo(i))return new st(Q.UNAVAILABLE,`${t}: ${i}`);throw i}class Mo{static emptySet(t){return new Mo(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||mt.comparator(e.key,r.key):(e,r)=>mt.comparator(e.key,r.key),this.keyedMap=pu(),this.sortedSet=new Ke(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Mo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Mo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class N0{constructor(){this.ga=new Ke(mt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):yt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class jo{constructor(t,e,r,o,u,c,m,p,_){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new jo(t,e,Mo.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}class VN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class xN{constructor(){this.queries=D0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=At(e),u=o.queries;o.queries=D0(),u.forEach(((c,m)=>{for(const p of m.Sa)p.onError(r)}))})(this,new st(Q.ABORTED,"Firestore shutting down"))}}function D0(){return new Na((i=>C1(i)),Gf)}async function aA(i,t){const e=At(i);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new VN,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=ng(c,`Initialization of query '${wo(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&ig(e)}async function oA(i,t){const e=At(i),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function LN(i,t){const e=At(i);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&ig(e)}function kN(i,t,e){const r=At(i),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function ig(i){i.Ca.forEach((t=>{t.next()}))}var a_,O0;(O0=a_||(a_={})).Ma="default",O0.Cache="cache";class lA{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new jo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=jo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==a_.Cache}}class uA{constructor(t){this.key=t}}class cA{constructor(t){this.key=t}}class PN{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bt(),this.mutatedKeys=Bt(),this.eu=b1(t),this.tu=new Mo(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new N0,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const S=o.get(E),V=Qf(this.query,T)?T:null,F=!!S&&this.mutatedKeys.has(S.key),W=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let J=!1;S&&V?S.data.isEqual(V.data)?F!==W&&(r.track({type:3,doc:V}),J=!0):this.su(S,V)||(r.track({type:2,doc:V}),J=!0,(p&&this.eu(V,p)>0||_&&this.eu(V,_)<0)&&(m=!0)):!S&&V?(r.track({type:0,doc:V}),J=!0):S&&!V&&(r.track({type:1,doc:S}),J=!0,(p||_)&&(m=!0)),J&&(V?(c=c.add(V),u=W?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,T)=>(function(V,F){const W=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:J})}};return W(V)-W(F)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,_=p!==this.Za;return this.Za=p,c.length!==0||_?{snapshot:new jo(this.query,t.tu,u,c,t.mutatedKeys,p===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new cA(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new uA(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=Bt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sg="SyncEngine";class UN{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class zN{constructor(t){this.key=t,this.hu=!1}}class BN{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Na((m=>C1(m)),Gf),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(mt.comparator),this.Au=new Map,this.Ru=new Q_,this.Vu={},this.mu=new Map,this.fu=Fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qN(i,t,e=!0){const r=_A(i);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await hA(r,t,e,!0),o}async function FN(i,t){const e=_A(i);await hA(e,t,!0,!1)}async function hA(i,t,e,r){const o=await lN(i.localStore,Wi(t)),u=o.targetId,c=i.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await jN(i,t,u,c==="current",o.resumeToken)),i.isPrimaryClient&&e&&tA(i.remoteStore,o),m}async function jN(i,t,e,r,o){i.pu=(T,S,V)=>(async function(W,J,ht,Et){let gt=J.view.ru(ht);gt.Cs&&(gt=await A0(W.localStore,J.query,!1).then((({documents:N})=>J.view.ru(N,gt))));const Qt=Et&&Et.targetChanges.get(J.targetId),le=Et&&Et.targetMismatches.get(J.targetId)!=null,Nt=J.view.applyChanges(gt,W.isPrimaryClient,Qt,le);return V0(W,J.targetId,Nt.au),Nt.snapshot})(i,T,S,V);const u=await A0(i.localStore,t,!0),c=new PN(t,u.Qs),m=c.ru(u.documents),p=ic.createSynthesizedTargetChangeForCurrentChange(e,r&&i.onlineState!=="Offline",o),_=c.applyChanges(m,i.isPrimaryClient,p);V0(i,e,_.au);const E=new UN(t,e,c);return i.Tu.set(t,E),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),_.snapshot}async function HN(i,t,e){const r=At(i),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!Gf(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await s_(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Z_(r.remoteStore,o.targetId),o_(r,o.targetId)})).catch(Zo)):(o_(r,o.targetId),await s_(r.localStore,o.targetId,!0))}async function GN(i,t){const e=At(i),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Z_(e.remoteStore,r.targetId))}async function QN(i,t,e){const r=$N(i);try{const o=await(function(c,m){const p=At(c),_=ye.now(),E=m.reduce(((V,F)=>V.add(F.key)),Bt());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let F=Ns(),W=Bt();return p.Ns.getEntries(V,E).next((J=>{F=J,F.forEach(((ht,Et)=>{Et.isValidDocument()||(W=W.add(ht))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,F))).next((J=>{T=J;const ht=[];for(const Et of m){const gt=u2(Et,T.get(Et.key).overlayedDocument);gt!=null&&ht.push(new kr(Et.key,gt,_1(gt.value.mapValue),Ge.exists(!0)))}return p.mutationQueue.addMutationBatch(V,_,ht,m)})).next((J=>{S=J;const ht=J.applyToLocalDocumentSet(T,W);return p.documentOverlayCache.saveOverlays(V,J.batchId,ht)}))})).then((()=>({batchId:S.batchId,changes:R1(T)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,p){let _=c.Vu[c.currentUser.toKey()];_||(_=new Ke(zt)),_=_.insert(m,p),c.Vu[c.currentUser.toKey()]=_})(r,o.batchId,e),await rc(r,o.changes),await Jf(r.remoteStore)}catch(o){const u=ng(o,"Failed to persist write");e.reject(u)}}async function fA(i,t){const e=At(i);try{const r=await rN(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(Gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Gt(c.hu,14607):o.removedDocuments.size>0&&(Gt(c.hu,42227),c.hu=!1))})),await rc(e,r,t)}catch(r){await Zo(r)}}function M0(i,t,e){const r=At(i);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const p=At(c);p.onlineState=m;let _=!1;p.queries.forEach(((E,T)=>{for(const S of T.Sa)S.va(m)&&(_=!0)})),_&&ig(p)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function YN(i,t,e){const r=At(i);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new Ke(mt.comparator);c=c.insert(u,rn.newNoDocument(u,Tt.min()));const m=Bt().add(u),p=new Xf(Tt.min(),new Map,new Ke(zt),c,m);await fA(r,p),r.du=r.du.remove(u),r.Au.delete(t),rg(r)}else await s_(r.localStore,t,!1).then((()=>o_(r,t,e))).catch(Zo)}async function KN(i,t){const e=At(i),r=t.batch.batchId;try{const o=await sN(e.localStore,t);mA(e,r,null),dA(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await rc(e,o)}catch(o){await Zo(o)}}async function XN(i,t,e){const r=At(i);try{const o=await(function(c,m){const p=At(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return p.mutationQueue.lookupMutationBatch(_,m).next((T=>(Gt(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(_,T)))).next((()=>p.mutationQueue.performConsistencyCheck(_))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(_,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>p.localDocuments.getDocuments(_,E)))}))})(r.localStore,t);mA(r,t,e),dA(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await rc(r,o)}catch(o){await Zo(o)}}function dA(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function mA(i,t,e){const r=At(i);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function o_(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const r of i.Iu.get(t))i.Tu.delete(r),e&&i.Pu.yu(r,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((r=>{i.Ru.containsKey(r)||pA(i,r)}))}function pA(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(Z_(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),rg(i))}function V0(i,t,e){for(const r of e)r instanceof uA?(i.Ru.addReference(r.key,t),WN(i,r)):r instanceof cA?(lt(sg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,t),i.Ru.containsKey(r.key)||pA(i,r.key)):yt(19791,{wu:r})}function WN(i,t){const e=t.key,r=e.path.canonicalString();i.du.get(e)||i.Eu.has(r)||(lt(sg,"New document in limbo: "+e),i.Eu.add(r),rg(i))}function rg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new mt(oe.fromString(t)),r=i.fu.next();i.Au.set(r,new zN(e)),i.du=i.du.insert(e,r),tA(i.remoteStore,new _r(Wi(q_(e.path)),r,"TargetPurposeLimboResolution",jf.ce))}}async function rc(i,t,e){const r=At(i),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{c.push(r.pu(p,t,e).then((_=>{if((_||e)&&r.isPrimaryClient){const E=_?!_.fromCache:e?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(_){o.push(_);const E=K_.As(p.targetId,_);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(p,_){const E=At(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Z.forEach(_,(S=>Z.forEach(S.Es,(V=>E.persistence.referenceDelegate.addReference(T,S.targetId,V))).next((()=>Z.forEach(S.ds,(V=>E.persistence.referenceDelegate.removeReference(T,S.targetId,V)))))))))}catch(T){if(!Jo(T))throw T;lt(X_,"Failed to update sequence numbers: "+T)}for(const T of _){const S=T.targetId;if(!T.fromCache){const V=E.Ms.get(S),F=V.snapshotVersion,W=V.withLastLimboFreeSnapshotVersion(F);E.Ms=E.Ms.insert(S,W)}}})(r.localStore,u))}async function ZN(i,t){const e=At(i);if(!e.currentUser.isEqual(t)){lt(sg,"User change. New user:",t.toKey());const r=await Z1(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new st(Q.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await rc(e,r.Ls)}}function JN(i,t){const e=At(i),r=e.Au.get(t);if(r&&r.hu)return Bt().add(r.key);{let o=Bt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function _A(i){const t=At(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=fA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=JN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YN.bind(null,t),t.Pu.H_=LN.bind(null,t.eventManager),t.Pu.yu=kN.bind(null,t.eventManager),t}function $N(i){const t=At(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XN.bind(null,t),t}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return iN(this.persistence,new tN,t.initialUser,this.serializer)}Cu(t){return new W1(Y_.mi,this.serializer)}Du(t){return new cN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class tD extends Af{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Gt(this.persistence.referenceDelegate instanceof Tf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new z2(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new W1((r=>Tf.mi(r,e)),this.serializer)}}class l_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>M0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZN.bind(null,this.syncEngine),await MN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new xN})()}createDatastore(t){const e=Wf(t.databaseInfo.databaseId),r=(function(u){return new pN(u)})(t.databaseInfo);return(function(u,c,m,p){return new vN(u,c,m,p)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,m){return new TN(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>M0(this.syncEngine,e,0)),(function(){return w0.v()?new w0:new hN})())}createSyncEngine(t,e){return(function(o,u,c,m,p,_,E){const T=new BN(o,u,c,m,p,_);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=At(e);lt(Sa,"RemoteStore shutting down."),r.Ea.add(5),await sc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}l_.provider={build:()=>new l_};class gA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Is("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}class eD{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new st(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await(async function(o,u){const c=At(o),m={documents:u.map((T=>Ef(c.serializer,T)))},p=await c.Ho("BatchGetDocuments",c.serializer.databaseId,oe.emptyPath(),m,u.length),_=new Map;p.forEach((T=>{const S=S2(c.serializer,T);_.set(S.key.toString(),S)}));const E=[];return u.forEach((T=>{const S=_.get(T.toString());Gt(!!S,55234,{key:T}),E.push(S)})),E})(this.datastore,t);return e.forEach((r=>this.recordVersion(r))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new nc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((e,r)=>{const o=mt.fromPath(r);this.mutations.push(new k1(o,this.precondition(o)))})),await(async function(r,o){const u=At(r),c={writes:o.map((m=>G1(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,oe.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw yt(50498,{Gu:t.constructor.name});e=Tt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new st(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Tt.min())?Ge.exists(!1):Ge.updateTime(e):Ge.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Tt.min()))throw new st(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ge.updateTime(e)}return Ge.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class nD{constructor(t,e,r,o,u){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=o,this.deferred=u,this.zu=r.maxAttempts,this.M_=new W_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new eD(this.datastore),e=this.Hu(t);e&&e.then((r=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(t){try{const e=this.updateFunction(t);return!tc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!P1(e)}return!1}}const Or="FirestoreClient";class iD{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=L_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{lt(Or,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(lt(Or,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=ng(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Rp(i,t){i.asyncQueue.verifyOperationInProgress(),lt(Or,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let r=e.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Z1(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function x0(i,t){i.asyncQueue.verifyOperationInProgress();const e=await sD(i);lt(Or,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((r=>I0(t.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>I0(t.remoteStore,o))),i._onlineComponents=t}async function sD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){lt(Or,"Using user provided OfflineComponentProvider");try{await Rp(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Uo("Error using user provided cache. Falling back to memory cache: "+e),await Rp(i,new Af)}}else lt(Or,"Using default OfflineComponentProvider"),await Rp(i,new tD(void 0));return i._offlineComponents}async function ag(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(lt(Or,"Using user provided OnlineComponentProvider"),await x0(i,i._uninitializedComponentsProvider._online)):(lt(Or,"Using default OnlineComponentProvider"),await x0(i,new l_))),i._onlineComponents}function rD(i){return ag(i).then((t=>t.syncEngine))}function aD(i){return ag(i).then((t=>t.datastore))}async function u_(i){const t=await ag(i),e=t.eventManager;return e.onListen=qN.bind(null,t.syncEngine),e.onUnlisten=HN.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=FN.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=GN.bind(null,t.syncEngine),e}function oD(i,t,e={}){const r=new bs;return i.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,p,_){const E=new gA({next:S=>{E.Nu(),c.enqueueAndForget((()=>oA(u,T))),S.fromCache&&p.source==="server"?_.reject(new st(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new lA(m,E,{includeMetadataChanges:!0,qa:!0});return aA(u,T)})(await u_(i),i.asyncQueue,t,e,r))),r.promise}function yA(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const L0=new Map;const vA="firestore.googleapis.com",k0=!0;class P0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new st(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vA,this.ssl=k0}else this.host=t.host,this.ssl=t.ssl??k0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=X1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<P2)throw new st(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}AI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yA(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $f{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new st(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dI;switch(r.type){case"firstParty":return new gI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=L0.get(e);r&&(lt("ComponentProvider","Removing Datastore"),L0.delete(e),r.terminate())})(this),Promise.resolve()}}function lD(i,t,e,r={}){i=Vn(i,$f);const o=Ju(t),u=i._getSettings(),c={...u,emulatorOptions:i._getEmulatorOptions()},m=`${t}:${e}`;o&&(LS(`https://${m}`),PS("Firestore",!0)),u.host!==vA&&u.host!==m&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:r};if(!Nu(p,c)&&(i._setSettings(p),r.mockUserToken)){let _,E;if(typeof r.mockUserToken=="string")_=r.mockUserToken,E=yn.MOCK_USER;else{_=kS(r.mockUserToken,i._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new st(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new yn(T)}i._authCredentials=new mI(new s1(_,E))}}class Os{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Os(this.firestore,t,this._query)}}class be{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new be(this.firestore,t,this._key)}toJSON(){return{type:be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if($u(e,be._jsonSchema))return new be(t,r||null,new mt(oe.fromString(e.referencePath)))}}be._jsonSchemaVersion="firestore/documentReference/1.0",be._jsonSchema={type:Qe("string",be._jsonSchemaVersion),referencePath:Qe("string")};class Ar extends Os{constructor(t,e,r){super(t,e,q_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new be(this.firestore,null,new mt(t))}withConverter(t){return new Ar(this.firestore,t,this._path)}}function No(i,t,...e){if(i=Ye(i),r1("collection","path",t),i instanceof $f){const r=oe.fromString(t,...e);return WT(r),new Ar(i,null,r)}{if(!(i instanceof be||i instanceof Ar))throw new st(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(oe.fromString(t,...e));return WT(r),new Ar(i.firestore,null,r)}}function Mr(i,t,...e){if(i=Ye(i),arguments.length===1&&(t=L_.newId()),r1("doc","path",t),i instanceof $f){const r=oe.fromString(t,...e);return XT(r),new be(i,null,new mt(r))}{if(!(i instanceof be||i instanceof Ar))throw new st(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(oe.fromString(t,...e));return XT(r),new be(i.firestore,i instanceof Ar?i.converter:null,new mt(r))}}const U0="AsyncQueue";class z0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W_(this,"async_queue_retry"),this._c=()=>{const r=wp();r&&lt(U0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=wp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=wp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Jo(t))throw t;lt(U0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Is("INTERNAL UNHANDLED ERROR: ",B0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=eg.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&yt(47125,{Pc:B0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function B0(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}function q0(i){return(function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class ts extends $f{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new z0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new z0(t),this._firestoreClient=void 0,await t}}}function uD(i,t){const e=typeof i=="object"?i:KS(),r=typeof i=="string"?i:df,o=HS(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=VS("firestore");u&&lD(o,...u)}return o}function ac(i){if(i._terminated)throw new st(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||cD(i),i._firestoreClient}function cD(i){const t=i._freezeSettings(),e=(function(o,u,c,m){return new xI(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,yA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new iD(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Hn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hn(pn.fromBase64String(t))}catch(e){throw new st(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Hn(pn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($u(t,Hn._jsonSchema))return Hn.fromBase64String(t.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Qe("string",Hn._jsonSchemaVersion),bytes:Qe("string")};class el{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new st(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class og{constructor(t){this._methodName=t}}class Zi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new st(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new st(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(t){if($u(t,Zi._jsonSchema))return new Zi(t.latitude,t.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:Qe("string",Zi._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};class Ji{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($u(t,Ji._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Ji(t.vectorValues);throw new st(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ji._jsonSchemaVersion="firestore/vectorValue/1.0",Ji._jsonSchema={type:Qe("string",Ji._jsonSchemaVersion),vectorValues:Qe("object")};const hD=/^__.*__$/;class fD{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new kr(t,this.data,this.fieldMask,e,this.fieldTransforms):new ec(t,this.data,e,this.fieldTransforms)}}class EA{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new kr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function TA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:i})}}class lg{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new lg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Cf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(TA(this.Ac)&&hD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class dD{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Wf(t)}Cc(t,e,r,o=!1){return new lg({Ac:t,methodName:e,Dc:r,path:mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nl(i){const t=i._freezeSettings(),e=Wf(i._databaseId);return new dD(i._databaseId,!!t.ignoreUndefinedProperties,e)}function td(i,t,e,r,o,u={}){const c=i.Cc(u.merge||u.mergeFields?2:0,t,e,o);hg("Data must be an object, but it was:",c,r);const m=SA(r,c);let p,_;if(u.merge)p=new Gn(c.fieldMask),_=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const S=c_(t,T,e);if(!c.contains(S))throw new st(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);CA(E,S)||E.push(S)}p=new Gn(E),_=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,_=c.fieldTransforms;return new fD(new Sn(m),p,_)}class oc extends og{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof oc}}function ug(i,t,e,r){const o=i.Cc(1,t,e);hg("Data must be an object, but it was:",o,r);const u=[],c=Sn.empty();Lr(r,((p,_)=>{const E=fg(t,p,e);_=Ye(_);const T=o.yc(E);if(_ instanceof oc)u.push(E);else{const S=lc(_,T);S!=null&&(u.push(E),c.set(E,S))}}));const m=new Gn(u);return new EA(c,m,o.fieldTransforms)}function cg(i,t,e,r,o,u){const c=i.Cc(1,t,e),m=[c_(t,r,e)],p=[o];if(u.length%2!=0)throw new st(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(c_(t,u[S])),p.push(u[S+1]);const _=[],E=Sn.empty();for(let S=m.length-1;S>=0;--S)if(!CA(_,m[S])){const V=m[S];let F=p[S];F=Ye(F);const W=c.yc(V);if(F instanceof oc)_.push(V);else{const J=lc(F,W);J!=null&&(_.push(V),E.set(V,J))}}const T=new Gn(_);return new EA(E,T,c.fieldTransforms)}function mD(i,t,e,r=!1){return lc(e,i.Cc(r?4:3,t))}function lc(i,t){if(AA(i=Ye(i)))return hg("Unsupported field value:",t,i),SA(i,t);if(i instanceof og)return(function(r,o){if(!TA(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let p=lc(m,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),c++}return{arrayValue:{values:u}}})(i,t)}return(function(r,o){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ye.fromDate(r);return{timestampValue:vf(o.serializer,u)}}if(r instanceof ye){const u=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vf(o.serializer,u)}}if(r instanceof Zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hn)return{bytesValue:q1(o.serializer,r._byteString)};if(r instanceof be){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:G_(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ji)return(function(c,m){return{mapValue:{fields:{[m1]:{stringValue:p1},[mf]:{arrayValue:{values:c.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return F_(m.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Ff(r)}`)})(i,t)}function SA(i,t){const e={};return l1(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lr(i,((r,o)=>{const u=lc(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function AA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ye||i instanceof Zi||i instanceof Hn||i instanceof be||i instanceof og||i instanceof Ji)}function hg(i,t,e){if(!AA(e)||!a1(e)){const r=Ff(e);throw r==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+r)}}function c_(i,t,e){if((t=Ye(t))instanceof el)return t._internalPath;if(typeof t=="string")return fg(i,t);throw Cf("Field path arguments must be of type string or ",i,!1,void 0,e)}const pD=new RegExp("[~\\*/\\[\\]]");function fg(i,t,e){if(t.search(pD)>=0)throw Cf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new el(...t.split("."))._internalPath}catch{throw Cf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Cf(i,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||c)&&(p+=" (found",u&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new st(Q.INVALID_ARGUMENT,m+i+p)}function CA(i,t){return i.some((e=>e.isEqual(t)))}class bf{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _D(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(dg("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class _D extends bf{data(){return super.data()}}function dg(i,t){return typeof t=="string"?fg(i,t):t instanceof el?t._internalPath:t._delegate._internalPath}function bA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new st(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mg{}class pg extends mg{}function wA(i,t,...e){let r=[];t instanceof mg&&r.push(t),r=r.concat(e),(function(u){const c=u.filter((p=>p instanceof gg)).length,m=u.filter((p=>p instanceof _g)).length;if(c>1||c>0&&m>0)throw new st(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class _g extends pg{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new _g(t,e,r)}_apply(t){const e=this._parse(t);return RA(t._query,e),new Os(t.firestore,t.converter,t_(t._query,e))}_parse(t){const e=nl(t.firestore);return(function(u,c,m,p,_,E,T){let S;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new st(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){j0(T,E);const F=[];for(const W of T)F.push(F0(p,u,W));S={arrayValue:{values:F}}}else S=F0(p,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||j0(T,E),S=mD(m,c,T,E==="in"||E==="not-in");return He.create(_,E,S)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class gg extends mg{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new gg(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:bi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const p of m)RA(c,p),c=t_(c,p)})(t._query,e),new Os(t.firestore,t.converter,t_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yg extends pg{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new yg(t,e)}_apply(t){const e=(function(o,u,c){if(o.startAt!==null)throw new st(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new st(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ku(u,c)})(t._query,this._field,this._direction);return new Os(t.firestore,t.converter,(function(o,u){const c=o.explicitOrderBy.concat([u]);return new $o(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,e))}}function gD(i,t="asc"){const e=t,r=dg("orderBy",i);return yg._create(r,e)}class vg extends pg{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new vg(t,e,r)}_apply(t){return new Os(t.firestore,t.converter,_f(t._query,this._limit,this._limitType))}}function yD(i){return vg._create("limit",i,"F")}function F0(i,t,e){if(typeof(e=Ye(e))=="string"){if(e==="")throw new st(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A1(t)&&e.indexOf("/")!==-1)throw new st(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(oe.fromString(e));if(!mt.isDocumentKey(r))throw new st(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return s0(i,new mt(r))}if(e instanceof be)return s0(i,e._key);throw new st(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ff(e)}.`)}function j0(i,t){if(!Array.isArray(i)||i.length===0)throw new st(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function RA(i,t){const e=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new st(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new st(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class IA{convertValue(t,e="none"){switch(Nr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ir(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Lr(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){const e=t.fields?.[mf].arrayValue?.values?.map((r=>Oe(r.doubleValue)));return new Ji(e)}convertGeoPoint(t){return new Zi(Oe(t.latitude),Oe(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Hf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Vu(t));default:return null}}convertTimestamp(t){const e=Rr(t);return new ye(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=oe.fromString(t);Gt(K1(r),9688,{name:t});const o=new xu(r.get(1),r.get(3)),u=new mt(r.popFirst(5));return o.isEqual(e)||Is(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}function ed(i,t,e){let r;return r=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,r}class vD extends IA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new be(this.firestore,null,e)}}class Do{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Cr extends bf{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(dg("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Cr._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cr._jsonSchema={type:Qe("string",Cr._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class af extends Cr{data(t={}){return super.data(t)}}class va{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Do(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new af(this._firestore,this._userDataWriter,r.key,r,new Do(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new st(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const p=new af(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Do(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new af(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Do(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:ED(m.type),doc:p,oldIndex:_,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=va._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=L_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ED(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:i})}}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Qe("string",va._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class nd extends IA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new be(this.firestore,null,e)}}function NA(i){i=Vn(i,Os);const t=Vn(i.firestore,ts),e=ac(t),r=new nd(t);return bA(i._query),oD(e,i._query).then((o=>new va(t,r,i,o)))}function DA(i,t,e){i=Vn(i,be);const r=Vn(i.firestore,ts),o=ed(i.converter,t,e);return uc(r,[td(nl(r),"setDoc",i._key,o,i.converter!==null,e).toMutation(i._key,Ge.none())])}function TD(i,t,e,...r){i=Vn(i,be);const o=Vn(i.firestore,ts),u=nl(o);let c;return c=typeof(t=Ye(t))=="string"||t instanceof el?cg(u,"updateDoc",i._key,t,e,r):ug(u,"updateDoc",i._key,t),uc(o,[c.toMutation(i._key,Ge.exists(!0))])}function SD(i){return uc(Vn(i.firestore,ts),[new nc(i._key,Ge.none())])}function AD(i,t){const e=Vn(i.firestore,ts),r=Mr(i),o=ed(i.converter,t);return uc(e,[td(nl(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Ge.exists(!1))]).then((()=>r))}function Ip(i,...t){i=Ye(i);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||q0(t[r])||(e=t[r++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(q0(t[r])){const p=t[r];t[r]=p.next?.bind(p),t[r+1]=p.error?.bind(p),t[r+2]=p.complete?.bind(p)}let u,c,m;if(i instanceof be)c=Vn(i.firestore,ts),m=q_(i._key.path),u={next:p=>{t[r]&&t[r](CD(c,i,p))},error:t[r+1],complete:t[r+2]};else{const p=Vn(i,Os);c=Vn(p.firestore,ts),m=p._query;const _=new nd(c);u={next:E=>{t[r]&&t[r](new va(c,_,p,E))},error:t[r+1],complete:t[r+2]},bA(i._query)}return(function(_,E,T,S){const V=new gA(S),F=new lA(E,V,T);return _.asyncQueue.enqueueAndForget((async()=>aA(await u_(_),F))),()=>{V.Nu(),_.asyncQueue.enqueueAndForget((async()=>oA(await u_(_),F)))}})(ac(c),m,o,u)}function uc(i,t){return(function(r,o){const u=new bs;return r.asyncQueue.enqueueAndForget((async()=>QN(await rD(r),o,u))),u.promise})(ac(i),t)}function CD(i,t,e){const r=e.docs.get(t._key),o=new nd(i);return new Cr(i,o,t._key,r,new Do(e.hasPendingWrites,e.fromCache),t.converter)}const bD={maxAttempts:5};class wD{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=nl(t)}set(t,e,r){this._verifyNotCommitted();const o=gr(t,this._firestore),u=ed(o.converter,e,r),c=td(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,Ge.none())),this}update(t,e,r,...o){this._verifyNotCommitted();const u=gr(t,this._firestore);let c;return c=typeof(e=Ye(e))=="string"||e instanceof el?cg(this._dataReader,"WriteBatch.update",u._key,e,r,o):ug(this._dataReader,"WriteBatch.update",u._key,e),this._mutations.push(c.toMutation(u._key,Ge.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=gr(t,this._firestore);return this._mutations=this._mutations.concat(new nc(e._key,Ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new st(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gr(i,t){if((i=Ye(i)).firestore!==t)throw new st(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class RD{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=nl(t)}get(t){const e=gr(t,this._firestore),r=new vD(this._firestore);return this._transaction.lookup([e._key]).then((o=>{if(!o||o.length!==1)return yt(24041);const u=o[0];if(u.isFoundDocument())return new bf(this._firestore,r,u.key,u,e.converter);if(u.isNoDocument())return new bf(this._firestore,r,e._key,null,e.converter);throw yt(18433,{doc:u})}))}set(t,e,r){const o=gr(t,this._firestore),u=ed(o.converter,e,r),c=td(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(t,e,r,...o){const u=gr(t,this._firestore);let c;return c=typeof(e=Ye(e))=="string"||e instanceof el?cg(this._dataReader,"Transaction.update",u._key,e,r,o):ug(this._dataReader,"Transaction.update",u._key,e),this._transaction.update(u._key,c),this}delete(t){const e=gr(t,this._firestore);return this._transaction.delete(e._key),this}}class ID extends RD{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=gr(t,this._firestore),r=new nd(this._firestore);return super.get(t).then((o=>new Cr(this._firestore,r,e._key,o._document,new Do(!1,!1),e.converter)))}}function Eg(i,t,e){i=Vn(i,ts);const r={...bD,...e};return(function(u){if(u.maxAttempts<1)throw new st(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(u,c,m){const p=new bs;return u.asyncQueue.enqueueAndForget((async()=>{const _=await aD(u);new nD(u.asyncQueue,_,m,c,p).ju()})),p.promise})(ac(i),(o=>t(new ID(i,o))),r)}function pr(){return new oc("deleteField")}function OA(i){return ac(i=Vn(i,ts)),new wD(i,(t=>uc(i,t)))}(function(t,e=!0){(function(o){Wo=o})(QS),Du(new Po("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new ts(new pI(r.getProvider("auth-internal")),new yI(c,r.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new st(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(_.options.projectId,E)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Er(GT,QT,t),Er(GT,QT,"esm2020")})();var H0={};const G0="@firebase/database",Q0="1.1.0";let MA="";function ND(i){MA=i}class DD{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),an(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Iu(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class OD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return wi(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const VA=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new DD(t)}}catch{}return new OD},_a=VA("localStorage"),MD=VA("sessionStorage");const Vo=new M_("@firebase/database"),xA=(function(){let i=1;return function(){return i++}})(),LA=function(i){const t=nR(i),e=new eR;e.update(t);const r=e.digest();return D_.encodeByteArray(r)},cc=function(...i){let t="";for(let e=0;e<i.length;e++){const r=i[e];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=cc.apply(null,r):typeof r=="object"?t+=an(r):t+=r,t+=" "}return t};let Au=null,Y0=!0;const VD=function(i,t){et(!0,"Can't turn on custom loggers persistently."),Vo.logLevel=Ft.VERBOSE,Au=Vo.log.bind(Vo)},dn=function(...i){if(Y0===!0&&(Y0=!1,Au===null&&MD.get("logging_enabled")===!0&&VD()),Au){const t=cc.apply(null,i);Au(t)}},hc=function(i){return function(...t){dn(i,...t)}},h_=function(...i){const t="FIREBASE INTERNAL ERROR: "+cc(...i);Vo.error(t)},Ds=function(...i){const t=`FIREBASE FATAL ERROR: ${cc(...i)}`;throw Vo.error(t),new Error(t)},xn=function(...i){const t="FIREBASE WARNING: "+cc(...i);Vo.warn(t)},xD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},id=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},LD=function(i){if(document.readyState==="complete")i();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Ho="[MIN_NAME]",Aa="[MAX_NAME]",Oa=function(i,t){if(i===t)return 0;if(i===Ho||t===Aa)return-1;if(t===Ho||i===Aa)return 1;{const e=K0(i),r=K0(t);return e!==null?r!==null?e-r===0?i.length-t.length:e-r:-1:r!==null?1:i<t?-1:1}},kD=function(i,t){return i===t?0:i<t?-1:1},uu=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+an(t))},Tg=function(i){if(typeof i!="object"||i===null)return an(i);const t=[];for(const r in i)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)r!==0&&(e+=","),e+=an(t[r]),e+=":",e+=Tg(i[t[r]]);return e+="}",e},kA=function(i,t){const e=i.length;if(e<=t)return[i];const r=[];for(let o=0;o<e;o+=t)o+t>e?r.push(i.substring(o,e)):r.push(i.substring(o,o+t));return r};function vn(i,t){for(const e in i)i.hasOwnProperty(e)&&t(e,i[e])}const PA=function(i){et(!id(i),"Invalid JSON number");const t=11,e=52,r=(1<<t-1)-1;let o,u,c,m,p;i===0?(u=0,c=0,o=1/i===-1/0?1:0):(o=i<0,i=Math.abs(i),i>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),r),u=m+r,c=Math.round(i*Math.pow(2,e-m)-Math.pow(2,e))):(u=0,c=Math.round(i/Math.pow(2,1-r-e))));const _=[];for(p=e;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=t;p;p-=1)_.push(u%2?1:0),u=Math.floor(u/2);_.push(o?1:0),_.reverse();const E=_.join("");let T="";for(p=0;p<64;p+=8){let S=parseInt(E.substr(p,8),2).toString(16);S.length===1&&(S="0"+S),T=T+S}return T.toLowerCase()},PD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},UD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function zD(i,t){let e="Unknown Error";i==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?e="Client doesn't have permission to access the desired data.":i==="unavailable"&&(e="The service is unavailable");const r=new Error(i+" at "+t._path.toString()+": "+e);return r.code=i.toUpperCase(),r}const BD=new RegExp("^-?(0*)\\d{1,10}$"),qD=-2147483648,FD=2147483647,K0=function(i){if(BD.test(i)){const t=Number(i);if(t>=qD&&t<=FD)return t}return null},il=function(i){try{i()}catch(t){setTimeout(()=>{const e=t.stack||"";throw xn("Exception was thrown by user callback.",e),t},Math.floor(0))}},jD=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cu=function(i,t){const e=setTimeout(i,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};class HD{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,GS(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class GD{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(t)}}class of{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}of.OWNER="owner";const Sg="5",UA="v",zA="s",BA="r",qA="f",FA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jA="ls",HA="p",f_="ac",GA="websocket",QA="long_polling";class YA{constructor(t,e,r,o,u=!1,c="",m=!1,p=!1,_=null){this.secure=e,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=p,this.emulatorOptions=_,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_a.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_a.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function QD(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function KA(i,t,e){et(typeof t=="string","typeof type must == string"),et(typeof e=="object","typeof params must == object");let r;if(t===GA)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===QA)r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);QD(i)&&(e.ns=i.namespace);const o=[];return vn(e,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class YD{constructor(){this.counters_={}}incrementCounter(t,e=1){wi(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return xw(this.counters_)}}const Np={},Dp={};function Ag(i){const t=i.toString();return Np[t]||(Np[t]=new YD),Np[t]}function KD(i,t){const e=i.toString();return Dp[e]||(Dp[e]=t()),Dp[e]}class XD{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&il(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const X0="start",WD="close",ZD="pLPCommand",JD="pRTLPCB",XA="id",WA="pw",ZA="ser",$D="cb",tO="seg",eO="ts",nO="d",iO="dframe",JA=1870,$A=30,sO=JA-$A,rO=25e3,aO=3e4;class Oo{constructor(t,e,r,o,u,c,m){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hc(t),this.stats_=Ag(e),this.urlFn=p=>(this.appCheckToken&&(p[f_]=this.appCheckToken),KA(e,QA,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new XD(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aO)),LD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cg((...u)=>{const[c,m,p,_,E]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===X0)this.id=m,this.password=p;else if(c===WD)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...u)=>{const[c,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,m)},()=>{this.onClosed_()},this.urlFn);const r={};r[X0]="t",r[ZA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$D]=this.scriptTagHolder.uniqueCallbackIdentifier),r[UA]=Sg,this.transportSessionId&&(r[zA]=this.transportSessionId),this.lastSessionId&&(r[jA]=this.lastSessionId),this.applicationId&&(r[HA]=this.applicationId),this.appCheckToken&&(r[f_]=this.appCheckToken),typeof location<"u"&&location.hostname&&FA.test(location.hostname)&&(r[BA]=qA);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oo.forceAllow_=!0}static forceDisallow(){Oo.forceDisallow_=!0}static isAvailable(){return Oo.forceAllow_?!0:!Oo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!PD()&&!UD()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=an(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=OS(e),o=kA(r,sO);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const r={};r[iO]="t",r[XA]=t,r[WA]=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=an(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Cg{constructor(t,e,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=xA(),window[ZD+this.uniqueCallbackIdentifier]=t,window[JD+this.uniqueCallbackIdentifier]=e,this.myIFrame=Cg.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(m){dn("frame writing exception"),m.stack&&dn(m.stack),dn(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||dn("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[XA]=this.myID,t[WA]=this.myPW,t[ZA]=this.currentSerial;let e=this.urlFn(t),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$A+r.length<=JA;){const c=this.pendingSegs.shift();r=r+"&"+tO+o+"="+c.seg+"&"+eO+o+"="+c.ts+"&"+nO+o+"="+c.d,o++}return e=e+r,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},o=setTimeout(r,Math.floor(rO)),u=()=>{clearTimeout(o),r()};this.addTag(t,u)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{dn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const oO=16384,lO=45e3;let wf=null;typeof MozWebSocket<"u"?wf=MozWebSocket:typeof WebSocket<"u"&&(wf=WebSocket);class Si{constructor(t,e,r,o,u,c,m){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hc(this.connId),this.stats_=Ag(e),this.connURL=Si.connectionURL_(e,c,m,o,r),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,r,o,u){const c={};return c[UA]=Sg,typeof location<"u"&&location.hostname&&FA.test(location.hostname)&&(c[BA]=qA),e&&(c[zA]=e),r&&(c[jA]=r),o&&(c[f_]=o),u&&(c[HA]=u),KA(t,GA,c)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_a.set("previous_websocket_failure",!0);try{let r;Gw(),this.mySock=new wf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Si.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(e);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&wf!==null&&!Si.forceDisallow_}static previouslyFailed(){return _a.isInMemoryStorage||_a.get("previous_websocket_failure")===!0}markConnectionHealthy(){_a.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const r=Iu(e);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(et(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const r=this.extractFrameCount_(e);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const e=an(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=kA(e,oO);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lO))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Si.responsesRequiredToBeHealthy=2;Si.healthyTimeout=3e4;class zu{static get ALL_TRANSPORTS(){return[Oo,Si]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=Si&&Si.isAvailable();let r=e&&!Si.previouslyFailed();if(t.webSocketOnly&&(e||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Si];else{const o=this.transports_=[];for(const u of zu.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);zu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zu.globalTransportInitialized_=!1;const uO=6e4,cO=5e3,hO=10*1024,fO=100*1024,Op="t",W0="d",dO="s",Z0="r",mO="e",J0="o",$0="a",tS="n",eS="p",pO="h";class _O{constructor(t,e,r,o,u,c,m,p,_,E){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=m,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hc("c:"+this.id+":"),this.transportManager_=new zu(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Cu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>fO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Op in t){const e=t[Op];e===$0?this.upgradeIfSecondaryHealthy_():e===Z0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===J0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=uu("t",t),r=uu("d",t);if(e==="c")this.onSecondaryControl_(r);else if(e==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:eS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=uu("t",t),r=uu("d",t);e==="c"?this.onControl_(r):e==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=uu(Op,t);if(W0 in t){const r=t[W0];if(e===pO){const o={...r};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(e===tS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===dO?this.onConnectionShutdown_(r):e===Z0?this.onReset_(r):e===mO?h_("Server Error: "+r):e===J0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):h_("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Sg!==r&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Cu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uO))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(cO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:eS,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_a.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tC{put(t,e,r,o){}merge(t,e,r,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class eC{constructor(t){this.allowedEvents_=t,this.listeners_={},et(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const o=this.getInitialEvent(t);o&&e.apply(r,o)}off(t,e,r){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===e&&(!r||r===o[u].context)){o.splice(u,1);return}}validateEventType_(t){et(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Rf extends eC{static getInstance(){return new Rf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!zS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return et(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const nS=32,iS=768;class ne{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}}function Jt(){return new ne("")}function It(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Vr(i){return i.pieces_.length-i.pieceNum_}function fe(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new ne(i.pieces_,t)}function bg(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function gO(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)i.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}function Bu(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function nC(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new ne(t,0)}function Ve(i,t){const e=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)e.push(i.pieces_[r]);if(t instanceof ne)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&e.push(r[o])}return new ne(e,0)}function Ot(i){return i.pieceNum_>=i.pieces_.length}function On(i,t){const e=It(i),r=It(t);if(e===null)return t;if(e===r)return On(fe(i),fe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function yO(i,t){const e=Bu(i,0),r=Bu(t,0);for(let o=0;o<e.length&&o<r.length;o++){const u=Oa(e[o],r[o]);if(u!==0)return u}return e.length===r.length?0:e.length<r.length?-1:1}function wg(i,t){if(Vr(i)!==Vr(t))return!1;for(let e=i.pieceNum_,r=t.pieceNum_;e<=i.pieces_.length;e++,r++)if(i.pieces_[e]!==t.pieces_[r])return!1;return!0}function li(i,t){let e=i.pieceNum_,r=t.pieceNum_;if(Vr(i)>Vr(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class vO{constructor(t,e){this.errorPrefix_=e,this.parts_=Bu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=qf(this.parts_[r]);iC(this)}}function EO(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=qf(t),iC(i)}function TO(i){const t=i.parts_.pop();i.byteLength_-=qf(t),i.parts_.length>0&&(i.byteLength_-=1)}function iC(i){if(i.byteLength_>iS)throw new Error(i.errorPrefix_+"has a key path longer than "+iS+" bytes ("+i.byteLength_+").");if(i.parts_.length>nS)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nS+") or object contains a cycle "+ma(i))}function ma(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class Rg extends eC{static getInstance(){return new Rg}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return et(t==="visible","Unknown event type: "+t),[this.visible_]}}const cu=1e3,SO=300*1e3,sS=30*1e3,AO=1.3,CO=3e4,bO="server_kill",rS=3;class ws extends tC{constructor(t,e,r,o,u,c,m,p){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=c,this.appCheckTokenProvider_=m,this.authOverride_=p,this.id=ws.nextPersistentConnectionId_++,this.log_=hc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cu,this.maxReconnectDelay_=SO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Rg.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Rf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,r){const o=++this.requestNumber_,u={r:o,a:t,b:e};this.log_(an(u)),et(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const e=new Xi,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{const m=c.d;c.s==="ok"?e.resolve(m):e.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),e.promise}listen(t,e,r,o){this.initConnection_();const u=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+u),this.listens.has(c)||this.listens.set(c,new Map),et(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),et(!this.listens.get(c).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:e,query:t,tag:r};this.listens.get(c).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(r)})}sendListen_(t){const e=t.query,r=e._path.toString(),o=e._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r},c="q";t.tag&&(u.q=e._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(c,u,m=>{const p=m.d,_=m.s;ws.warnOnListenWarnings_(p,e),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",m),_!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(_,p))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&wi(t,"w")){const r=Ea(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+e._queryParams.getIndex().toString()+'"',u=e._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||$w(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=Jw(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(e,r,o=>{const u=o.s,c=o.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,r=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,r)})}unlisten(t,e){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),et(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,e)}sendUnlisten_(t,e,r,o){this.log_("Unlisten on "+t+" for "+e);const u={p:t},c="n";o&&(u.q=r,u.t=o),this.sendRequest(c,u)}onDisconnectPut(t,e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:r})}onDisconnectMerge(t,e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:r})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,r,o){const u={p:e,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(t,e,r,o){this.putInternal("p",t,e,r,o)}merge(t,e,r,o){this.putInternal("m",t,e,r,o)}putInternal(t,e,r,o,u){this.initConnection_();const c={p:e,d:r};u!==void 0&&(c.h=u),this.outstandingPuts_.push({action:t,request:c,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,r,u=>{this.log_(e+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+an(t));const e=t.r,r=this.requestCBHash_[e];r&&(delete this.requestCBHash_[e],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):h_("Unrecognized action received from server: "+an(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){et(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=cu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>CO&&(this.reconnectDelay_=cu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*AO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+ws.nextConnectionId_++,u=this.lastSessionId;let c=!1,m=null;const p=function(){m?m.close():(c=!0,r())},_=function(T){et(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(T)};this.realtime_={close:p,sendRequest:_};const E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,S]=await Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);c?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=S&&S.token,m=new _O(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,r,V=>{xn(V+" ("+this.repoInfo_.toString()+")"),this.interrupt(bO)},u))}catch(T){this.log_("Failed to get token: "+T),c||(this.repoInfo_.nodeAdmin&&xn(T),p())}}}interrupt(t){dn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){dn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],qp(this.interruptReasons_)&&(this.reconnectDelay_=cu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let r;e?r=e.map(u=>Tg(u)).join("$"):r="default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,e){const r=new ne(t).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(e),u.delete(e),u.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,e){dn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=rS&&(this.reconnectDelay_=sS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){dn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=rS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+MA.replace(/\./g,"-")]=1,zS()?t["framework.cordova"]=1:Hw()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Rf.getInstance().currentlyOnline();return qp(this.interruptReasons_)&&t}}ws.nextPersistentConnectionId_=0;ws.nextConnectionId_=0;class Mt{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Mt(t,e)}}class sd{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new Mt(Ho,t),o=new Mt(Ho,e);return this.compare(r,o)!==0}minPost(){return Mt.MIN}}let Zh;class sC extends sd{static get __EMPTY_NODE(){return Zh}static set __EMPTY_NODE(t){Zh=t}compare(t,e){return Oa(t.name,e.name)}isDefinedOn(t){throw Ko("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(Aa,Zh)}makePost(t,e){return et(typeof t=="string","KeyIndex indexValue must always be a string."),new Mt(t,Zh)}toString(){return".key"}}const xo=new sC;class Jh{constructor(t,e,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?r(t.key,e):1,o&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class nn{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??nn.RED,this.left=o??Mn.EMPTY_NODE,this.right=u??Mn.EMPTY_NODE}copy(t,e,r,o,u){return new nn(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o=o.copy(null,e,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let r,o;if(r=this,e(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),e(t,r.key)===0){if(r.right.isEmpty())return Mn.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}nn.RED=!0;nn.BLACK=!1;class wO{copy(t,e,r,o,u){return this}insert(t,e,r){return new nn(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Mn{constructor(t,e=Mn.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Mn(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,nn.BLACK,null,null))}remove(t){return new Mn(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,nn.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),e===0)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,o=null;for(;!r.isEmpty();)if(e=this.comparator_(t,r.key),e===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else e<0?r=r.left:e>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Jh(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Jh(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Jh(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Jh(this.root_,null,this.comparator_,!0,t)}}Mn.EMPTY_NODE=new wO;function RO(i,t){return Oa(i.name,t.name)}function Ig(i,t){return Oa(i,t)}let d_;function IO(i){d_=i}const rC=function(i){return typeof i=="number"?"number:"+PA(i):"string:"+i},aC=function(i){if(i.isLeafNode()){const t=i.val();et(typeof t=="string"||typeof t=="number"||typeof t=="object"&&wi(t,".sv"),"Priority must be a string or number.")}else et(i===d_||i.isEmpty(),"priority of unexpected type.");et(i===d_||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let aS;class tn{static set __childrenNodeConstructor(t){aS=t}static get __childrenNodeConstructor(){return aS}constructor(t,e=tn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,et(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new tn(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:tn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ot(t)?this:It(t)===".priority"?this.priorityNode_:tn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:tn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const r=It(t);return r===null?e:e.isEmpty()&&r!==".priority"?this:(et(r!==".priority"||Vr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,tn.__childrenNodeConstructor.EMPTY_NODE.updateChild(fe(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rC(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=PA(this.value_):t+=this.value_,this.lazyHash_=LA(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===tn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof tn.__childrenNodeConstructor?-1:(et(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,r=typeof this.value_,o=tn.VALUE_TYPE_ORDER.indexOf(e),u=tn.VALUE_TYPE_ORDER.indexOf(r);return et(o>=0,"Unknown leaf type: "+e),et(u>=0,"Unknown leaf type: "+r),o===u?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}tn.VALUE_TYPE_ORDER=["object","boolean","number","string"];let oC,lC;function NO(i){oC=i}function DO(i){lC=i}class OO extends sd{compare(t,e){const r=t.node.getPriority(),o=e.node.getPriority(),u=r.compareTo(o);return u===0?Oa(t.name,e.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(Aa,new tn("[PRIORITY-POST]",lC))}makePost(t,e){const r=oC(t);return new Mt(e,new tn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Te=new OO;const MO=Math.log(2);class VO{constructor(t){const e=u=>parseInt(Math.log(u)/MO,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const o=r(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const If=function(i,t,e,r){i.sort(t);const o=function(p,_){const E=_-p;let T,S;if(E===0)return null;if(E===1)return T=i[p],S=e?e(T):T,new nn(S,T.node,nn.BLACK,null,null);{const V=parseInt(E/2,10)+p,F=o(p,V),W=o(V+1,_);return T=i[V],S=e?e(T):T,new nn(S,T.node,nn.BLACK,F,W)}},u=function(p){let _=null,E=null,T=i.length;const S=function(F,W){const J=T-F,ht=T;T-=F;const Et=o(J+1,ht),gt=i[J],Qt=e?e(gt):gt;V(new nn(Qt,gt.node,W,null,Et))},V=function(F){_?(_.left=F,_=F):(E=F,_=F)};for(let F=0;F<p.count;++F){const W=p.nextBitIsOne(),J=Math.pow(2,p.count-(F+1));W?S(J,nn.BLACK):(S(J,nn.BLACK),S(J,nn.RED))}return E},c=new VO(i.length),m=u(c);return new Mn(r||t,m)};let Mp;const Co={};class Cs{static get Default(){return et(Co&&Te,"ChildrenNode.ts has not been loaded"),Mp=Mp||new Cs({".priority":Co},{".priority":Te}),Mp}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=Ea(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Mn?e:null}hasIndex(t){return wi(this.indexSet_,t.toString())}addIndex(t,e){et(t!==xo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=e.getIterator(Mt.Wrap);let c=u.getNext();for(;c;)o=o||t.isDefinedOn(c.node),r.push(c),c=u.getNext();let m;o?m=If(r,t.getCompare()):m=Co;const p=t.toString(),_={...this.indexSet_};_[p]=t;const E={...this.indexes_};return E[p]=m,new Cs(E,_)}addToIndexes(t,e){const r=cf(this.indexes_,(o,u)=>{const c=Ea(this.indexSet_,u);if(et(c,"Missing index implementation for "+u),o===Co)if(c.isDefinedOn(t.node)){const m=[],p=e.getIterator(Mt.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&m.push(_),_=p.getNext();return m.push(t),If(m,c.getCompare())}else return Co;else{const m=e.get(t.name);let p=o;return m&&(p=p.remove(new Mt(t.name,m))),p.insert(t,t.node)}});return new Cs(r,this.indexSet_)}removeFromIndexes(t,e){const r=cf(this.indexes_,o=>{if(o===Co)return o;{const u=e.get(t.name);return u?o.remove(new Mt(t.name,u)):o}});return new Cs(r,this.indexSet_)}}let hu;class St{static get EMPTY_NODE(){return hu||(hu=new St(new Mn(Ig),null,Cs.Default))}constructor(t,e,r){this.children_=t,this.priorityNode_=e,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aC(this.priorityNode_),this.children_.isEmpty()&&et(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hu}updatePriority(t){return this.children_.isEmpty()?this:new St(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?hu:e}}getChild(t){const e=It(t);return e===null?this:this.getImmediateChild(e).getChild(fe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(et(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const r=new Mt(t,e);let o,u;e.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,e),u=this.indexMap_.addToIndexes(r,this.children_));const c=o.isEmpty()?hu:this.priorityNode_;return new St(o,c,u)}}updateChild(t,e){const r=It(t);if(r===null)return e;{et(It(t)!==".priority"||Vr(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(fe(t),e);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let r=0,o=0,u=!0;if(this.forEachChild(Te,(c,m)=>{e[c]=m.val(t),r++,u&&St.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):u=!1}),!t&&u&&o<2*r){const c=[];for(const m in e)c[m]=e[m];return c}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+rC(this.getPriority().val())+":"),this.forEachChild(Te,(e,r)=>{const o=r.hash();o!==""&&(t+=":"+e+":"+o)}),this.lazyHash_=t===""?"":LA(t)}return this.lazyHash_}getPredecessorChildName(t,e,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new Mt(t,e));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const r=e.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Mt(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const r=e.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Mt(e,this.children_.get(e)):null}forEachChild(t,e){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>e(o.name,o.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const r=this.resolveIndex_(e);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Mt.Wrap);let u=o.peek();for(;u!=null&&e.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const r=this.resolveIndex_(e);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Mt.Wrap);let u=o.peek();for(;u!=null&&e.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fc?-1:0}withIndex(t){if(t===xo||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new St(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===xo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const r=this.getIterator(Te),o=e.getIterator(Te);let u=r.getNext(),c=o.getNext();for(;u&&c;){if(u.name!==c.name||!u.node.equals(c.node))return!1;u=r.getNext(),c=o.getNext()}return u===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===xo?null:this.indexMap_.get(t.toString())}}St.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xO extends St{constructor(){super(new Mn(Ig),St.EMPTY_NODE,Cs.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return St.EMPTY_NODE}isEmpty(){return!1}}const fc=new xO;Object.defineProperties(Mt,{MIN:{value:new Mt(Ho,St.EMPTY_NODE)},MAX:{value:new Mt(Aa,fc)}});sC.__EMPTY_NODE=St.EMPTY_NODE;tn.__childrenNodeConstructor=St;IO(fc);DO(fc);const LO=!0;function Me(i,t=null){if(i===null)return St.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),et(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const e=i;return new tn(e,Me(t))}if(!(i instanceof Array)&&LO){const e=[];let r=!1;if(vn(i,(c,m)=>{if(c.substring(0,1)!=="."){const p=Me(m);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),e.push(new Mt(c,p)))}}),e.length===0)return St.EMPTY_NODE;const u=If(e,RO,c=>c.name,Ig);if(r){const c=If(e,Te.getCompare());return new St(u,Me(t),new Cs({".priority":c},{".priority":Te}))}else return new St(u,Me(t),Cs.Default)}else{let e=St.EMPTY_NODE;return vn(i,(r,o)=>{if(wi(i,r)&&r.substring(0,1)!=="."){const u=Me(o);(u.isLeafNode()||!u.isEmpty())&&(e=e.updateImmediateChild(r,u))}}),e.updatePriority(Me(t))}}NO(Me);class kO extends sd{constructor(t){super(),this.indexPath_=t,et(!Ot(t)&&It(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),o=this.extractChild(e.node),u=r.compareTo(o);return u===0?Oa(t.name,e.name):u}makePost(t,e){const r=Me(t),o=St.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mt(e,o)}maxPost(){const t=St.EMPTY_NODE.updateChild(this.indexPath_,fc);return new Mt(Aa,t)}toString(){return Bu(this.indexPath_,0).join("/")}}class PO extends sd{compare(t,e){const r=t.node.compareTo(e.node);return r===0?Oa(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(t,e){const r=Me(t);return new Mt(e,r)}toString(){return".value"}}const UO=new PO;function uC(i){return{type:"value",snapshotNode:i}}function Go(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function qu(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function Fu(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}function zO(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}class Ng{constructor(t){this.index_=t}updateChild(t,e,r,o,u,c){et(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=t.getImmediateChild(e);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?t.hasChild(e)?c.trackChildChange(qu(e,m)):et(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?c.trackChildChange(Go(e,r)):c.trackChildChange(Fu(e,r,m))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Te,(o,u)=>{e.hasChild(o)||r.trackChildChange(qu(o,u))}),e.isLeafNode()||e.forEachChild(Te,(o,u)=>{if(t.hasChild(o)){const c=t.getImmediateChild(o);c.equals(u)||r.trackChildChange(Fu(o,u,c))}else r.trackChildChange(Go(o,u))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?St.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ju{constructor(t){this.indexedFilter_=new Ng(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ju.getStartPost_(t),this.endPost_=ju.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&r}updateChild(t,e,r,o,u,c){return this.matches(new Mt(e,r))||(r=St.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,o,u,c)}updateFullNode(t,e,r){e.isLeafNode()&&(e=St.EMPTY_NODE);let o=e.withIndex(this.index_);o=o.updatePriority(St.EMPTY_NODE);const u=this;return e.forEachChild(Te,(c,m)=>{u.matches(new Mt(c,m))||(o=o.updateImmediateChild(c,St.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}class BO{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=e=>{const r=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ju(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,r,o,u,c){return this.rangedFilter_.matches(new Mt(e,r))||(r=St.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,o,u,c):this.fullLimitUpdateChild_(t,e,r,u,c)}updateFullNode(t,e,r){let o;if(e.isLeafNode()||e.isEmpty())o=St.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){o=St.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),c++;else break;else continue}}else{o=e.withIndex(this.index_),o=o.updatePriority(St.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let c=0;for(;u.hasNext();){const m=u.getNext();c<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?c++:o=o.updateImmediateChild(m.name,St.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,o,u){let c;if(this.reverse_){const T=this.index_.getCompare();c=(S,V)=>T(V,S)}else c=this.index_.getCompare();const m=t;et(m.numChildren()===this.limit_,"");const p=new Mt(e,r),_=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(m.hasChild(e)){const T=m.getImmediateChild(e);let S=o.getChildAfterChild(this.index_,_,this.reverse_);for(;S!=null&&(S.name===e||m.hasChild(S.name));)S=o.getChildAfterChild(this.index_,S,this.reverse_);const V=S==null?1:c(S,p);if(E&&!r.isEmpty()&&V>=0)return u?.trackChildChange(Fu(e,r,T)),m.updateImmediateChild(e,r);{u?.trackChildChange(qu(e,T));const W=m.updateImmediateChild(e,St.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(u?.trackChildChange(Go(S.name,S.node)),W.updateImmediateChild(S.name,S.node)):W}}else return r.isEmpty()?t:E&&c(_,p)>=0?(u!=null&&(u.trackChildChange(qu(_.name,_.node)),u.trackChildChange(Go(e,r))),m.updateImmediateChild(e,r).updateImmediateChild(_.name,St.EMPTY_NODE)):t}}class Dg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Te}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return et(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return et(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ho}hasEnd(){return this.endSet_}getIndexEndValue(){return et(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return et(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Aa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return et(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Te}copy(){const t=new Dg;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function qO(i){return i.loadsAllData()?new Ng(i.getIndex()):i.hasLimit()?new BO(i):new ju(i)}function oS(i){const t={};if(i.isDefault())return t;let e;if(i.index_===Te?e="$priority":i.index_===UO?e="$value":i.index_===xo?e="$key":(et(i.index_ instanceof kO,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=an(e),i.startSet_){const r=i.startAfterSet_?"startAfter":"startAt";t[r]=an(i.indexStartValue_),i.startNameSet_&&(t[r]+=","+an(i.indexStartName_))}if(i.endSet_){const r=i.endBeforeSet_?"endBefore":"endAt";t[r]=an(i.indexEndValue_),i.endNameSet_&&(t[r]+=","+an(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function lS(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;e===""&&(i.isViewFromLeft()?e="l":e="r"),t.vf=e}return i.index_!==Te&&(t.i=i.index_.toString()),t}class Nf extends tC{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(et(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,r,o){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=hc("p:rest:"),this.listens_={}}listen(t,e,r,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const c=Nf.getListenId_(t,r),m={};this.listens_[c]=m;const p=oS(t._queryParams);this.restRequest_(u+".json",p,(_,E)=>{let T=E;if(_===404&&(T=null,_=null),_===null&&this.onDataUpdate_(u,T,!1,r),Ea(this.listens_,c)===m){let S;_?_===401?S="permission_denied":S="rest_error:"+_:S="ok",o(S,null)}})}unlisten(t,e){const r=Nf.getListenId_(t,e);delete this.listens_[r]}get(t){const e=oS(t._queryParams),r=t._path.toString(),o=new Xi;return this.restRequest_(r+".json",e,(u,c)=>{let m=c;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(e.auth=o.accessToken),u&&u.token&&(e.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+tR(e);this.log_("Sending REST request for "+c);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&m.readyState===4){this.log_("REST Response for "+c+" received. status:",m.status,"response:",m.responseText);let p=null;if(m.status>=200&&m.status<300){try{p=Iu(m.responseText)}catch{xn("Failed to parse JSON response for "+c+": "+m.responseText)}r(null,p)}else m.status!==401&&m.status!==404&&xn("Got unsuccessful REST response for "+c+" Status: "+m.status),r(m.status);r=null}},m.open("GET",c,!0),m.send()})}}class FO{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Df(){return{value:null,children:new Map}}function sl(i,t,e){if(Ot(t))i.value=e,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,e);else{const r=It(t);i.children.has(r)||i.children.set(r,Df());const o=i.children.get(r);t=fe(t),sl(o,t,e)}}function m_(i,t){if(Ot(t))return i.value=null,i.children.clear(),!0;if(i.value!==null){if(i.value.isLeafNode())return!1;{const e=i.value;return i.value=null,e.forEachChild(Te,(r,o)=>{sl(i,new ne(r),o)}),m_(i,t)}}else if(i.children.size>0){const e=It(t);return t=fe(t),i.children.has(e)&&m_(i.children.get(e),t)&&i.children.delete(e),i.children.size===0}else return!0}function p_(i,t,e){i.value!==null?e(t,i.value):jO(i,(r,o)=>{const u=new ne(t.toString()+"/"+r);p_(o,u,e)})}function jO(i,t){i.children.forEach((e,r)=>{t(r,e)})}class HO{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e={...t};return this.last_&&vn(this.last_,(r,o)=>{e[r]=e[r]-o}),this.last_=t,e}}const uS=10*1e3,GO=30*1e3,QO=300*1e3;class YO{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new HO(t);const r=uS+(GO-uS)*Math.random();Cu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;vn(t,(o,u)=>{u>0&&wi(this.statsToReport_,o)&&(e[o]=u,r=!0)}),r&&this.server_.reportStats(e),Cu(this.reportStats_.bind(this),Math.floor(Math.random()*2*QO))}}var Ai;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ai||(Ai={}));function cC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Og(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Mg(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class Of{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Ai.ACK_USER_WRITE,this.source=cC()}operationForChild(t){if(Ot(this.path)){if(this.affectedTree.value!=null)return et(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new ne(t));return new Of(Jt(),e,this.revert)}}else return et(It(this.path)===t,"operationForChild called for unrelated child."),new Of(fe(this.path),this.affectedTree,this.revert)}}class Hu{constructor(t,e){this.source=t,this.path=e,this.type=Ai.LISTEN_COMPLETE}operationForChild(t){return Ot(this.path)?new Hu(this.source,Jt()):new Hu(this.source,fe(this.path))}}class Ca{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Ai.OVERWRITE}operationForChild(t){return Ot(this.path)?new Ca(this.source,Jt(),this.snap.getImmediateChild(t)):new Ca(this.source,fe(this.path),this.snap)}}class Gu{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Ai.MERGE}operationForChild(t){if(Ot(this.path)){const e=this.children.subtree(new ne(t));return e.isEmpty()?null:e.value?new Ca(this.source,Jt(),e.value):new Gu(this.source,Jt(),e)}else return et(It(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Gu(this.source,fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ba{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ot(t))return this.isFullyInitialized()&&!this.filtered_;const e=It(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class KO{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function XO(i,t,e,r){const o=[],u=[];return t.forEach(c=>{c.type==="child_changed"&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(zO(c.childName,c.snapshotNode))}),fu(i,o,"child_removed",t,r,e),fu(i,o,"child_added",t,r,e),fu(i,o,"child_moved",u,r,e),fu(i,o,"child_changed",t,r,e),fu(i,o,"value",t,r,e),o}function fu(i,t,e,r,o,u){const c=r.filter(m=>m.type===e);c.sort((m,p)=>ZO(i,m,p)),c.forEach(m=>{const p=WO(i,m,u);o.forEach(_=>{_.respondsTo(m.type)&&t.push(_.createEvent(p,i.query_))})})}function WO(i,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function ZO(i,t,e){if(t.childName==null||e.childName==null)throw Ko("Should only compare child_ events.");const r=new Mt(t.childName,t.snapshotNode),o=new Mt(e.childName,e.snapshotNode);return i.index_.compare(r,o)}function rd(i,t){return{eventCache:i,serverCache:t}}function bu(i,t,e,r){return rd(new ba(t,e,r),i.serverCache)}function hC(i,t,e,r){return rd(i.eventCache,new ba(t,e,r))}function __(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function wa(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let Vp;const JO=()=>(Vp||(Vp=new Mn(kD)),Vp);class ge{static fromObject(t){let e=new ge(null);return vn(t,(r,o)=>{e=e.set(new ne(r),o)}),e}constructor(t,e=JO()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Jt(),value:this.value};if(Ot(t))return null;{const r=It(t),o=this.children.get(r);if(o!==null){const u=o.findRootMostMatchingPathAndValue(fe(t),e);return u!=null?{path:Ve(new ne(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ot(t))return this;{const e=It(t),r=this.children.get(e);return r!==null?r.subtree(fe(t)):new ge(null)}}set(t,e){if(Ot(t))return new ge(e,this.children);{const r=It(t),u=(this.children.get(r)||new ge(null)).set(fe(t),e),c=this.children.insert(r,u);return new ge(this.value,c)}}remove(t){if(Ot(t))return this.children.isEmpty()?new ge(null):new ge(null,this.children);{const e=It(t),r=this.children.get(e);if(r){const o=r.remove(fe(t));let u;return o.isEmpty()?u=this.children.remove(e):u=this.children.insert(e,o),this.value===null&&u.isEmpty()?new ge(null):new ge(this.value,u)}else return this}}get(t){if(Ot(t))return this.value;{const e=It(t),r=this.children.get(e);return r?r.get(fe(t)):null}}setTree(t,e){if(Ot(t))return e;{const r=It(t),u=(this.children.get(r)||new ge(null)).setTree(fe(t),e);let c;return u.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,u),new ge(this.value,c)}}fold(t){return this.fold_(Jt(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(Ve(t,o),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,Jt(),e)}findOnPath_(t,e,r){const o=this.value?r(e,this.value):!1;if(o)return o;if(Ot(t))return null;{const u=It(t),c=this.children.get(u);return c?c.findOnPath_(fe(t),Ve(e,u),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Jt(),e)}foreachOnPath_(t,e,r){if(Ot(t))return this;{this.value&&r(e,this.value);const o=It(t),u=this.children.get(o);return u?u.foreachOnPath_(fe(t),Ve(e,o),r):new ge(null)}}foreach(t){this.foreach_(Jt(),t)}foreach_(t,e){this.children.inorderTraversal((r,o)=>{o.foreach_(Ve(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class Ci{constructor(t){this.writeTree_=t}static empty(){return new Ci(new ge(null))}}function wu(i,t,e){if(Ot(t))return new Ci(new ge(e));{const r=i.writeTree_.findRootMostValueAndPath(t);if(r!=null){const o=r.path;let u=r.value;const c=On(o,t);return u=u.updateChild(c,e),new Ci(i.writeTree_.set(o,u))}else{const o=new ge(e),u=i.writeTree_.setTree(t,o);return new Ci(u)}}}function cS(i,t,e){let r=i;return vn(e,(o,u)=>{r=wu(r,Ve(t,o),u)}),r}function hS(i,t){if(Ot(t))return Ci.empty();{const e=i.writeTree_.setTree(t,new ge(null));return new Ci(e)}}function g_(i,t){return Ma(i,t)!=null}function Ma(i,t){const e=i.writeTree_.findRootMostValueAndPath(t);return e!=null?i.writeTree_.get(e.path).getChild(On(e.path,t)):null}function fS(i){const t=[],e=i.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Te,(r,o)=>{t.push(new Mt(r,o))}):i.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&t.push(new Mt(r,o.value))}),t}function br(i,t){if(Ot(t))return i;{const e=Ma(i,t);return e!=null?new Ci(new ge(e)):new Ci(i.writeTree_.subtree(t))}}function y_(i){return i.writeTree_.isEmpty()}function Qo(i,t){return fC(Jt(),i.writeTree_,t)}function fC(i,t,e){if(t.value!=null)return e.updateChild(i,t.value);{let r=null;return t.children.inorderTraversal((o,u)=>{o===".priority"?(et(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):e=fC(Ve(i,o),u,e)}),!e.getChild(i).isEmpty()&&r!==null&&(e=e.updateChild(Ve(i,".priority"),r)),e}}function Vg(i,t){return _C(t,i)}function $O(i,t,e,r,o){et(r>i.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),i.allWrites.push({path:t,snap:e,writeId:r,visible:o}),o&&(i.visibleWrites=wu(i.visibleWrites,t,e)),i.lastWriteId=r}function tM(i,t){for(let e=0;e<i.allWrites.length;e++){const r=i.allWrites[e];if(r.writeId===t)return r}return null}function eM(i,t){const e=i.allWrites.findIndex(m=>m.writeId===t);et(e>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[e];i.allWrites.splice(e,1);let o=r.visible,u=!1,c=i.allWrites.length-1;for(;o&&c>=0;){const m=i.allWrites[c];m.visible&&(c>=e&&nM(m,r.path)?o=!1:li(r.path,m.path)&&(u=!0)),c--}if(o){if(u)return iM(i),!0;if(r.snap)i.visibleWrites=hS(i.visibleWrites,r.path);else{const m=r.children;vn(m,p=>{i.visibleWrites=hS(i.visibleWrites,Ve(r.path,p))})}return!0}else return!1}function nM(i,t){if(i.snap)return li(i.path,t);for(const e in i.children)if(i.children.hasOwnProperty(e)&&li(Ve(i.path,e),t))return!0;return!1}function iM(i){i.visibleWrites=dC(i.allWrites,sM,Jt()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function sM(i){return i.visible}function dC(i,t,e){let r=Ci.empty();for(let o=0;o<i.length;++o){const u=i[o];if(t(u)){const c=u.path;let m;if(u.snap)li(e,c)?(m=On(e,c),r=wu(r,m,u.snap)):li(c,e)&&(m=On(c,e),r=wu(r,Jt(),u.snap.getChild(m)));else if(u.children){if(li(e,c))m=On(e,c),r=cS(r,m,u.children);else if(li(c,e))if(m=On(c,e),Ot(m))r=cS(r,Jt(),u.children);else{const p=Ea(u.children,It(m));if(p){const _=p.getChild(fe(m));r=wu(r,Jt(),_)}}}else throw Ko("WriteRecord should have .snap or .children")}}return r}function mC(i,t,e,r,o){if(!r&&!o){const u=Ma(i.visibleWrites,t);if(u!=null)return u;{const c=br(i.visibleWrites,t);if(y_(c))return e;if(e==null&&!g_(c,Jt()))return null;{const m=e||St.EMPTY_NODE;return Qo(c,m)}}}else{const u=br(i.visibleWrites,t);if(!o&&y_(u))return e;if(!o&&e==null&&!g_(u,Jt()))return null;{const c=function(_){return(_.visible||o)&&(!r||!~r.indexOf(_.writeId))&&(li(_.path,t)||li(t,_.path))},m=dC(i.allWrites,c,t),p=e||St.EMPTY_NODE;return Qo(m,p)}}}function rM(i,t,e){let r=St.EMPTY_NODE;const o=Ma(i.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Te,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(e){const u=br(i.visibleWrites,t);return e.forEachChild(Te,(c,m)=>{const p=Qo(br(u,new ne(c)),m);r=r.updateImmediateChild(c,p)}),fS(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{const u=br(i.visibleWrites,t);return fS(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function aM(i,t,e,r,o){et(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=Ve(t,e);if(g_(i.visibleWrites,u))return null;{const c=br(i.visibleWrites,u);return y_(c)?o.getChild(e):Qo(c,o.getChild(e))}}function oM(i,t,e,r){const o=Ve(t,e),u=Ma(i.visibleWrites,o);if(u!=null)return u;if(r.isCompleteForChild(e)){const c=br(i.visibleWrites,o);return Qo(c,r.getNode().getImmediateChild(e))}else return null}function lM(i,t){return Ma(i.visibleWrites,t)}function uM(i,t,e,r,o,u,c){let m;const p=br(i.visibleWrites,t),_=Ma(p,Jt());if(_!=null)m=_;else if(e!=null)m=Qo(p,e);else return[];if(m=m.withIndex(c),!m.isEmpty()&&!m.isLeafNode()){const E=[],T=c.getCompare(),S=u?m.getReverseIteratorFrom(r,c):m.getIteratorFrom(r,c);let V=S.getNext();for(;V&&E.length<o;)T(V,r)!==0&&E.push(V),V=S.getNext();return E}else return[]}function cM(){return{visibleWrites:Ci.empty(),allWrites:[],lastWriteId:-1}}function Mf(i,t,e,r){return mC(i.writeTree,i.treePath,t,e,r)}function xg(i,t){return rM(i.writeTree,i.treePath,t)}function dS(i,t,e,r){return aM(i.writeTree,i.treePath,t,e,r)}function Vf(i,t){return lM(i.writeTree,Ve(i.treePath,t))}function hM(i,t,e,r,o,u){return uM(i.writeTree,i.treePath,t,e,r,o,u)}function Lg(i,t,e){return oM(i.writeTree,i.treePath,t,e)}function pC(i,t){return _C(Ve(i.treePath,t),i.writeTree)}function _C(i,t){return{treePath:i,writeTree:t}}class fM{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;et(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),et(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if(e==="child_added"&&u==="child_removed")this.changeMap.set(r,Fu(r,t.snapshotNode,o.snapshotNode));else if(e==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(e==="child_removed"&&u==="child_changed")this.changeMap.set(r,qu(r,o.oldSnap));else if(e==="child_changed"&&u==="child_added")this.changeMap.set(r,Go(r,t.snapshotNode));else if(e==="child_changed"&&u==="child_changed")this.changeMap.set(r,Fu(r,t.snapshotNode,o.oldSnap));else throw Ko("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}class dM{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}}const gC=new dM;class kg{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new ba(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lg(this.writes_,t,r)}}getChildAfterChild(t,e,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wa(this.viewCache_),u=hM(this.writes_,o,e,1,r,t);return u.length===0?null:u[0]}}function mM(i){return{filter:i}}function pM(i,t){et(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),et(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function _M(i,t,e,r,o){const u=new fM;let c,m;if(e.type===Ai.OVERWRITE){const _=e;_.source.fromUser?c=v_(i,t,_.path,_.snap,r,o,u):(et(_.source.fromServer,"Unknown source."),m=_.source.tagged||t.serverCache.isFiltered()&&!Ot(_.path),c=xf(i,t,_.path,_.snap,r,o,m,u))}else if(e.type===Ai.MERGE){const _=e;_.source.fromUser?c=yM(i,t,_.path,_.children,r,o,u):(et(_.source.fromServer,"Unknown source."),m=_.source.tagged||t.serverCache.isFiltered(),c=E_(i,t,_.path,_.children,r,o,m,u))}else if(e.type===Ai.ACK_USER_WRITE){const _=e;_.revert?c=TM(i,t,_.path,r,o,u):c=vM(i,t,_.path,_.affectedTree,r,o,u)}else if(e.type===Ai.LISTEN_COMPLETE)c=EM(i,t,e.path,r,u);else throw Ko("Unknown operation type: "+e.type);const p=u.getChanges();return gM(t,c,p),{viewCache:c,changes:p}}function gM(i,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=__(i);(e.length>0||!i.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&e.push(uC(__(t)))}}function yC(i,t,e,r,o,u){const c=t.eventCache;if(Vf(r,e)!=null)return t;{let m,p;if(Ot(e))if(et(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=wa(t),E=_ instanceof St?_:St.EMPTY_NODE,T=xg(r,E);m=i.filter.updateFullNode(t.eventCache.getNode(),T,u)}else{const _=Mf(r,wa(t));m=i.filter.updateFullNode(t.eventCache.getNode(),_,u)}else{const _=It(e);if(_===".priority"){et(Vr(e)===1,"Can't have a priority with additional path components");const E=c.getNode();p=t.serverCache.getNode();const T=dS(r,e,E,p);T!=null?m=i.filter.updatePriority(E,T):m=c.getNode()}else{const E=fe(e);let T;if(c.isCompleteForChild(_)){p=t.serverCache.getNode();const S=dS(r,e,c.getNode(),p);S!=null?T=c.getNode().getImmediateChild(_).updateChild(E,S):T=c.getNode().getImmediateChild(_)}else T=Lg(r,_,t.serverCache);T!=null?m=i.filter.updateChild(c.getNode(),_,T,E,o,u):m=c.getNode()}}return bu(t,m,c.isFullyInitialized()||Ot(e),i.filter.filtersNodes())}}function xf(i,t,e,r,o,u,c,m){const p=t.serverCache;let _;const E=c?i.filter:i.filter.getIndexedFilter();if(Ot(e))_=E.updateFullNode(p.getNode(),r,null);else if(E.filtersNodes()&&!p.isFiltered()){const V=p.getNode().updateChild(e,r);_=E.updateFullNode(p.getNode(),V,null)}else{const V=It(e);if(!p.isCompleteForPath(e)&&Vr(e)>1)return t;const F=fe(e),J=p.getNode().getImmediateChild(V).updateChild(F,r);V===".priority"?_=E.updatePriority(p.getNode(),J):_=E.updateChild(p.getNode(),V,J,F,gC,null)}const T=hC(t,_,p.isFullyInitialized()||Ot(e),E.filtersNodes()),S=new kg(o,T,u);return yC(i,T,e,o,S,m)}function v_(i,t,e,r,o,u,c){const m=t.eventCache;let p,_;const E=new kg(o,t,u);if(Ot(e))_=i.filter.updateFullNode(t.eventCache.getNode(),r,c),p=bu(t,_,!0,i.filter.filtersNodes());else{const T=It(e);if(T===".priority")_=i.filter.updatePriority(t.eventCache.getNode(),r),p=bu(t,_,m.isFullyInitialized(),m.isFiltered());else{const S=fe(e),V=m.getNode().getImmediateChild(T);let F;if(Ot(S))F=r;else{const W=E.getCompleteChild(T);W!=null?bg(S)===".priority"&&W.getChild(nC(S)).isEmpty()?F=W:F=W.updateChild(S,r):F=St.EMPTY_NODE}if(V.equals(F))p=t;else{const W=i.filter.updateChild(m.getNode(),T,F,S,E,c);p=bu(t,W,m.isFullyInitialized(),i.filter.filtersNodes())}}}return p}function mS(i,t){return i.eventCache.isCompleteForChild(t)}function yM(i,t,e,r,o,u,c){let m=t;return r.foreach((p,_)=>{const E=Ve(e,p);mS(t,It(E))&&(m=v_(i,m,E,_,o,u,c))}),r.foreach((p,_)=>{const E=Ve(e,p);mS(t,It(E))||(m=v_(i,m,E,_,o,u,c))}),m}function pS(i,t,e){return e.foreach((r,o)=>{t=t.updateChild(r,o)}),t}function E_(i,t,e,r,o,u,c,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let p=t,_;Ot(e)?_=r:_=new ge(null).setTree(e,r);const E=t.serverCache.getNode();return _.children.inorderTraversal((T,S)=>{if(E.hasChild(T)){const V=t.serverCache.getNode().getImmediateChild(T),F=pS(i,V,S);p=xf(i,p,new ne(T),F,o,u,c,m)}}),_.children.inorderTraversal((T,S)=>{const V=!t.serverCache.isCompleteForChild(T)&&S.value===null;if(!E.hasChild(T)&&!V){const F=t.serverCache.getNode().getImmediateChild(T),W=pS(i,F,S);p=xf(i,p,new ne(T),W,o,u,c,m)}}),p}function vM(i,t,e,r,o,u,c){if(Vf(o,e)!=null)return t;const m=t.serverCache.isFiltered(),p=t.serverCache;if(r.value!=null){if(Ot(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return xf(i,t,e,p.getNode().getChild(e),o,u,m,c);if(Ot(e)){let _=new ge(null);return p.getNode().forEachChild(xo,(E,T)=>{_=_.set(new ne(E),T)}),E_(i,t,e,_,o,u,m,c)}else return t}else{let _=new ge(null);return r.foreach((E,T)=>{const S=Ve(e,E);p.isCompleteForPath(S)&&(_=_.set(E,p.getNode().getChild(S)))}),E_(i,t,e,_,o,u,m,c)}}function EM(i,t,e,r,o){const u=t.serverCache,c=hC(t,u.getNode(),u.isFullyInitialized()||Ot(e),u.isFiltered());return yC(i,c,e,r,gC,o)}function TM(i,t,e,r,o,u){let c;if(Vf(r,e)!=null)return t;{const m=new kg(r,t,o),p=t.eventCache.getNode();let _;if(Ot(e)||It(e)===".priority"){let E;if(t.serverCache.isFullyInitialized())E=Mf(r,wa(t));else{const T=t.serverCache.getNode();et(T instanceof St,"serverChildren would be complete if leaf node"),E=xg(r,T)}E=E,_=i.filter.updateFullNode(p,E,u)}else{const E=It(e);let T=Lg(r,E,t.serverCache);T==null&&t.serverCache.isCompleteForChild(E)&&(T=p.getImmediateChild(E)),T!=null?_=i.filter.updateChild(p,E,T,fe(e),m,u):t.eventCache.getNode().hasChild(E)?_=i.filter.updateChild(p,E,St.EMPTY_NODE,fe(e),m,u):_=p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=Mf(r,wa(t)),c.isLeafNode()&&(_=i.filter.updateFullNode(_,c,u)))}return c=t.serverCache.isFullyInitialized()||Vf(r,Jt())!=null,bu(t,_,c,i.filter.filtersNodes())}}class SM{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new Ng(r.getIndex()),u=qO(r);this.processor_=mM(u);const c=e.serverCache,m=e.eventCache,p=o.updateFullNode(St.EMPTY_NODE,c.getNode(),null),_=u.updateFullNode(St.EMPTY_NODE,m.getNode(),null),E=new ba(p,c.isFullyInitialized(),o.filtersNodes()),T=new ba(_,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=rd(T,E),this.eventGenerator_=new KO(this.query_)}get query(){return this.query_}}function AM(i){return i.viewCache_.serverCache.getNode()}function CM(i,t){const e=wa(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!Ot(t)&&!e.getImmediateChild(It(t)).isEmpty())?e.getChild(t):null}function _S(i){return i.eventRegistrations_.length===0}function bM(i,t){i.eventRegistrations_.push(t)}function gS(i,t,e){const r=[];if(e){et(t==null,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(e,o);c&&r.push(c)})}if(t){let o=[];for(let u=0;u<i.eventRegistrations_.length;++u){const c=i.eventRegistrations_[u];if(!c.matches(t))o.push(c);else if(t.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=o}else i.eventRegistrations_=[];return r}function yS(i,t,e,r){t.type===Ai.MERGE&&t.source.queryId!==null&&(et(wa(i.viewCache_),"We should always have a full cache before handling merges"),et(__(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,u=_M(i.processor_,o,t,e,r);return pM(i.processor_,u.viewCache),et(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,vC(i,u.changes,u.viewCache.eventCache.getNode(),null)}function wM(i,t){const e=i.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Te,(u,c)=>{r.push(Go(u,c))}),e.isFullyInitialized()&&r.push(uC(e.getNode())),vC(i,r,e.getNode(),t)}function vC(i,t,e,r){const o=r?[r]:i.eventRegistrations_;return XO(i.eventGenerator_,t,e,o)}let Lf;class RM{constructor(){this.views=new Map}}function IM(i){et(!Lf,"__referenceConstructor has already been defined"),Lf=i}function NM(){return et(Lf,"Reference.ts has not been loaded"),Lf}function DM(i){return i.views.size===0}function Pg(i,t,e,r){const o=t.source.queryId;if(o!==null){const u=i.views.get(o);return et(u!=null,"SyncTree gave us an op for an invalid query."),yS(u,t,e,r)}else{let u=[];for(const c of i.views.values())u=u.concat(yS(c,t,e,r));return u}}function OM(i,t,e,r,o){const u=t._queryIdentifier,c=i.views.get(u);if(!c){let m=Mf(e,o?r:null),p=!1;m?p=!0:r instanceof St?(m=xg(e,r),p=!1):(m=St.EMPTY_NODE,p=!1);const _=rd(new ba(m,p,!1),new ba(r,o,!1));return new SM(t,_)}return c}function MM(i,t,e,r,o,u){const c=OM(i,t,r,o,u);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,c),bM(c,e),wM(c,e)}function VM(i,t,e,r){const o=t._queryIdentifier,u=[];let c=[];const m=xr(i);if(o==="default")for(const[p,_]of i.views.entries())c=c.concat(gS(_,e,r)),_S(_)&&(i.views.delete(p),_.query._queryParams.loadsAllData()||u.push(_.query));else{const p=i.views.get(o);p&&(c=c.concat(gS(p,e,r)),_S(p)&&(i.views.delete(o),p.query._queryParams.loadsAllData()||u.push(p.query)))}return m&&!xr(i)&&u.push(new(NM())(t._repo,t._path)),{removed:u,events:c}}function EC(i){const t=[];for(const e of i.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Lo(i,t){let e=null;for(const r of i.views.values())e=e||CM(r,t);return e}function TC(i,t){if(t._queryParams.loadsAllData())return ad(i);{const r=t._queryIdentifier;return i.views.get(r)}}function SC(i,t){return TC(i,t)!=null}function xr(i){return ad(i)!=null}function ad(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let kf;function xM(i){et(!kf,"__referenceConstructor has already been defined"),kf=i}function LM(){return et(kf,"Reference.ts has not been loaded"),kf}let kM=1;class vS{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ge(null),this.pendingWriteTree_=cM(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ug(i,t,e,r,o){return $O(i.pendingWriteTree_,t,e,r,o),o?dc(i,new Ca(cC(),t,e)):[]}function ga(i,t,e=!1){const r=tM(i.pendingWriteTree_,t);if(eM(i.pendingWriteTree_,t)){let u=new ge(null);return r.snap!=null?u=u.set(Jt(),!0):vn(r.children,c=>{u=u.set(new ne(c),!0)}),dc(i,new Of(r.path,u,e))}else return[]}function od(i,t,e){return dc(i,new Ca(Og(),t,e))}function PM(i,t,e){const r=ge.fromObject(e);return dc(i,new Gu(Og(),t,r))}function UM(i,t){return dc(i,new Hu(Og(),t))}function zM(i,t,e){const r=zg(i,e);if(r){const o=Bg(r),u=o.path,c=o.queryId,m=On(u,t),p=new Hu(Mg(c),m);return qg(i,u,p)}else return[]}function T_(i,t,e,r,o=!1){const u=t._path,c=i.syncPointTree_.get(u);let m=[];if(c&&(t._queryIdentifier==="default"||SC(c,t))){const p=VM(c,t,e,r);DM(c)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const _=p.removed;if(m=p.events,!o){const E=_.findIndex(S=>S._queryParams.loadsAllData())!==-1,T=i.syncPointTree_.findOnPath(u,(S,V)=>xr(V));if(E&&!T){const S=i.syncPointTree_.subtree(u);if(!S.isEmpty()){const V=FM(S);for(let F=0;F<V.length;++F){const W=V[F],J=W.query,ht=bC(i,W);i.listenProvider_.startListening(Ru(J),Pf(i,J),ht.hashFn,ht.onComplete)}}}!T&&_.length>0&&!r&&(E?i.listenProvider_.stopListening(Ru(t),null):_.forEach(S=>{const V=i.queryToTagMap.get(ud(S));i.listenProvider_.stopListening(Ru(S),V)}))}jM(i,_)}return m}function BM(i,t,e,r){const o=zg(i,r);if(o!=null){const u=Bg(o),c=u.path,m=u.queryId,p=On(c,t),_=new Ca(Mg(m),p,e);return qg(i,c,_)}else return[]}function qM(i,t,e,r){const o=zg(i,r);if(o){const u=Bg(o),c=u.path,m=u.queryId,p=On(c,t),_=ge.fromObject(e),E=new Gu(Mg(m),p,_);return qg(i,c,E)}else return[]}function ES(i,t,e,r=!1){const o=t._path;let u=null,c=!1;i.syncPointTree_.foreachOnPath(o,(S,V)=>{const F=On(S,o);u=u||Lo(V,F),c=c||xr(V)});let m=i.syncPointTree_.get(o);m?(c=c||xr(m),u=u||Lo(m,Jt())):(m=new RM,i.syncPointTree_=i.syncPointTree_.set(o,m));let p;u!=null?p=!0:(p=!1,u=St.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((V,F)=>{const W=Lo(F,Jt());W&&(u=u.updateImmediateChild(V,W))}));const _=SC(m,t);if(!_&&!t._queryParams.loadsAllData()){const S=ud(t);et(!i.queryToTagMap.has(S),"View does not exist, but we have a tag");const V=HM();i.queryToTagMap.set(S,V),i.tagToQueryMap.set(V,S)}const E=Vg(i.pendingWriteTree_,o);let T=MM(m,t,e,E,u,p);if(!_&&!c&&!r){const S=TC(m,t);T=T.concat(GM(i,t,S))}return T}function ld(i,t,e){const o=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(t,(c,m)=>{const p=On(c,t),_=Lo(m,p);if(_)return _});return mC(o,t,u,e,!0)}function dc(i,t){return AC(t,i.syncPointTree_,null,Vg(i.pendingWriteTree_,Jt()))}function AC(i,t,e,r){if(Ot(i.path))return CC(i,t,e,r);{const o=t.get(Jt());e==null&&o!=null&&(e=Lo(o,Jt()));let u=[];const c=It(i.path),m=i.operationForChild(c),p=t.children.get(c);if(p&&m){const _=e?e.getImmediateChild(c):null,E=pC(r,c);u=u.concat(AC(m,p,_,E))}return o&&(u=u.concat(Pg(o,i,r,e))),u}}function CC(i,t,e,r){const o=t.get(Jt());e==null&&o!=null&&(e=Lo(o,Jt()));let u=[];return t.children.inorderTraversal((c,m)=>{const p=e?e.getImmediateChild(c):null,_=pC(r,c),E=i.operationForChild(c);E&&(u=u.concat(CC(E,m,p,_)))}),o&&(u=u.concat(Pg(o,i,r,e))),u}function bC(i,t){const e=t.query,r=Pf(i,e);return{hashFn:()=>(AM(t)||St.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?zM(i,e._path,r):UM(i,e._path);{const u=zD(o,e);return T_(i,e,null,u)}}}}function Pf(i,t){const e=ud(t);return i.queryToTagMap.get(e)}function ud(i){return i._path.toString()+"$"+i._queryIdentifier}function zg(i,t){return i.tagToQueryMap.get(t)}function Bg(i){const t=i.indexOf("$");return et(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new ne(i.substr(0,t))}}function qg(i,t,e){const r=i.syncPointTree_.get(t);et(r,"Missing sync point for query tag that we're tracking");const o=Vg(i.pendingWriteTree_,t);return Pg(r,e,o,null)}function FM(i){return i.fold((t,e,r)=>{if(e&&xr(e))return[ad(e)];{let o=[];return e&&(o=EC(e)),vn(r,(u,c)=>{o=o.concat(c)}),o}})}function Ru(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(LM())(i._repo,i._path):i}function jM(i,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const o=ud(r),u=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(u)}}}function HM(){return kM++}function GM(i,t,e){const r=t._path,o=Pf(i,t),u=bC(i,e),c=i.listenProvider_.startListening(Ru(t),o,u.hashFn,u.onComplete),m=i.syncPointTree_.subtree(r);if(o)et(!xr(m.value),"If we're adding a query, it shouldn't be shadowed");else{const p=m.fold((_,E,T)=>{if(!Ot(_)&&E&&xr(E))return[ad(E).query];{let S=[];return E&&(S=S.concat(EC(E).map(V=>V.query))),vn(T,(V,F)=>{S=S.concat(F)}),S}});for(let _=0;_<p.length;++_){const E=p[_];i.listenProvider_.stopListening(Ru(E),Pf(i,E))}}return c}class Fg{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Fg(e)}node(){return this.node_}}class jg{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Ve(this.path_,t);return new jg(this.syncTree_,e)}node(){return ld(this.syncTree_,this.path_)}}const QM=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},TS=function(i,t,e){if(!i||typeof i!="object")return i;if(et(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return YM(i[".sv"],t,e);if(typeof i[".sv"]=="object")return KM(i[".sv"],t);et(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},YM=function(i,t,e){switch(i){case"timestamp":return e.timestamp;default:et(!1,"Unexpected server value: "+i)}},KM=function(i,t,e){i.hasOwnProperty("increment")||et(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;typeof r!="number"&&et(!1,"Unexpected increment value: "+r);const o=t.node();if(et(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return typeof c!="number"?r:c+r},XM=function(i,t,e,r){return Gg(t,new jg(e,i),r)},Hg=function(i,t,e){return Gg(i,new Fg(t),e)};function Gg(i,t,e){const r=i.getPriority().val(),o=TS(r,t.getImmediateChild(".priority"),e);let u;if(i.isLeafNode()){const c=i,m=TS(c.getValue(),t,e);return m!==c.getValue()||o!==c.getPriority().val()?new tn(m,Me(o)):i}else{const c=i;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new tn(o))),c.forEachChild(Te,(m,p)=>{const _=Gg(p,t.getImmediateChild(m),e);_!==p&&(u=u.updateImmediateChild(m,_))}),u}}class Qg{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function cd(i,t){let e=t instanceof ne?t:new ne(t),r=i,o=It(e);for(;o!==null;){const u=Ea(r.node.children,o)||{children:{},childCount:0};r=new Qg(o,r,u),e=fe(e),o=It(e)}return r}function Va(i){return i.node.value}function Yg(i,t){i.node.value=t,S_(i)}function wC(i){return i.node.childCount>0}function WM(i){return Va(i)===void 0&&!wC(i)}function hd(i,t){vn(i.node.children,(e,r)=>{t(new Qg(e,i,r))})}function RC(i,t,e,r){e&&t(i),hd(i,o=>{RC(o,t,!0)})}function ZM(i,t,e){let r=i.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function mc(i){return new ne(i.parent===null?i.name:mc(i.parent)+"/"+i.name)}function S_(i){i.parent!==null&&JM(i.parent,i.name,i)}function JM(i,t,e){const r=WM(e),o=wi(i.node.children,t);r&&o?(delete i.node.children[t],i.node.childCount--,S_(i)):!r&&!o&&(i.node.children[t]=e.node,i.node.childCount++,S_(i))}const $M=/[\[\].#$\/\u0000-\u001F\u007F]/,t4=/[\[\].#$\u0000-\u001F\u007F]/,xp=10*1024*1024,Kg=function(i){return typeof i=="string"&&i.length!==0&&!$M.test(i)},IC=function(i){return typeof i=="string"&&i.length!==0&&!t4.test(i)},e4=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),IC(i)},Xg=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!id(i)||i&&typeof i=="object"&&wi(i,".sv")},A_=function(i,t,e,r){pc(ko(i,"value"),t,e)},pc=function(i,t,e){const r=e instanceof ne?new vO(e,i):e;if(t===void 0)throw new Error(i+"contains undefined "+ma(r));if(typeof t=="function")throw new Error(i+"contains a function "+ma(r)+" with contents = "+t.toString());if(id(t))throw new Error(i+"contains "+t.toString()+" "+ma(r));if(typeof t=="string"&&t.length>xp/3&&qf(t)>xp)throw new Error(i+"contains a string greater than "+xp+" utf8 bytes "+ma(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,u=!1;if(vn(t,(c,m)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(u=!0,!Kg(c)))throw new Error(i+" contains an invalid key ("+c+") "+ma(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);EO(r,c),pc(i,m,r),TO(r)}),o&&u)throw new Error(i+' contains ".value" child '+ma(r)+" in addition to actual children.")}},n4=function(i,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const u=Bu(r);for(let c=0;c<u.length;c++)if(!(u[c]===".priority"&&c===u.length-1)){if(!Kg(u[c]))throw new Error(i+"contains an invalid key ("+u[c]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(yO);let o=null;for(e=0;e<t.length;e++){if(r=t[e],o!==null&&li(o,r))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}},i4=function(i,t,e,r){const o=ko(i,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const u=[];vn(t,(c,m)=>{const p=new ne(c);if(pc(o,m,Ve(e,p)),bg(p)===".priority"&&!Xg(m))throw new Error(o+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(p)}),n4(o,u)},s4=function(i,t,e){if(id(t))throw new Error(ko(i,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xg(t))throw new Error(ko(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},NC=function(i,t,e,r){if(!IC(e))throw new Error(ko(i,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},r4=function(i,t,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),NC(i,t,e)},ya=function(i,t){if(It(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},a4=function(i,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Kg(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!e4(e))throw new Error(ko(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class o4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wg(i,t){let e=null;for(let r=0;r<t.length;r++){const o=t[r],u=o.getPath();e!==null&&!wg(u,e.path)&&(i.eventLists_.push(e),e=null),e===null&&(e={events:[],path:u}),e.events.push(o)}e&&i.eventLists_.push(e)}function DC(i,t,e){Wg(i,e),OC(i,r=>wg(r,t))}function es(i,t,e){Wg(i,e),OC(i,r=>li(r,t)||li(t,r))}function OC(i,t){i.recursionDepth_++;let e=!0;for(let r=0;r<i.eventLists_.length;r++){const o=i.eventLists_[r];if(o){const u=o.path;t(u)?(l4(i.eventLists_[r]),i.eventLists_[r]=null):e=!1}}e&&(i.eventLists_=[]),i.recursionDepth_--}function l4(i){for(let t=0;t<i.events.length;t++){const e=i.events[t];if(e!==null){i.events[t]=null;const r=e.getEventRunner();Au&&dn("event: "+e.toString()),il(r)}}}const u4="repo_interrupt",c4=25;class h4{constructor(t,e,r,o){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new o4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Df(),this.transactionQueueTree_=new Qg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function f4(i,t,e){if(i.stats_=Ag(i.repoInfo_),i.forceRestClient_||jD())i.server_=new Nf(i.repoInfo_,(r,o,u,c)=>{SS(i,r,o,u,c)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>AS(i,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{an(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new ws(i.repoInfo_,t,(r,o,u,c)=>{SS(i,r,o,u,c)},r=>{AS(i,r)},r=>{m4(i,r)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=KD(i.repoInfo_,()=>new YO(i.stats_,i.server_)),i.infoData_=new FO,i.infoSyncTree_=new vS({startListening:(r,o,u,c)=>{let m=[];const p=i.infoData_.getNode(r._path);return p.isEmpty()||(m=od(i.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),m},stopListening:()=>{}}),Zg(i,"connected",!1),i.serverSyncTree_=new vS({startListening:(r,o,u,c)=>(i.server_.listen(r,u,o,(m,p)=>{const _=c(m,p);es(i.eventQueue_,r._path,_)}),[]),stopListening:(r,o)=>{i.server_.unlisten(r,o)}})}function d4(i){const e=i.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function fd(i){return QM({timestamp:d4(i)})}function SS(i,t,e,r,o){i.dataUpdateCount++;const u=new ne(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let c=[];if(o)if(r){const p=cf(e,_=>Me(_));c=qM(i.serverSyncTree_,u,p,o)}else{const p=Me(e);c=BM(i.serverSyncTree_,u,p,o)}else if(r){const p=cf(e,_=>Me(_));c=PM(i.serverSyncTree_,u,p)}else{const p=Me(e);c=od(i.serverSyncTree_,u,p)}let m=u;c.length>0&&(m=pd(i,u)),es(i.eventQueue_,m,c)}function AS(i,t){Zg(i,"connected",t),t===!1&&_4(i)}function m4(i,t){vn(t,(e,r)=>{Zg(i,e,r)})}function Zg(i,t,e){const r=new ne("/.info/"+t),o=Me(e);i.infoData_.updateSnapshot(r,o);const u=od(i.infoSyncTree_,r,o);es(i.eventQueue_,r,u)}function Jg(i){return i.nextWriteId_++}function p4(i,t,e,r,o){dd(i,"set",{path:t.toString(),value:e,priority:r});const u=fd(i),c=Me(e,r),m=ld(i.serverSyncTree_,t),p=Hg(c,m,u),_=Jg(i),E=Ug(i.serverSyncTree_,t,p,_,!0);Wg(i.eventQueue_,E),i.server_.put(t.toString(),c.val(!0),(S,V)=>{const F=S==="ok";F||xn("set at "+t+" failed: "+S);const W=ga(i.serverSyncTree_,_,!F);es(i.eventQueue_,t,W),Yo(i,o,S,V)});const T=LC(i,t);pd(i,T),es(i.eventQueue_,T,[])}function _4(i){dd(i,"onDisconnectEvents");const t=fd(i),e=Df();p_(i.onDisconnect_,Jt(),(o,u)=>{const c=XM(o,u,i.serverSyncTree_,t);sl(e,o,c)});let r=[];p_(e,Jt(),(o,u)=>{r=r.concat(od(i.serverSyncTree_,o,u));const c=LC(i,o);pd(i,c)}),i.onDisconnect_=Df(),es(i.eventQueue_,Jt(),r)}function g4(i,t,e){i.server_.onDisconnectCancel(t.toString(),(r,o)=>{r==="ok"&&m_(i.onDisconnect_,t),Yo(i,e,r,o)})}function CS(i,t,e,r){const o=Me(e);i.server_.onDisconnectPut(t.toString(),o.val(!0),(u,c)=>{u==="ok"&&sl(i.onDisconnect_,t,o),Yo(i,r,u,c)})}function y4(i,t,e,r,o){const u=Me(e,r);i.server_.onDisconnectPut(t.toString(),u.val(!0),(c,m)=>{c==="ok"&&sl(i.onDisconnect_,t,u),Yo(i,o,c,m)})}function v4(i,t,e,r){if(qp(e)){dn("onDisconnect().update() called with empty data.  Don't do anything."),Yo(i,r,"ok",void 0);return}i.server_.onDisconnectMerge(t.toString(),e,(o,u)=>{o==="ok"&&vn(e,(c,m)=>{const p=Me(m);sl(i.onDisconnect_,Ve(t,c),p)}),Yo(i,r,o,u)})}function E4(i,t,e){let r;It(t._path)===".info"?r=ES(i.infoSyncTree_,t,e):r=ES(i.serverSyncTree_,t,e),DC(i.eventQueue_,t._path,r)}function T4(i,t,e){let r;It(t._path)===".info"?r=T_(i.infoSyncTree_,t,e):r=T_(i.serverSyncTree_,t,e),DC(i.eventQueue_,t._path,r)}function S4(i){i.persistentConnection_&&i.persistentConnection_.interrupt(u4)}function dd(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),dn(e,...t)}function Yo(i,t,e,r){t&&il(()=>{if(e==="ok")t(null);else{const o=(e||"error").toUpperCase();let u=o;r&&(u+=": "+r);const c=new Error(u);c.code=o,t(c)}})}function A4(i,t,e,r,o,u){dd(i,"transaction on "+t);const c={path:t,update:e,onComplete:r,status:null,order:xA(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=$g(i,t,void 0);c.currentInputSnapshot=m;const p=c.update(m.val());if(p===void 0)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{pc("transaction failed: Data returned ",p,c.path),c.status=0;const _=cd(i.transactionQueueTree_,t),E=Va(_)||[];E.push(c),Yg(_,E);let T;typeof p=="object"&&p!==null&&wi(p,".priority")?(T=Ea(p,".priority"),et(Xg(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(ld(i.serverSyncTree_,t)||St.EMPTY_NODE).getPriority().val();const S=fd(i),V=Me(p,T),F=Hg(V,m,S);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=F,c.currentWriteId=Jg(i);const W=Ug(i.serverSyncTree_,t,F,c.currentWriteId,c.applyLocally);es(i.eventQueue_,t,W),md(i,i.transactionQueueTree_)}}function $g(i,t,e){return ld(i.serverSyncTree_,t,e)||St.EMPTY_NODE}function md(i,t=i.transactionQueueTree_){if(t||_d(i,t),Va(t)){const e=VC(i,t);et(e.length>0,"Sending zero length transaction queue"),e.every(o=>o.status===0)&&C4(i,mc(t),e)}else wC(t)&&hd(t,e=>{md(i,e)})}function C4(i,t,e){const r=e.map(_=>_.currentWriteId),o=$g(i,t,r);let u=o;const c=o.hash();for(let _=0;_<e.length;_++){const E=e[_];et(E.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=On(t,E.path);u=u.updateChild(T,E.currentOutputSnapshotRaw)}const m=u.val(!0),p=t;i.server_.put(p.toString(),m,_=>{dd(i,"transaction put response",{path:p.toString(),status:_});let E=[];if(_==="ok"){const T=[];for(let S=0;S<e.length;S++)e[S].status=2,E=E.concat(ga(i.serverSyncTree_,e[S].currentWriteId)),e[S].onComplete&&T.push(()=>e[S].onComplete(null,!0,e[S].currentOutputSnapshotResolved)),e[S].unwatcher();_d(i,cd(i.transactionQueueTree_,t)),md(i,i.transactionQueueTree_),es(i.eventQueue_,t,E);for(let S=0;S<T.length;S++)il(T[S])}else{if(_==="datastale")for(let T=0;T<e.length;T++)e[T].status===3?e[T].status=4:e[T].status=0;else{xn("transaction at "+p.toString()+" failed: "+_);for(let T=0;T<e.length;T++)e[T].status=4,e[T].abortReason=_}pd(i,t)}},c)}function pd(i,t){const e=MC(i,t),r=mc(e),o=VC(i,e);return b4(i,o,r),r}function b4(i,t,e){if(t.length===0)return;const r=[];let o=[];const c=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const p=t[m],_=On(e,p.path);let E=!1,T;if(et(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)E=!0,T=p.abortReason,o=o.concat(ga(i.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=c4)E=!0,T="maxretry",o=o.concat(ga(i.serverSyncTree_,p.currentWriteId,!0));else{const S=$g(i,p.path,c);p.currentInputSnapshot=S;const V=t[m].update(S.val());if(V!==void 0){pc("transaction failed: Data returned ",V,p.path);let F=Me(V);typeof V=="object"&&V!=null&&wi(V,".priority")||(F=F.updatePriority(S.getPriority()));const J=p.currentWriteId,ht=fd(i),Et=Hg(F,S,ht);p.currentOutputSnapshotRaw=F,p.currentOutputSnapshotResolved=Et,p.currentWriteId=Jg(i),c.splice(c.indexOf(J),1),o=o.concat(Ug(i.serverSyncTree_,p.path,Et,p.currentWriteId,p.applyLocally)),o=o.concat(ga(i.serverSyncTree_,J,!0))}else E=!0,T="nodata",o=o.concat(ga(i.serverSyncTree_,p.currentWriteId,!0))}es(i.eventQueue_,e,o),o=[],E&&(t[m].status=2,(function(S){setTimeout(S,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(T==="nodata"?r.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):r.push(()=>t[m].onComplete(new Error(T),!1,null))))}_d(i,i.transactionQueueTree_);for(let m=0;m<r.length;m++)il(r[m]);md(i,i.transactionQueueTree_)}function MC(i,t){let e,r=i.transactionQueueTree_;for(e=It(t);e!==null&&Va(r)===void 0;)r=cd(r,e),t=fe(t),e=It(t);return r}function VC(i,t){const e=[];return xC(i,t,e),e.sort((r,o)=>r.order-o.order),e}function xC(i,t,e){const r=Va(t);if(r)for(let o=0;o<r.length;o++)e.push(r[o]);hd(t,o=>{xC(i,o,e)})}function _d(i,t){const e=Va(t);if(e){let r=0;for(let o=0;o<e.length;o++)e[o].status!==2&&(e[r]=e[o],r++);e.length=r,Yg(t,e.length>0?e:void 0)}hd(t,r=>{_d(i,r)})}function LC(i,t){const e=mc(MC(i,t)),r=cd(i.transactionQueueTree_,t);return ZM(r,o=>{Lp(i,o)}),Lp(i,r),RC(r,o=>{Lp(i,o)}),e}function Lp(i,t){const e=Va(t);if(e){const r=[];let o=[],u=-1;for(let c=0;c<e.length;c++)e[c].status===3||(e[c].status===1?(et(u===c-1,"All SENT items should be at beginning of queue."),u=c,e[c].status=3,e[c].abortReason="set"):(et(e[c].status===0,"Unexpected transaction status in abort"),e[c].unwatcher(),o=o.concat(ga(i.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));u===-1?Yg(t,void 0):e.length=u+1,es(i.eventQueue_,mc(t),o);for(let c=0;c<r.length;c++)il(r[c])}}function w4(i){let t="";const e=i.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let o=e[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function R4(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const e of i.split("&")){if(e.length===0)continue;const r=e.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xn(`Invalid query segment '${e}' in query '${i}'`)}return t}const bS=function(i,t){const e=I4(i),r=e.namespace;e.domain==="firebase.com"&&Ds(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&e.domain!=="localhost"&&Ds("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||xD();const o=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new YA(e.host,e.secure,r,o,t,"",r!==e.subdomain),path:new ne(e.pathString)}},I4=function(i){let t="",e="",r="",o="",u="",c=!0,m="https",p=443;if(typeof i=="string"){let _=i.indexOf("//");_>=0&&(m=i.substring(0,_-1),i=i.substring(_+2));let E=i.indexOf("/");E===-1&&(E=i.length);let T=i.indexOf("?");T===-1&&(T=i.length),t=i.substring(0,Math.min(E,T)),E<T&&(o=w4(i.substring(E,T)));const S=R4(i.substring(Math.min(i.length,T)));_=t.indexOf(":"),_>=0?(c=m==="https"||m==="wss",p=parseInt(t.substring(_+1),10)):_=t.length;const V=t.slice(0,_);if(V.toLowerCase()==="localhost")e="localhost";else if(V.split(".").length<=2)e=V;else{const F=t.indexOf(".");r=t.substring(0,F).toLowerCase(),e=t.substring(F+1),u=r}"ns"in S&&(u=S.ns)}return{host:t,port:p,domain:e,subdomain:r,secure:c,scheme:m,pathString:o,namespace:u}};class N4{constructor(t,e,r,o){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+an(this.snapshot.exportVal())}}class D4{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class O4{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return et(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class M4{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new Xi;return g4(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ya("OnDisconnect.remove",this._path);const t=new Xi;return CS(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ya("OnDisconnect.set",this._path),A_("OnDisconnect.set",t,this._path);const e=new Xi;return CS(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){ya("OnDisconnect.setWithPriority",this._path),A_("OnDisconnect.setWithPriority",t,this._path),s4("OnDisconnect.setWithPriority",e);const r=new Xi;return y4(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){ya("OnDisconnect.update",this._path),i4("OnDisconnect.update",t,this._path);const e=new Xi;return v4(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class ty{constructor(t,e,r,o){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=o}get key(){return Ot(this._path)?null:bg(this._path)}get ref(){return new Ms(this._repo,this._path)}get _queryIdentifier(){const t=lS(this._queryParams),e=Tg(t);return e==="{}"?"default":e}get _queryObject(){return lS(this._queryParams)}isEqual(t){if(t=Ye(t),!(t instanceof ty))return!1;const e=this._repo===t._repo,r=wg(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return e&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+gO(this._path)}}class Ms extends ty{constructor(t,e){super(t,e,new Dg,!1)}get parent(){const t=nC(this._path);return t===null?null:new Ms(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Qu{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new ne(t),r=C_(this.ref,t);return new Qu(this._node.getChild(e),r,Te)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>t(new Qu(o,C_(this.ref,r),Te)))}hasChild(t){const e=new ne(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yu(i,t){return i=Ye(i),i._checkNotDeleted("ref"),t!==void 0?C_(i._root,t):i._root}function C_(i,t){return i=Ye(i),It(i._path)===null?r4("child","path",t):NC("child","path",t),new Ms(i._repo,Ve(i._path,t))}function V4(i){return i=Ye(i),new M4(i._repo,i._path)}function x4(i){return ya("remove",i._path),kC(i,null)}function kC(i,t){i=Ye(i),ya("set",i._path),A_("set",t,i._path);const e=new Xi;return p4(i._repo,i._path,t,null,e.wrapCallback(()=>{})),e.promise}class ey{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const r=e._queryParams.getIndex();return new N4("value",this,new Qu(t.snapshotNode,new Ms(e._repo,e._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new D4(this,t,e):null}matches(t){return t instanceof ey?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function L4(i,t,e,r,o){const u=new O4(e,void 0),c=new ey(u);return E4(i._repo,i,c),()=>T4(i._repo,i,c)}function b_(i,t,e,r){return L4(i,"value",t)}IM(Ms);xM(Ms);const k4="FIREBASE_DATABASE_EMULATOR_HOST",w_={};let P4=!1;function U4(i,t,e,r){const o=t.lastIndexOf(":"),u=t.substring(0,o),c=Ju(u);i.repoInfo_=new YA(t,c,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,e),r&&(i.authTokenProvider_=r)}function z4(i,t,e,r,o){let u=r||i.options.databaseURL;u===void 0&&(i.options.projectId||Ds("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let c=bS(u,o),m=c.repoInfo,p;typeof process<"u"&&H0&&(p=H0[k4]),p?(u=`http://${p}?ns=${m.namespace}`,c=bS(u,o),m=c.repoInfo):c.repoInfo.secure;const _=new GD(i.name,i.options,t);a4("Invalid Firebase Database URL",c),Ot(c.path)||Ds("Database URL must point to the root of a Firebase Database (not including a child path).");const E=q4(m,i,_,new HD(i,e));return new F4(E,i)}function B4(i,t){const e=w_[t];(!e||e[i.key]!==i)&&Ds(`Database ${t}(${i.repoInfo_}) has already been deleted.`),S4(i),delete e[i.key]}function q4(i,t,e,r){let o=w_[t.name];o||(o={},w_[t.name]=o);let u=o[i.toURLString()];return u&&Ds("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new h4(i,P4,e,r),o[i.toURLString()]=u,u}class F4{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(f4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ms(this._repo,Jt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(B4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ds("Cannot call "+t+" on a deleted database.")}}function j4(i=KS(),t){const e=HS(i,"database").getImmediate({identifier:t});if(!e._instanceStarted){const r=VS("database");r&&H4(e,...r)}return e}function H4(i,t,e,r={}){i=Ye(i),i._checkNotDeleted("useEmulator");const o=`${t}:${e}`,u=i._repoInternal;if(i._instanceStarted){if(o===i._repoInternal.repoInfo_.host&&Nu(r,u.repoInfo_.emulatorOptions))return;Ds("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(u.repoInfo_.nodeAdmin)r.mockUserToken&&Ds('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new of(of.OWNER);else if(r.mockUserToken){const m=typeof r.mockUserToken=="string"?r.mockUserToken:kS(r.mockUserToken,i.app.options.projectId);c=new of(m)}Ju(t)&&(LS(t),PS("Database",!0)),U4(u,o,r,c)}function G4(i){ND(QS),Du(new Po("database",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return z4(r,o,u,e)},"PUBLIC").setMultipleInstances(!0)),Er(G0,Q0,i),Er(G0,Q0,"esm2020")}const Q4={".sv":"timestamp"};function Y4(){return Q4}class K4{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function X4(i,t,e){if(i=Ye(i),ya("Reference.transaction",i._path),i.key===".length"||i.key===".keys")throw"Reference.transaction failed: "+i.key+" is a read-only object.";const r=!0,o=new Xi,u=(m,p,_)=>{let E=null;m?o.reject(m):(E=new Qu(_,new Ms(i._repo,i._path),Te),o.resolve(new K4(p,E)))},c=b_(i,()=>{});return A4(i._repo,i._path,t,u,c,r),o.promise}ws.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};ws.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};G4();const W4={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,databaseURL:void 0},PC=YS(W4),sn=uD(PC),Ku=j4(PC),ny="enigimaClient";function Z4(){return Math.floor(Math.random()*1e4).toString().padStart(4,"0")}function UC(){const i=localStorage.getItem(ny);if(!i)return null;try{const t=JSON.parse(i);if(t?.id)return t}catch{}return null}function zC(i){localStorage.setItem(ny,JSON.stringify(i))}async function J4(){const i=UC();if(i?.id)return await DA(Mr(sn,"clients",i.id),{id:i.id,userName:i.userName??null,lastActiveAtMs:Date.now()},{merge:!0}),{id:i.id,userName:i.userName??""};for(let t=0;t<50;t++){const e=Z4(),r=Mr(sn,"clients",e);try{await Eg(sn,async u=>{if((await u.get(r)).exists())throw new Error("ID_TAKEN");u.set(r,{id:e,userName:null,createdAtMs:Date.now(),lastActiveAtMs:Date.now()})});const o={id:e,userName:""};return zC(o),o}catch(o){if(o?.message==="ID_TAKEN")continue;console.error("initClientIdentity failed:",o)}}throw new Error("Failed to allocate unique 4-digit client id")}function $4(i){const t=(i??"").trim();return t?t.slice(0,20):""}async function tV(i,t){const e=$4(t);if(!e)throw new Error("Nickname cannot be empty");await TD(Mr(sn,"clients",i),{userName:e,lastActiveAtMs:Date.now()});const o={...UC()??{id:i},id:i,userName:e};return zC(o),o}function wS(){localStorage.removeItem(ny)}const R_=2,Uf="00000000",Xu=i=>typeof i=="string"&&/^\d{8}$/.test(i)&&i!==Uf;function eV(i){return typeof i=="number"?new Date(i):new Date}function I_(i){const t=(i??"").trim().replace(/\s+/g," ");return t?t.slice(0,30):""}function nV(i){for(const t of i)if(new RegExp("\\p{L}","u").test(t)&&!/[A-Za-z]/.test(t))return{ok:!1,badChar:t};return{ok:!0,badChar:null}}function iV(){return`room__${Date.now()}`}function sV(i){return`room no.${i}`}function BC(i,t,e){const r=String(i??"0000").padStart(4,"0").slice(0,4),o=String(t??"0000").padStart(4,"0").slice(0,4),u=e?String(e).padStart(4,"0").slice(0,4):null,c=Number(r[0]),m=Number(r[3]),p=Number(o[0]),_=Number(o[3]),E=Math.abs(c-p),T=Math.abs(m-_);let S=r,V=o;E>T?c>p?(S=r,V=o):c<p?(S=o,V=r):(S=r,V=o):E<T?m>_?(S=r,V=o):m<_?(S=o,V=r):(S=r,V=o):(S=r,V=o),S===V?(S=r,V=o):(E>T&&c===p||E<T&&m===_||E===T)&&(u===r&&u!==o?(S=r,V=o):u===o&&u!==r?(S=o,V=r):Number(r)<=Number(o)?(S=r,V=o):(S=o,V=r));const F=`${S}${V}`;let W="";for(let J=0;J<8;J++){const ht=Number(F[J]);if(Number.isNaN(ht)){W+="0";continue}if(J<=5){const Et=J%2===0?3:6;W+=String(ht%Et)}else W+=String(ht)}return W}function rV(i,t){const e=Object.keys(i||{}),r=e.length>=1?e[0]:"0000",o=e.length>=2?e[1]:"0000";return BC(r,o,t)}async function RS(i,t){const e=Mr(sn,"rooms",i);await Eg(sn,async r=>{const o=await r.get(e);if(!o.exists())return;const u=o.data()||{};if(u.recipesLocked===!0&&Xu(u.recipes))return;if(Xu(u.recipes)&&u.recipesLocked!==!0){r.update(e,{recipesLocked:!0,recipeFirstId:pr()});return}const c=u.recipeFirstId?String(u.recipeFirstId):null,m=String(t).padStart(4,"0").slice(0,4);if(!c){r.update(e,{recipeFirstId:m});return}const p=String(c).padStart(4,"0").slice(0,4);if(p===m)return;const _=u.createdById?String(u.createdById):p,E=BC(p,m,_);r.update(e,{recipes:E,recipesLocked:!0,recipeFirstId:pr()})})}async function aV(i,t,e){const r=I_(e);if(!r)throw new Error("Room name cannot be empty");const o=Mr(sn,"rooms",i);await Eg(sn,async u=>{const c=await u.get(o);if(!c.exists())throw new Error("ROOM_NOT_FOUND");const m=c.data()||{};if(m.createdById!==t)throw new Error("NOT_CREATOR");if(m.roomNameLocked===!0)throw new Error("NAME_LOCKED");u.update(o,{roomName:r,roomNameLocked:!0})})}async function oV(i){const t=No(sn,"rooms",i,"messages");for(;;){const e=await NA(wA(t,yD(100)));if(e.empty)break;const r=OA(sn);e.docs.forEach(o=>r.delete(o.ref)),await r.commit()}await SD(Mr(sn,"rooms",i))}async function IS(i,t,e){const r=Yu(Ku,`presence/${i}`),o=Yu(Ku,`presence/${i}/${t}`);if(!(await X4(r,c=>{const m=c||{},p=Object.keys(m);if(m[t])return m;if(!(p.length>=R_))return m[t]={userName:e||"",joinedAt:Date.now()},m})).committed)throw new Error("ROOM_FULL");return await V4(o).remove(),await kC(o,{userName:e||"",joinedAt:Y4()}),!0}async function du(i,t){if(!i||!t)return;const e=Yu(Ku,`presence/${i}/${t}`);await x4(e)}const qC=65;function lV(i){const t=i.charCodeAt(0);return t>=65&&t<=90||t>=97&&t<=122}function FC(i){return i.toUpperCase().charCodeAt(0)-qC}function uV(i,t){const e=String.fromCharCode(qC+i);return t?e.toLowerCase():e}const cV="YRUHQSLDPXNGOKMIEBFZCWVJAT",hV=Array.from(cV).map(i=>FC(i));function $h(i,t){const e=i.slice(t,t+2),r=parseInt(e,10);return Number.isFinite(r)?r:0}const xa=0,Ra=1,rl=2,Ia=3,La=4,Wu=5,Zu=6,al=7,_c=8,zf=9,Bf=10,gc=11,lf=[[10,6,15,22,16,1,3,20,14,11,9,18,17,2,12,5,0,4,13,7,24,21,8,23,19,25],[6,11,3,18,1,22,25,19,0,2,23,16,8,4,10,9,5,13,20,24,15,17,7,21,12,14],[9,25,0,8,19,15,13,22,16,1,3,20,14,11,10,6,18,17,2,12,5,4,7,24,21,23],[4,7,13,10,14,21,12,8,24,25,9,18,17,2,1,0,5,20,23,19,15,11,16,6,22,3],[13,18,25,0,8,19,15,6,22,17,2,12,5,4,7,24,21,23,9,10,1,3,20,14,11,16],[8,3,5,24,21,17,2,11,16,7,23,13,20,4,25,9,10,1,12,18,14,6,0,15,22,19],[4,11,5,9,25,0,8,19,15,6,7,22,17,2,12,10,1,3,20,14,13,18,24,21,23,16],[2,12,6,4,11,5,9,25,0,8,19,15,13,22,16,1,3,20,14,10,7,24,21,23,18,17],[11,16,7,12,6,4,25,0,8,19,15,13,22,17,2,5,9,24,21,23,18,3,20,14,10,1],[4,1,6,16,19,25,12,23,14,9,0,5,21,8,15,20,11,10,2,24,3,18,13,22,17,7],[10,18,17,2,12,11,23,6,14,22,16,1,25,9,5,0,4,13,7,24,15,21,3,19,20,8],[9,3,5,18,15,11,6,20,23,17,19,10,22,7,21,16,4,13,12,24,14,25,8,1,2,0]];function fV(i){const t=Array(26);for(let e=0;e<26;e++)t[i[e]]=e;return t}const kp=lf.map(fV),dV=[xa,al,Ia,Zu,Ra,Wu,rl,_c,La],mV=[Ra,Ia,Ra,xa,Zu,La,rl,Zu,al],pV=[rl,La,Wu,Ia,Wu,Ia,xa,Ra,_c],_V=[Bf,gc,xa,al,Ia,La,Wu,Zu,Ra],gV=[gc,Bf,_c,rl,Ra,al,xa,Ia,La],yV=[zf,_c,gc,rl,La,xa,al,Wu,Ia],vV=[Ra,zf,Zu,gc,al,rl,La,xa,_c];function Pp(i,t){const e=i%100;if(e<=80){const r=Math.floor(e/9),o=e%9;return t===0?dV[r]:t===1?mV[o]:pV[o]}if(e<=89){const r=e-81;return t===0?zf:t===1?_V[r]:gV[r]}if(e<=98){const r=e-90;return t===0?Bf:t===1?yV[r]:vV[r]}return t===0?gc:t===1?zf:Bf}function jC(i){const t=String(i||Uf).padStart(8,"0").slice(0,8),e=$h(t,0)%26,r=$h(t,2)%26,o=$h(t,4)%26,u=$h(t,6)%100,c=Pp(u,0),m=Pp(u,1),p=Pp(u,2),_=lf[c],E=lf[m],T=lf[p],S=kp[c],V=kp[m],F=kp[p];return{setIndex:u,rotorF:[_,E,T],rotorR:[S,V,F],reflector:hV,startPos:[e,r,o]}}function EV(i){let[t,e,r]=i;return t=(t+1)%26,t===0&&(e=(e+1)%26,e===0&&(r=(r+1)%26)),[t,e,r]}function TV(i,t){let[e,r,o]=i;const u=e+t,c=(u%26+26)%26,m=Math.floor(u/26),p=r+m,_=(p%26+26)%26,E=Math.floor(p/26),T=((o+E)%26+26)%26;return[c,_,T]}function Up(i,t,e){const r=(i+e)%26;return(t[r]-e+26)%26}function zp(i,t,e){const r=(i+e)%26;return(t[r]-e+26)%26}function SV(i,t,e){const[r,o,u]=e,[c,m,p]=t.rotorF,[_,E,T]=t.rotorR;let S=i;return S=Up(S,c,r),S=Up(S,m,o),S=Up(S,p,u),S=t.reflector[S],S=zp(S,T,u),S=zp(S,E,o),S=zp(S,_,r),S}function HC(i,t,e){let r=i;if(i&&lV(i)){const u=i>="a"&&i<="z",c=FC(i),m=SV(c,t,e);r=uV(m,u)}const o=EV(e);return{outCh:r,nextPos:o}}function AV(i,t,e){if(!Xu(t))return i;const r=jC(t),o=(e||[]).reduce((m,p)=>{const _=p?.cipherText??p?.text??"";return m+String(_).length},0);let u=TV(r.startPos,o),c="";for(const m of String(i)){const p=HC(m,r,u);c+=p.outCh,u=p.nextPos}return c}function CV(i,t){const e=jC(t);let r=e.startPos;const o=[];for(const u of i||[]){const c=String(u.cipherText??"");let m="";for(const p of c){const _=HC(p,e,r);m+=_.outCh,r=_.nextPos}o.push({...u,plainText:m})}return o}function bV(){const[i,t]=Dt.useState(""),[e,r]=Dt.useState(""),[o,u]=Dt.useState(null),[c,m]=Dt.useState(""),[p,_]=Dt.useState(!1),[E,T]=Dt.useState([]),[S,V]=Dt.useState(null),[F,W]=Dt.useState([]),[J,ht]=Dt.useState(""),[Et,gt]=Dt.useState({}),[Qt,le]=Dt.useState({}),[Nt,N]=Dt.useState({}),[b,I]=Dt.useState(!1),[x,D]=Dt.useState(!1),[k,w]=Dt.useState(!1),[de,me]=Dt.useState(!1),[H,it]=Dt.useState(""),[dt,kt]=Dt.useState(!1),[jt,M]=Dt.useState(""),Y=Dt.useRef(null),tt=Dt.useRef(null),ot=Dt.useRef(null),pt=!!i&&!e;Dt.useEffect(()=>{if(jt)return Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>M(""),3500),()=>{Y.current&&clearTimeout(Y.current)}},[jt]),Dt.useEffect(()=>{const $="rooms_schema_cleanup_v2_done";localStorage.getItem($)!=="1"&&(async()=>{const ft=await NA(No(sn,"rooms"));if(ft.empty){localStorage.setItem($,"1");return}const Yt=OA(sn);ft.docs.forEach(xe=>{Yt.update(xe.ref,{createdByName:pr(),description:pr(),recipeOwners:pr(),recipesLockedAt:pr(),roomNamedAtMs:pr(),recipeFirstId:pr()})}),await Yt.commit(),localStorage.setItem($,"1")})().catch(ft=>console.error("rooms cleanup failed:",ft))},[]),Dt.useEffect(()=>{(async()=>{const $=await J4();t($.id),r($.userName||""),m($.userName||"")})().catch($=>{console.error($),alert($?.message||"Failed to initialize client")})},[]),Dt.useEffect(()=>{const $=Ip(No(sn,"clients"),ft=>{const Yt={};let xe=null;ft.docs.forEach(Se=>{const ce=Se.data()||{},ui=ce.id??Se.id,ks=ce.userName??"";ui&&ks&&(Yt[ui]=ks),ui===i&&(xe=typeof ce.createdAtMs=="number"?ce.createdAtMs:ce.createdAt?.toMillis?.()??null)}),gt(Yt),u(xe)});return()=>$()},[i]),Dt.useEffect(()=>{const $=Ip(No(sn,"rooms"),ft=>{const Yt=ft.docs.map(xe=>{const Se=xe.data()||{};return{id:xe.id,roomName:Se.roomName??xe.id,createdAt:eV(Se.createdAt),maxOccupants:Se.maxOccupants??R_,createdById:Se.createdById??null,recipes:Se.recipes??Uf,recipesLocked:Se.recipesLocked===!0,roomNameLocked:Se.roomNameLocked===!0}});Yt.sort((xe,Se)=>xe.id.localeCompare(Se.id)),T(Yt)});return()=>$()},[]),Dt.useEffect(()=>{const $=Yu(Ku,"presence"),ft=b_($,Yt=>{le(Yt.val()||{})});return()=>ft()},[]),Dt.useEffect(()=>{if(!S){N({});return}const $=Yu(Ku,`presence/${S}`),ft=b_($,Yt=>{N(Yt.val()||{})});return()=>ft()},[S]),Dt.useEffect(()=>{if(!S){W([]);return}const $=wA(No(sn,"rooms",S,"messages"),gD("sentAt","asc")),ft=Ip($,Yt=>{const xe=Yt.docs.map(Se=>{const ce=Se.data()||{};return{id:Se.id,senderId:ce.senderId??"????",sentAt:typeof ce.sentAt=="number"?ce.sentAt:Date.now(),cipherText:ce.text??"",senderName:ce.senderName??null}});W(xe)});return()=>ft()},[S]),Dt.useEffect(()=>{S&&ot.current?.scrollIntoView({behavior:"auto",block:"end"})},[F,S]),Dt.useEffect(()=>{if(!i)return;const $=()=>{tt.current&&du(tt.current,i)},ft=()=>$();return window.addEventListener("beforeunload",ft),()=>{window.removeEventListener("beforeunload",ft),$()}},[i]);const rt=Dt.useMemo(()=>E.find($=>$.id===S)||null,[E,S]),Vt=Dt.useMemo(()=>Object.keys(Nt||{}).length,[Nt]),we=Dt.useMemo(()=>{const $=rt?.recipes;return Xu($)?$:null},[rt]),ue=Dt.useMemo(()=>{const $=rt?.createdById??null;return rV(Nt,$)},[Nt,rt]),ns=Dt.useMemo(()=>rt?CV(F,ue):[],[F,ue,rt]),Yn=!!rt&&!pt&&rt.recipesLocked===!0&&Xu(rt.recipes)&&Vt===2;async function Vs(){try{_(!0);const $=await tV(i,c);r($.userName)}catch($){alert($?.message||"Failed to save nickname")}finally{_(!1)}}async function xs($){if(i){if(pt){alert("Please set your nickname first.");return}if(S!==$)try{await IS($,i,e),await RS($,i),tt.current&&await du(tt.current,i),tt.current=$,V($)}catch(ft){if(ft?.message==="ROOM_FULL"){alert("This room is full (2 people already).");return}console.error(ft),alert(ft?.message||"Failed to enter room")}}}async function Kn(){if(!(!i||!S)){w(!0);try{await du(S,i)}finally{tt.current=null,V(null),W([]),w(!1)}}}async function Pr(){if(i){if(pt){alert("Please set your nickname first.");return}if(!b){I(!0);try{const $=iV(),ft=E.length+1,Yt=sV(ft);await DA(Mr(sn,"rooms",$),{createdAt:Date.now(),createdById:i,maxOccupants:2,recipes:Uf,recipesLocked:!1,roomName:Yt,roomNameLocked:!1}),await IS($,i,e),await RS($,i),tt.current&&await du(tt.current,i),tt.current=$,V($),it(""),me(!0)}catch($){console.error($),alert($?.message||"Failed to create room")}finally{I(!1)}}}}async function is(){if(!(!i||!rt||rt.createdById!==i||!window.confirm("Delete this room? (Messages will be deleted too.)"))){D(!0);try{await du(rt.id,i),await oV(rt.id),tt.current=null,V(null),W([]),me(!1)}catch(ft){console.error(ft),alert(ft?.message||"Failed to delete room")}finally{D(!1)}}}async function Ur(){if(!i||!rt||rt.createdById!==i||rt.roomNameLocked)return;const $=I_(H);if(!$){alert("Please enter a room name.");return}kt(!0);try{await aV(rt.id,i,$),me(!1),it("")}catch(ft){ft?.message==="NAME_LOCKED"?alert("Room name is already locked. You can set it only once."):ft?.message==="NOT_CREATOR"?alert("Only the room creator can name this room."):alert(ft?.message||"Failed to set room name")}finally{kt(!1)}}const Ls=Dt.useMemo(()=>{if(!o)return"";try{return new Date(o).toLocaleString()}catch{return""}},[o]);return at.jsxs(at.Fragment,{children:[pt&&at.jsx("div",{className:"overlay",children:at.jsxs("div",{className:"modal",children:[at.jsx("h3",{children:"Set your nickname"}),at.jsx("input",{className:"input",value:c,onChange:$=>m($.target.value),placeholder:"Enter nickname (max 20 chars)"}),at.jsxs("div",{className:"modalRow",children:[at.jsx("button",{className:"btn",onClick:Vs,disabled:p||!c.trim(),children:p?"Saving...":"Save"}),at.jsx("button",{className:"btn",onClick:()=>{wS(),location.reload()},children:"Reset ID"})]})]})}),de&&rt&&rt.createdById===i&&!rt.roomNameLocked&&at.jsx("div",{className:"overlay overlaySecondary",children:at.jsxs("div",{className:"modal modalWide",children:[at.jsx("h3",{children:"Set Room Name (one-time)"}),at.jsx("p",{className:"modalHint",children:"You can set the room name only once."}),at.jsx("input",{className:"input",value:H,onChange:$=>it($.target.value),placeholder:"Enter room name (max 30 chars)"}),at.jsxs("div",{className:"modalRow",children:[at.jsx("button",{className:"btn",type:"button",onClick:Ur,disabled:dt||!I_(H),children:dt?"Saving...":"Save"}),at.jsx("button",{className:"btn",type:"button",onClick:()=>me(!1),children:"Later"})]})]})}),at.jsxs("div",{className:"totalDiv",children:[at.jsxs("div",{className:"leftDiv",children:[at.jsxs("div",{className:"leftHeader",children:[at.jsxs("div",{className:"leftHeaderTitles",children:[at.jsx("div",{className:"leftHeaderTitle",children:"Rooms"}),at.jsx("div",{className:"leftHeaderSubtitle",children:"Join any room (RTDB presence)"})]}),at.jsx("button",{type:"button",className:"iconBtn",onClick:Pr,disabled:b||pt,title:"Create a new room",children:b?"":"+"})]}),at.jsx("div",{className:"roomsList",children:E.map($=>{const ft=Qt?.[$.id]?Object.keys(Qt[$.id]).length:0,Yt=$.maxOccupants??R_,xe=ft>=Yt;return at.jsxs("button",{type:"button",className:`roomCard${S===$.id?" active":""}`,onClick:()=>xs($.id),title:`${ft}/${Yt}`,children:[at.jsxs("div",{className:"roomTopRow",children:[at.jsx("div",{className:"roomTitle roomTitleFlex",children:$.roomName}),at.jsxs("span",{className:`badge${xe?" full":""}`,children:[ft,"/",Yt]})]}),at.jsx("div",{className:"roomDate",children:$.createdAt.toLocaleString()})]},$.id)})})]}),at.jsxs("div",{className:"rightDiv",children:[at.jsxs("div",{className:"chatHeader",children:[at.jsx("div",{className:"headerTitle",children:rt?rt.roomName:"No room selected"}),at.jsxs("div",{className:"headerActions",children:[at.jsx("button",{className:"btn",type:"button",onClick:Kn,disabled:!rt||k,title:"Leave this room",children:k?"Leaving":"Leave"}),rt&&rt.createdById===i&&!rt.roomNameLocked&&at.jsx("button",{className:"btn",type:"button",onClick:()=>{it(""),me(!0)},title:"Set room name (one-time)",children:"Set Name"}),rt&&rt.createdById===i&&at.jsx("button",{className:"btn btnDanger",type:"button",onClick:is,disabled:x,title:"Delete this room (creator only)",children:x?"Deleting":"Delete"})]})]}),at.jsx("div",{className:"chatBody",children:rt?at.jsxs("div",{className:"messagesScroll",children:[ns.map($=>at.jsx(wV,{senderLabel:$.senderName||Et[$.senderId]||$.senderId,timeMs:$.sentAt,content:$.plainText,isLocal:i===$.senderId},$.id)),at.jsx("div",{ref:ot})]}):at.jsx("div",{className:"placeholder",children:"Select a room to view messages"})}),at.jsxs("div",{className:"bottomBar",children:[at.jsxs("div",{className:"panel infoPanel",children:[at.jsx("div",{className:"infoTitle",children:"Client Info"}),at.jsxs("div",{className:"infoRow",children:[at.jsx("div",{className:"infoKey",children:"Name:"}),at.jsx("div",{className:"infoVal",title:e||"",children:e||""})]}),at.jsxs("div",{className:"infoRow",children:[at.jsx("div",{className:"infoKey",children:"Created Date:"}),at.jsx("div",{className:"infoVal",title:Ls,children:Ls})]}),at.jsx("div",{className:"divider"}),at.jsx("button",{className:"btn",type:"button",onClick:()=>{wS(),location.reload()},title:"Reset local identity",children:"Reset ID"})]}),at.jsxs("div",{className:"panel composer",children:[at.jsxs("div",{children:[at.jsx("div",{className:"infoTitle",children:"Message"}),at.jsxs("div",{className:"infoRow infoRowLeft",children:[at.jsx("span",{children:"English only."}),at.jsx("span",{children:"Numbers & symbols OK."})]})]}),jt&&at.jsx("div",{className:"warn",children:jt}),rt&&!Yn&&at.jsx("div",{className:"warnSoft",children:Vt!==2?"Need exactly 2 clients in this room to chat.":"Waiting for the room's fixed recipe to lock"}),at.jsxs("form",{onSubmit:async $=>{if($.preventDefault(),!i||!S||pt||!Yn)return;const ft=J.trim();if(!ft)return;const Yt=nV(ft);if(!Yt.ok){M(`English only. Non-English character detected: "${Yt.badChar}"`);return}const xe=AV(ft,we,F);ht("");try{await AD(No(sn,"rooms",S,"messages"),{senderId:i,senderName:e,sentAt:Date.now(),text:xe})}catch(Se){console.error("send failed:",Se),M(Se?.message||"Failed to send message")}},children:[at.jsxs("div",{className:"composerBox",children:[at.jsx("input",{className:"input",name:"message",value:J,onChange:$=>ht($.target.value),disabled:!rt||pt||!Yn,placeholder:rt?Yn?"Type your message...":"Need 2 clients (and locked recipe) to send...":"Select a room first..."}),at.jsx("button",{className:"sendBtn",type:"submit",disabled:!rt||pt||!Yn,title:"Send",children:"Send"})]}),at.jsx("div",{className:"composerHint",children:"Warning auto-clears in a few seconds."})]})]})]})]})]})]})}function wV({senderLabel:i,timeMs:t,isLocal:e,content:r}){const o=new Date(t);return at.jsxs("div",{className:`message${e?" local":""}`,children:[at.jsx("div",{className:"sender",children:i}),at.jsx("div",{className:"time",children:o.toString()}),at.jsx("p",{children:r})]})}window.addEventListener("load",()=>{Dw.createRoot(document.getElementById("root")).render(at.jsx(bV,{}))});
